(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();var e_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function Uo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t_={exports:{}},nc={},n_={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ts=Symbol.for("react.element"),mS=Symbol.for("react.portal"),gS=Symbol.for("react.fragment"),vS=Symbol.for("react.strict_mode"),yS=Symbol.for("react.profiler"),_S=Symbol.for("react.provider"),wS=Symbol.for("react.context"),xS=Symbol.for("react.forward_ref"),bS=Symbol.for("react.suspense"),SS=Symbol.for("react.memo"),CS=Symbol.for("react.lazy"),Ug=Symbol.iterator;function ES(e){return e===null||typeof e!="object"?null:(e=Ug&&e[Ug]||e["@@iterator"],typeof e=="function"?e:null)}var r_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},i_=Object.assign,o_={};function $o(e,t,n){this.props=e,this.context=t,this.refs=o_,this.updater=n||r_}$o.prototype.isReactComponent={};$o.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$o.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function a_(){}a_.prototype=$o.prototype;function Xh(e,t,n){this.props=e,this.context=t,this.refs=o_,this.updater=n||r_}var ep=Xh.prototype=new a_;ep.constructor=Xh;i_(ep,$o.prototype);ep.isPureReactComponent=!0;var $g=Array.isArray,s_=Object.prototype.hasOwnProperty,tp={current:null},l_={key:!0,ref:!0,__self:!0,__source:!0};function u_(e,t,n){var r,o={},a=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)s_.call(t,r)&&!l_.hasOwnProperty(r)&&(o[r]=t[r]);var u=arguments.length-2;if(u===1)o.children=n;else if(1<u){for(var c=Array(u),f=0;f<u;f++)c[f]=arguments[f+2];o.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)o[r]===void 0&&(o[r]=u[r]);return{$$typeof:Ts,type:e,key:a,ref:l,props:o,_owner:tp.current}}function PS(e,t){return{$$typeof:Ts,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function np(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ts}function NS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Hg=/\/+/g;function Cd(e,t){return typeof e=="object"&&e!==null&&e.key!=null?NS(""+e.key):t.toString(36)}function Xl(e,t,n,r,o){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Ts:case mS:l=!0}}if(l)return l=e,o=o(l),e=r===""?"."+Cd(l,0):r,$g(o)?(n="",e!=null&&(n=e.replace(Hg,"$&/")+"/"),Xl(o,t,n,"",function(f){return f})):o!=null&&(np(o)&&(o=PS(o,n+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(Hg,"$&/")+"/")+e)),t.push(o)),1;if(l=0,r=r===""?".":r+":",$g(e))for(var u=0;u<e.length;u++){a=e[u];var c=r+Cd(a,u);l+=Xl(a,t,n,c,o)}else if(c=ES(e),typeof c=="function")for(e=c.call(e),u=0;!(a=e.next()).done;)a=a.value,c=r+Cd(a,u++),l+=Xl(a,t,n,c,o);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function wl(e,t,n){if(e==null)return e;var r=[],o=0;return Xl(e,r,"","",function(a){return t.call(n,a,o++)}),r}function kS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Gt={current:null},eu={transition:null},IS={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:eu,ReactCurrentOwner:tp};function c_(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:wl,forEach:function(e,t,n){wl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return wl(e,function(){t++}),t},toArray:function(e){return wl(e,function(t){return t})||[]},only:function(e){if(!np(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ie.Component=$o;Ie.Fragment=gS;Ie.Profiler=yS;Ie.PureComponent=Xh;Ie.StrictMode=vS;Ie.Suspense=bS;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IS;Ie.act=c_;Ie.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=i_({},e.props),o=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=tp.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)s_.call(t,c)&&!l_.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&u!==void 0?u[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var f=0;f<c;f++)u[f]=arguments[f+2];r.children=u}return{$$typeof:Ts,type:e.type,key:o,ref:a,props:r,_owner:l}};Ie.createContext=function(e){return e={$$typeof:wS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_S,_context:e},e.Consumer=e};Ie.createElement=u_;Ie.createFactory=function(e){var t=u_.bind(null,e);return t.type=e,t};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(e){return{$$typeof:xS,render:e}};Ie.isValidElement=np;Ie.lazy=function(e){return{$$typeof:CS,_payload:{_status:-1,_result:e},_init:kS}};Ie.memo=function(e,t){return{$$typeof:SS,type:e,compare:t===void 0?null:t}};Ie.startTransition=function(e){var t=eu.transition;eu.transition={};try{e()}finally{eu.transition=t}};Ie.unstable_act=c_;Ie.useCallback=function(e,t){return Gt.current.useCallback(e,t)};Ie.useContext=function(e){return Gt.current.useContext(e)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(e){return Gt.current.useDeferredValue(e)};Ie.useEffect=function(e,t){return Gt.current.useEffect(e,t)};Ie.useId=function(){return Gt.current.useId()};Ie.useImperativeHandle=function(e,t,n){return Gt.current.useImperativeHandle(e,t,n)};Ie.useInsertionEffect=function(e,t){return Gt.current.useInsertionEffect(e,t)};Ie.useLayoutEffect=function(e,t){return Gt.current.useLayoutEffect(e,t)};Ie.useMemo=function(e,t){return Gt.current.useMemo(e,t)};Ie.useReducer=function(e,t,n){return Gt.current.useReducer(e,t,n)};Ie.useRef=function(e){return Gt.current.useRef(e)};Ie.useState=function(e){return Gt.current.useState(e)};Ie.useSyncExternalStore=function(e,t,n){return Gt.current.useSyncExternalStore(e,t,n)};Ie.useTransition=function(){return Gt.current.useTransition()};Ie.version="18.3.1";n_.exports=Ie;var j=n_.exports;const Se=Uo(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TS=j,DS=Symbol.for("react.element"),LS=Symbol.for("react.fragment"),AS=Object.prototype.hasOwnProperty,MS=TS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,RS={key:!0,ref:!0,__self:!0,__source:!0};function d_(e,t,n){var r,o={},a=null,l=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)AS.call(t,r)&&!RS.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:DS,type:e,key:a,ref:l,props:o,_owner:MS.current}}nc.Fragment=LS;nc.jsx=d_;nc.jsxs=d_;t_.exports=nc;var v=t_.exports,Lf={},f_={exports:{}},hn={},h_={exports:{}},p_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,F){var k=B.length;B.push(F);e:for(;0<k;){var z=k-1>>>1,G=B[z];if(0<o(G,F))B[z]=F,B[k]=G,k=z;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var F=B[0],k=B.pop();if(k!==F){B[0]=k;e:for(var z=0,G=B.length,H=G>>>1;z<H;){var K=2*(z+1)-1,ne=B[K],Q=K+1,ce=B[Q];if(0>o(ne,k))Q<G&&0>o(ce,ne)?(B[z]=ce,B[Q]=k,z=Q):(B[z]=ne,B[K]=k,z=K);else if(Q<G&&0>o(ce,k))B[z]=ce,B[Q]=k,z=Q;else break e}}return F}function o(B,F){var k=B.sortIndex-F.sortIndex;return k!==0?k:B.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var c=[],f=[],h=1,g=null,p=3,y=!1,w=!1,E=!1,N=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(B){for(var F=n(f);F!==null;){if(F.callback===null)r(f);else if(F.startTime<=B)r(f),F.sortIndex=F.expirationTime,t(c,F);else break;F=n(f)}}function C(B){if(E=!1,S(B),!w)if(n(c)!==null)w=!0,Y(D);else{var F=n(f);F!==null&&te(C,F.startTime-B)}}function D(B,F){w=!1,E&&(E=!1,b(U),U=-1),y=!0;var k=p;try{for(S(F),g=n(c);g!==null&&(!(g.expirationTime>F)||B&&!R());){var z=g.callback;if(typeof z=="function"){g.callback=null,p=g.priorityLevel;var G=z(g.expirationTime<=F);F=e.unstable_now(),typeof G=="function"?g.callback=G:g===n(c)&&r(c),S(F)}else r(c);g=n(c)}if(g!==null)var H=!0;else{var K=n(f);K!==null&&te(C,K.startTime-F),H=!1}return H}finally{g=null,p=k,y=!1}}var A=!1,M=null,U=-1,I=5,T=-1;function R(){return!(e.unstable_now()-T<I)}function V(){if(M!==null){var B=e.unstable_now();T=B;var F=!0;try{F=M(!0,B)}finally{F?Z():(A=!1,M=null)}}else A=!1}var Z;if(typeof x=="function")Z=function(){x(V)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,J=q.port2;q.port1.onmessage=V,Z=function(){J.postMessage(null)}}else Z=function(){N(V,0)};function Y(B){M=B,A||(A=!0,Z())}function te(B,F){U=N(function(){B(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){w||y||(w=!0,Y(D))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(B){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var k=p;p=F;try{return B()}finally{p=k}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,F){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var k=p;p=B;try{return F()}finally{p=k}},e.unstable_scheduleCallback=function(B,F,k){var z=e.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?z+k:z):k=z,B){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=k+G,B={id:h++,callback:F,priorityLevel:B,startTime:k,expirationTime:G,sortIndex:-1},k>z?(B.sortIndex=k,t(f,B),n(c)===null&&B===n(f)&&(E?(b(U),U=-1):E=!0,te(C,k-z))):(B.sortIndex=G,t(c,B),w||y||(w=!0,Y(D))),B},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(B){var F=p;return function(){var k=p;p=F;try{return B.apply(this,arguments)}finally{p=k}}}})(p_);h_.exports=p_;var OS=h_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BS=j,fn=OS;function ie(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m_=new Set,Va={};function zi(e,t){Eo(e,t),Eo(e+"Capture",t)}function Eo(e,t){for(Va[e]=t,e=0;e<t.length;e++)m_.add(t[e])}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Af=Object.prototype.hasOwnProperty,jS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zg={},Gg={};function zS(e){return Af.call(Gg,e)?!0:Af.call(Zg,e)?!1:jS.test(e)?Gg[e]=!0:(Zg[e]=!0,!1)}function FS(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function US(e,t,n,r){if(t===null||typeof t>"u"||FS(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Wt(e,t,n,r,o,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var Dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Dt[e]=new Wt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Dt[t]=new Wt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Dt[e]=new Wt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Dt[e]=new Wt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Dt[e]=new Wt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Dt[e]=new Wt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Dt[e]=new Wt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Dt[e]=new Wt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Dt[e]=new Wt(e,5,!1,e.toLowerCase(),null,!1,!1)});var rp=/[\-:]([a-z])/g;function ip(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(rp,ip);Dt[t]=new Wt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(rp,ip);Dt[t]=new Wt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(rp,ip);Dt[t]=new Wt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Dt[e]=new Wt(e,1,!1,e.toLowerCase(),null,!1,!1)});Dt.xlinkHref=new Wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Dt[e]=new Wt(e,1,!1,e.toLowerCase(),null,!0,!0)});function op(e,t,n,r){var o=Dt.hasOwnProperty(t)?Dt[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(US(t,n,o,r)&&(n=null),r||o===null?zS(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Cr=BS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xl=Symbol.for("react.element"),no=Symbol.for("react.portal"),ro=Symbol.for("react.fragment"),ap=Symbol.for("react.strict_mode"),Mf=Symbol.for("react.profiler"),g_=Symbol.for("react.provider"),v_=Symbol.for("react.context"),sp=Symbol.for("react.forward_ref"),Rf=Symbol.for("react.suspense"),Of=Symbol.for("react.suspense_list"),lp=Symbol.for("react.memo"),kr=Symbol.for("react.lazy"),y_=Symbol.for("react.offscreen"),Wg=Symbol.iterator;function fa(e){return e===null||typeof e!="object"?null:(e=Wg&&e[Wg]||e["@@iterator"],typeof e=="function"?e:null)}var et=Object.assign,Ed;function Ca(e){if(Ed===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ed=t&&t[1]||""}return`
`+Ed+e}var Pd=!1;function Nd(e,t){if(!e||Pd)return"";Pd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var o=f.stack.split(`
`),a=r.stack.split(`
`),l=o.length-1,u=a.length-1;1<=l&&0<=u&&o[l]!==a[u];)u--;for(;1<=l&&0<=u;l--,u--)if(o[l]!==a[u]){if(l!==1||u!==1)do if(l--,u--,0>u||o[l]!==a[u]){var c=`
`+o[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=u);break}}}finally{Pd=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ca(e):""}function $S(e){switch(e.tag){case 5:return Ca(e.type);case 16:return Ca("Lazy");case 13:return Ca("Suspense");case 19:return Ca("SuspenseList");case 0:case 2:case 15:return e=Nd(e.type,!1),e;case 11:return e=Nd(e.type.render,!1),e;case 1:return e=Nd(e.type,!0),e;default:return""}}function Bf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ro:return"Fragment";case no:return"Portal";case Mf:return"Profiler";case ap:return"StrictMode";case Rf:return"Suspense";case Of:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case v_:return(e.displayName||"Context")+".Consumer";case g_:return(e._context.displayName||"Context")+".Provider";case sp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case lp:return t=e.displayName||null,t!==null?t:Bf(e.type)||"Memo";case kr:t=e._payload,e=e._init;try{return Bf(e(t))}catch{}}return null}function HS(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bf(t);case 8:return t===ap?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Jr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function __(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ZS(e){var t=__(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(l){r=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bl(e){e._valueTracker||(e._valueTracker=ZS(e))}function w_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=__(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function pu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function jf(e,t){var n=t.checked;return et({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Vg(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Jr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function x_(e,t){t=t.checked,t!=null&&op(e,"checked",t,!1)}function zf(e,t){x_(e,t);var n=Jr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ff(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ff(e,t.type,Jr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Kg(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ff(e,t,n){(t!=="number"||pu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ea=Array.isArray;function vo(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Jr(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Uf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ie(91));return et({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function qg(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ie(92));if(Ea(n)){if(1<n.length)throw Error(ie(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Jr(n)}}function b_(e,t){var n=Jr(t.value),r=Jr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Yg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function S_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $f(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?S_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Sl,C_=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Sl=Sl||document.createElement("div"),Sl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Sl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ka(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Da={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GS=["Webkit","ms","Moz","O"];Object.keys(Da).forEach(function(e){GS.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Da[t]=Da[e]})});function E_(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Da.hasOwnProperty(e)&&Da[e]?(""+t).trim():t+"px"}function P_(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=E_(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var WS=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hf(e,t){if(t){if(WS[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ie(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ie(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ie(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ie(62))}}function Zf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gf=null;function up(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Wf=null,yo=null,_o=null;function Qg(e){if(e=As(e)){if(typeof Wf!="function")throw Error(ie(280));var t=e.stateNode;t&&(t=sc(t),Wf(e.stateNode,e.type,t))}}function N_(e){yo?_o?_o.push(e):_o=[e]:yo=e}function k_(){if(yo){var e=yo,t=_o;if(_o=yo=null,Qg(e),t)for(e=0;e<t.length;e++)Qg(t[e])}}function I_(e,t){return e(t)}function T_(){}var kd=!1;function D_(e,t,n){if(kd)return e(t,n);kd=!0;try{return I_(e,t,n)}finally{kd=!1,(yo!==null||_o!==null)&&(T_(),k_())}}function qa(e,t){var n=e.stateNode;if(n===null)return null;var r=sc(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ie(231,t,typeof n));return n}var Vf=!1;if(wr)try{var ha={};Object.defineProperty(ha,"passive",{get:function(){Vf=!0}}),window.addEventListener("test",ha,ha),window.removeEventListener("test",ha,ha)}catch{Vf=!1}function VS(e,t,n,r,o,a,l,u,c){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(h){this.onError(h)}}var La=!1,mu=null,gu=!1,Kf=null,KS={onError:function(e){La=!0,mu=e}};function qS(e,t,n,r,o,a,l,u,c){La=!1,mu=null,VS.apply(KS,arguments)}function YS(e,t,n,r,o,a,l,u,c){if(qS.apply(this,arguments),La){if(La){var f=mu;La=!1,mu=null}else throw Error(ie(198));gu||(gu=!0,Kf=f)}}function Fi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function L_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Jg(e){if(Fi(e)!==e)throw Error(ie(188))}function QS(e){var t=e.alternate;if(!t){if(t=Fi(e),t===null)throw Error(ie(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var a=o.alternate;if(a===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return Jg(o),e;if(a===r)return Jg(o),t;a=a.sibling}throw Error(ie(188))}if(n.return!==r.return)n=o,r=a;else{for(var l=!1,u=o.child;u;){if(u===n){l=!0,n=o,r=a;break}if(u===r){l=!0,r=o,n=a;break}u=u.sibling}if(!l){for(u=a.child;u;){if(u===n){l=!0,n=a,r=o;break}if(u===r){l=!0,r=a,n=o;break}u=u.sibling}if(!l)throw Error(ie(189))}}if(n.alternate!==r)throw Error(ie(190))}if(n.tag!==3)throw Error(ie(188));return n.stateNode.current===n?e:t}function A_(e){return e=QS(e),e!==null?M_(e):null}function M_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=M_(e);if(t!==null)return t;e=e.sibling}return null}var R_=fn.unstable_scheduleCallback,Xg=fn.unstable_cancelCallback,JS=fn.unstable_shouldYield,XS=fn.unstable_requestPaint,st=fn.unstable_now,eC=fn.unstable_getCurrentPriorityLevel,cp=fn.unstable_ImmediatePriority,O_=fn.unstable_UserBlockingPriority,vu=fn.unstable_NormalPriority,tC=fn.unstable_LowPriority,B_=fn.unstable_IdlePriority,rc=null,er=null;function nC(e){if(er&&typeof er.onCommitFiberRoot=="function")try{er.onCommitFiberRoot(rc,e,void 0,(e.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:oC,rC=Math.log,iC=Math.LN2;function oC(e){return e>>>=0,e===0?32:31-(rC(e)/iC|0)|0}var Cl=64,El=4194304;function Pa(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function yu(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,a=e.pingedLanes,l=n&268435455;if(l!==0){var u=l&~o;u!==0?r=Pa(u):(a&=l,a!==0&&(r=Pa(a)))}else l=n&~o,l!==0?r=Pa(l):a!==0&&(r=Pa(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,a=t&-t,o>=a||o===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-zn(t),o=1<<n,r|=e[n],t&=~o;return r}function aC(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sC(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-zn(a),u=1<<l,c=o[l];c===-1?(!(u&n)||u&r)&&(o[l]=aC(u,t)):c<=t&&(e.expiredLanes|=u),a&=~u}}function qf(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function j_(){var e=Cl;return Cl<<=1,!(Cl&4194240)&&(Cl=64),e}function Id(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ds(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zn(t),e[t]=n}function lC(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-zn(n),a=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~a}}function dp(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-zn(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Fe=0;function z_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var F_,fp,U_,$_,H_,Yf=!1,Pl=[],jr=null,zr=null,Fr=null,Ya=new Map,Qa=new Map,Tr=[],uC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ev(e,t){switch(e){case"focusin":case"focusout":jr=null;break;case"dragenter":case"dragleave":zr=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":Ya.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qa.delete(t.pointerId)}}function pa(e,t,n,r,o,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},t!==null&&(t=As(t),t!==null&&fp(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function cC(e,t,n,r,o){switch(t){case"focusin":return jr=pa(jr,e,t,n,r,o),!0;case"dragenter":return zr=pa(zr,e,t,n,r,o),!0;case"mouseover":return Fr=pa(Fr,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return Ya.set(a,pa(Ya.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,Qa.set(a,pa(Qa.get(a)||null,e,t,n,r,o)),!0}return!1}function Z_(e){var t=_i(e.target);if(t!==null){var n=Fi(t);if(n!==null){if(t=n.tag,t===13){if(t=L_(n),t!==null){e.blockedOn=t,H_(e.priority,function(){U_(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Gf=r,n.target.dispatchEvent(r),Gf=null}else return t=As(n),t!==null&&fp(t),e.blockedOn=n,!1;t.shift()}return!0}function tv(e,t,n){tu(e)&&n.delete(t)}function dC(){Yf=!1,jr!==null&&tu(jr)&&(jr=null),zr!==null&&tu(zr)&&(zr=null),Fr!==null&&tu(Fr)&&(Fr=null),Ya.forEach(tv),Qa.forEach(tv)}function ma(e,t){e.blockedOn===t&&(e.blockedOn=null,Yf||(Yf=!0,fn.unstable_scheduleCallback(fn.unstable_NormalPriority,dC)))}function Ja(e){function t(o){return ma(o,e)}if(0<Pl.length){ma(Pl[0],e);for(var n=1;n<Pl.length;n++){var r=Pl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(jr!==null&&ma(jr,e),zr!==null&&ma(zr,e),Fr!==null&&ma(Fr,e),Ya.forEach(t),Qa.forEach(t),n=0;n<Tr.length;n++)r=Tr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Tr.length&&(n=Tr[0],n.blockedOn===null);)Z_(n),n.blockedOn===null&&Tr.shift()}var wo=Cr.ReactCurrentBatchConfig,_u=!0;function fC(e,t,n,r){var o=Fe,a=wo.transition;wo.transition=null;try{Fe=1,hp(e,t,n,r)}finally{Fe=o,wo.transition=a}}function hC(e,t,n,r){var o=Fe,a=wo.transition;wo.transition=null;try{Fe=4,hp(e,t,n,r)}finally{Fe=o,wo.transition=a}}function hp(e,t,n,r){if(_u){var o=Qf(e,t,n,r);if(o===null)zd(e,t,r,wu,n),ev(e,r);else if(cC(o,e,t,n,r))r.stopPropagation();else if(ev(e,r),t&4&&-1<uC.indexOf(e)){for(;o!==null;){var a=As(o);if(a!==null&&F_(a),a=Qf(e,t,n,r),a===null&&zd(e,t,r,wu,n),a===o)break;o=a}o!==null&&r.stopPropagation()}else zd(e,t,r,null,n)}}var wu=null;function Qf(e,t,n,r){if(wu=null,e=up(r),e=_i(e),e!==null)if(t=Fi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=L_(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return wu=e,null}function G_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eC()){case cp:return 1;case O_:return 4;case vu:case tC:return 16;case B_:return 536870912;default:return 16}default:return 16}}var Mr=null,pp=null,nu=null;function W_(){if(nu)return nu;var e,t=pp,n=t.length,r,o="value"in Mr?Mr.value:Mr.textContent,a=o.length;for(e=0;e<n&&t[e]===o[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===o[a-r];r++);return nu=o.slice(e,1<r?1-r:void 0)}function ru(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Nl(){return!0}function nv(){return!1}function pn(e){function t(n,r,o,a,l){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(a):a[u]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Nl:nv,this.isPropagationStopped=nv,this}return et(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nl)},persist:function(){},isPersistent:Nl}),t}var Ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mp=pn(Ho),Ls=et({},Ho,{view:0,detail:0}),pC=pn(Ls),Td,Dd,ga,ic=et({},Ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gp,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ga&&(ga&&e.type==="mousemove"?(Td=e.screenX-ga.screenX,Dd=e.screenY-ga.screenY):Dd=Td=0,ga=e),Td)},movementY:function(e){return"movementY"in e?e.movementY:Dd}}),rv=pn(ic),mC=et({},ic,{dataTransfer:0}),gC=pn(mC),vC=et({},Ls,{relatedTarget:0}),Ld=pn(vC),yC=et({},Ho,{animationName:0,elapsedTime:0,pseudoElement:0}),_C=pn(yC),wC=et({},Ho,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xC=pn(wC),bC=et({},Ho,{data:0}),iv=pn(bC),SC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PC(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=EC[e])?!!t[e]:!1}function gp(){return PC}var NC=et({},Ls,{key:function(e){if(e.key){var t=SC[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ru(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?CC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gp,charCode:function(e){return e.type==="keypress"?ru(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ru(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),kC=pn(NC),IC=et({},ic,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ov=pn(IC),TC=et({},Ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gp}),DC=pn(TC),LC=et({},Ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),AC=pn(LC),MC=et({},ic,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),RC=pn(MC),OC=[9,13,27,32],vp=wr&&"CompositionEvent"in window,Aa=null;wr&&"documentMode"in document&&(Aa=document.documentMode);var BC=wr&&"TextEvent"in window&&!Aa,V_=wr&&(!vp||Aa&&8<Aa&&11>=Aa),av=" ",sv=!1;function K_(e,t){switch(e){case"keyup":return OC.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function q_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var io=!1;function jC(e,t){switch(e){case"compositionend":return q_(t);case"keypress":return t.which!==32?null:(sv=!0,av);case"textInput":return e=t.data,e===av&&sv?null:e;default:return null}}function zC(e,t){if(io)return e==="compositionend"||!vp&&K_(e,t)?(e=W_(),nu=pp=Mr=null,io=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return V_&&t.locale!=="ko"?null:t.data;default:return null}}var FC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!FC[e.type]:t==="textarea"}function Y_(e,t,n,r){N_(r),t=xu(t,"onChange"),0<t.length&&(n=new mp("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ma=null,Xa=null;function UC(e){s1(e,0)}function oc(e){var t=so(e);if(w_(t))return e}function $C(e,t){if(e==="change")return t}var Q_=!1;if(wr){var Ad;if(wr){var Md="oninput"in document;if(!Md){var uv=document.createElement("div");uv.setAttribute("oninput","return;"),Md=typeof uv.oninput=="function"}Ad=Md}else Ad=!1;Q_=Ad&&(!document.documentMode||9<document.documentMode)}function cv(){Ma&&(Ma.detachEvent("onpropertychange",J_),Xa=Ma=null)}function J_(e){if(e.propertyName==="value"&&oc(Xa)){var t=[];Y_(t,Xa,e,up(e)),D_(UC,t)}}function HC(e,t,n){e==="focusin"?(cv(),Ma=t,Xa=n,Ma.attachEvent("onpropertychange",J_)):e==="focusout"&&cv()}function ZC(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return oc(Xa)}function GC(e,t){if(e==="click")return oc(t)}function WC(e,t){if(e==="input"||e==="change")return oc(t)}function VC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Un=typeof Object.is=="function"?Object.is:VC;function es(e,t){if(Un(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Af.call(t,o)||!Un(e[o],t[o]))return!1}return!0}function dv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fv(e,t){var n=dv(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dv(n)}}function X_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?X_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function e1(){for(var e=window,t=pu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=pu(e.document)}return t}function yp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function KC(e){var t=e1(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&X_(n.ownerDocument.documentElement,n)){if(r!==null&&yp(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,a=Math.min(r.start,o);r=r.end===void 0?a:Math.min(r.end,o),!e.extend&&a>r&&(o=r,r=a,a=o),o=fv(n,a);var l=fv(n,r);o&&l&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var qC=wr&&"documentMode"in document&&11>=document.documentMode,oo=null,Jf=null,Ra=null,Xf=!1;function hv(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xf||oo==null||oo!==pu(r)||(r=oo,"selectionStart"in r&&yp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ra&&es(Ra,r)||(Ra=r,r=xu(Jf,"onSelect"),0<r.length&&(t=new mp("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=oo)))}function kl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ao={animationend:kl("Animation","AnimationEnd"),animationiteration:kl("Animation","AnimationIteration"),animationstart:kl("Animation","AnimationStart"),transitionend:kl("Transition","TransitionEnd")},Rd={},t1={};wr&&(t1=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function ac(e){if(Rd[e])return Rd[e];if(!ao[e])return e;var t=ao[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in t1)return Rd[e]=t[n];return e}var n1=ac("animationend"),r1=ac("animationiteration"),i1=ac("animationstart"),o1=ac("transitionend"),a1=new Map,pv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(e,t){a1.set(e,t),zi(t,[e])}for(var Od=0;Od<pv.length;Od++){var Bd=pv[Od],YC=Bd.toLowerCase(),QC=Bd[0].toUpperCase()+Bd.slice(1);ni(YC,"on"+QC)}ni(n1,"onAnimationEnd");ni(r1,"onAnimationIteration");ni(i1,"onAnimationStart");ni("dblclick","onDoubleClick");ni("focusin","onFocus");ni("focusout","onBlur");ni(o1,"onTransitionEnd");Eo("onMouseEnter",["mouseout","mouseover"]);Eo("onMouseLeave",["mouseout","mouseover"]);Eo("onPointerEnter",["pointerout","pointerover"]);Eo("onPointerLeave",["pointerout","pointerover"]);zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zi("onBeforeInput",["compositionend","keypress","textInput","paste"]);zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Na));function mv(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,YS(r,t,void 0,e),e.currentTarget=null}function s1(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var l=r.length-1;0<=l;l--){var u=r[l],c=u.instance,f=u.currentTarget;if(u=u.listener,c!==a&&o.isPropagationStopped())break e;mv(o,u,f),a=c}else for(l=0;l<r.length;l++){if(u=r[l],c=u.instance,f=u.currentTarget,u=u.listener,c!==a&&o.isPropagationStopped())break e;mv(o,u,f),a=c}}}if(gu)throw e=Kf,gu=!1,Kf=null,e}function We(e,t){var n=t[ih];n===void 0&&(n=t[ih]=new Set);var r=e+"__bubble";n.has(r)||(l1(t,e,2,!1),n.add(r))}function jd(e,t,n){var r=0;t&&(r|=4),l1(n,e,r,t)}var Il="_reactListening"+Math.random().toString(36).slice(2);function ts(e){if(!e[Il]){e[Il]=!0,m_.forEach(function(n){n!=="selectionchange"&&(JC.has(n)||jd(n,!1,e),jd(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Il]||(t[Il]=!0,jd("selectionchange",!1,t))}}function l1(e,t,n,r){switch(G_(t)){case 1:var o=fC;break;case 4:o=hC;break;default:o=hp}n=o.bind(null,t,n,e),o=void 0,!Vf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function zd(e,t,n,r,o){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var u=r.stateNode.containerInfo;if(u===o||u.nodeType===8&&u.parentNode===o)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;l=l.return}for(;u!==null;){if(l=_i(u),l===null)return;if(c=l.tag,c===5||c===6){r=a=l;continue e}u=u.parentNode}}r=r.return}D_(function(){var f=a,h=up(n),g=[];e:{var p=a1.get(e);if(p!==void 0){var y=mp,w=e;switch(e){case"keypress":if(ru(n)===0)break e;case"keydown":case"keyup":y=kC;break;case"focusin":w="focus",y=Ld;break;case"focusout":w="blur",y=Ld;break;case"beforeblur":case"afterblur":y=Ld;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=rv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=gC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=DC;break;case n1:case r1:case i1:y=_C;break;case o1:y=AC;break;case"scroll":y=pC;break;case"wheel":y=RC;break;case"copy":case"cut":case"paste":y=xC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=ov}var E=(t&4)!==0,N=!E&&e==="scroll",b=E?p!==null?p+"Capture":null:p;E=[];for(var x=f,S;x!==null;){S=x;var C=S.stateNode;if(S.tag===5&&C!==null&&(S=C,b!==null&&(C=qa(x,b),C!=null&&E.push(ns(x,C,S)))),N)break;x=x.return}0<E.length&&(p=new y(p,w,null,n,h),g.push({event:p,listeners:E}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",p&&n!==Gf&&(w=n.relatedTarget||n.fromElement)&&(_i(w)||w[xr]))break e;if((y||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,y?(w=n.relatedTarget||n.toElement,y=f,w=w?_i(w):null,w!==null&&(N=Fi(w),w!==N||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=f),y!==w)){if(E=rv,C="onMouseLeave",b="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(E=ov,C="onPointerLeave",b="onPointerEnter",x="pointer"),N=y==null?p:so(y),S=w==null?p:so(w),p=new E(C,x+"leave",y,n,h),p.target=N,p.relatedTarget=S,C=null,_i(h)===f&&(E=new E(b,x+"enter",w,n,h),E.target=S,E.relatedTarget=N,C=E),N=C,y&&w)t:{for(E=y,b=w,x=0,S=E;S;S=Ji(S))x++;for(S=0,C=b;C;C=Ji(C))S++;for(;0<x-S;)E=Ji(E),x--;for(;0<S-x;)b=Ji(b),S--;for(;x--;){if(E===b||b!==null&&E===b.alternate)break t;E=Ji(E),b=Ji(b)}E=null}else E=null;y!==null&&gv(g,p,y,E,!1),w!==null&&N!==null&&gv(g,N,w,E,!0)}}e:{if(p=f?so(f):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var D=$C;else if(lv(p))if(Q_)D=WC;else{D=ZC;var A=HC}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=GC);if(D&&(D=D(e,f))){Y_(g,D,n,h);break e}A&&A(e,p,f),e==="focusout"&&(A=p._wrapperState)&&A.controlled&&p.type==="number"&&Ff(p,"number",p.value)}switch(A=f?so(f):window,e){case"focusin":(lv(A)||A.contentEditable==="true")&&(oo=A,Jf=f,Ra=null);break;case"focusout":Ra=Jf=oo=null;break;case"mousedown":Xf=!0;break;case"contextmenu":case"mouseup":case"dragend":Xf=!1,hv(g,n,h);break;case"selectionchange":if(qC)break;case"keydown":case"keyup":hv(g,n,h)}var M;if(vp)e:{switch(e){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else io?K_(e,n)&&(U="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(U="onCompositionStart");U&&(V_&&n.locale!=="ko"&&(io||U!=="onCompositionStart"?U==="onCompositionEnd"&&io&&(M=W_()):(Mr=h,pp="value"in Mr?Mr.value:Mr.textContent,io=!0)),A=xu(f,U),0<A.length&&(U=new iv(U,e,null,n,h),g.push({event:U,listeners:A}),M?U.data=M:(M=q_(n),M!==null&&(U.data=M)))),(M=BC?jC(e,n):zC(e,n))&&(f=xu(f,"onBeforeInput"),0<f.length&&(h=new iv("onBeforeInput","beforeinput",null,n,h),g.push({event:h,listeners:f}),h.data=M))}s1(g,t)})}function ns(e,t,n){return{instance:e,listener:t,currentTarget:n}}function xu(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,a=o.stateNode;o.tag===5&&a!==null&&(o=a,a=qa(e,n),a!=null&&r.unshift(ns(e,a,o)),a=qa(e,t),a!=null&&r.push(ns(e,a,o))),e=e.return}return r}function Ji(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function gv(e,t,n,r,o){for(var a=t._reactName,l=[];n!==null&&n!==r;){var u=n,c=u.alternate,f=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&f!==null&&(u=f,o?(c=qa(n,a),c!=null&&l.unshift(ns(n,c,u))):o||(c=qa(n,a),c!=null&&l.push(ns(n,c,u)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var XC=/\r\n?/g,eE=/\u0000|\uFFFD/g;function vv(e){return(typeof e=="string"?e:""+e).replace(XC,`
`).replace(eE,"")}function Tl(e,t,n){if(t=vv(t),vv(e)!==t&&n)throw Error(ie(425))}function bu(){}var eh=null,th=null;function nh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rh=typeof setTimeout=="function"?setTimeout:void 0,tE=typeof clearTimeout=="function"?clearTimeout:void 0,yv=typeof Promise=="function"?Promise:void 0,nE=typeof queueMicrotask=="function"?queueMicrotask:typeof yv<"u"?function(e){return yv.resolve(null).then(e).catch(rE)}:rh;function rE(e){setTimeout(function(){throw e})}function Fd(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),Ja(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Ja(t)}function Ur(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function _v(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Zo=Math.random().toString(36).slice(2),Jn="__reactFiber$"+Zo,rs="__reactProps$"+Zo,xr="__reactContainer$"+Zo,ih="__reactEvents$"+Zo,iE="__reactListeners$"+Zo,oE="__reactHandles$"+Zo;function _i(e){var t=e[Jn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[xr]||n[Jn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=_v(e);e!==null;){if(n=e[Jn])return n;e=_v(e)}return t}e=n,n=e.parentNode}return null}function As(e){return e=e[Jn]||e[xr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function so(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ie(33))}function sc(e){return e[rs]||null}var oh=[],lo=-1;function ri(e){return{current:e}}function Ve(e){0>lo||(e.current=oh[lo],oh[lo]=null,lo--)}function Ge(e,t){lo++,oh[lo]=e.current,e.current=t}var Xr={},Rt=ri(Xr),Xt=ri(!1),ki=Xr;function Po(e,t){var n=e.type.contextTypes;if(!n)return Xr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},a;for(a in n)o[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function en(e){return e=e.childContextTypes,e!=null}function Su(){Ve(Xt),Ve(Rt)}function wv(e,t,n){if(Rt.current!==Xr)throw Error(ie(168));Ge(Rt,t),Ge(Xt,n)}function u1(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(ie(108,HS(e)||"Unknown",o));return et({},n,r)}function Cu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xr,ki=Rt.current,Ge(Rt,e),Ge(Xt,Xt.current),!0}function xv(e,t,n){var r=e.stateNode;if(!r)throw Error(ie(169));n?(e=u1(e,t,ki),r.__reactInternalMemoizedMergedChildContext=e,Ve(Xt),Ve(Rt),Ge(Rt,e)):Ve(Xt),Ge(Xt,n)}var pr=null,lc=!1,Ud=!1;function c1(e){pr===null?pr=[e]:pr.push(e)}function aE(e){lc=!0,c1(e)}function ii(){if(!Ud&&pr!==null){Ud=!0;var e=0,t=Fe;try{var n=pr;for(Fe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}pr=null,lc=!1}catch(o){throw pr!==null&&(pr=pr.slice(e+1)),R_(cp,ii),o}finally{Fe=t,Ud=!1}}return null}var uo=[],co=0,Eu=null,Pu=0,xn=[],bn=0,Ii=null,vr=1,yr="";function gi(e,t){uo[co++]=Pu,uo[co++]=Eu,Eu=e,Pu=t}function d1(e,t,n){xn[bn++]=vr,xn[bn++]=yr,xn[bn++]=Ii,Ii=e;var r=vr;e=yr;var o=32-zn(r)-1;r&=~(1<<o),n+=1;var a=32-zn(t)+o;if(30<a){var l=o-o%5;a=(r&(1<<l)-1).toString(32),r>>=l,o-=l,vr=1<<32-zn(t)+o|n<<o|r,yr=a+e}else vr=1<<a|n<<o|r,yr=e}function _p(e){e.return!==null&&(gi(e,1),d1(e,1,0))}function wp(e){for(;e===Eu;)Eu=uo[--co],uo[co]=null,Pu=uo[--co],uo[co]=null;for(;e===Ii;)Ii=xn[--bn],xn[bn]=null,yr=xn[--bn],xn[bn]=null,vr=xn[--bn],xn[bn]=null}var un=null,an=null,Ye=!1,Bn=null;function f1(e,t){var n=Cn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function bv(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,un=e,an=Ur(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,un=e,an=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ii!==null?{id:vr,overflow:yr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Cn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,un=e,an=null,!0):!1;default:return!1}}function ah(e){return(e.mode&1)!==0&&(e.flags&128)===0}function sh(e){if(Ye){var t=an;if(t){var n=t;if(!bv(e,t)){if(ah(e))throw Error(ie(418));t=Ur(n.nextSibling);var r=un;t&&bv(e,t)?f1(r,n):(e.flags=e.flags&-4097|2,Ye=!1,un=e)}}else{if(ah(e))throw Error(ie(418));e.flags=e.flags&-4097|2,Ye=!1,un=e}}}function Sv(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;un=e}function Dl(e){if(e!==un)return!1;if(!Ye)return Sv(e),Ye=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!nh(e.type,e.memoizedProps)),t&&(t=an)){if(ah(e))throw h1(),Error(ie(418));for(;t;)f1(e,t),t=Ur(t.nextSibling)}if(Sv(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ie(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){an=Ur(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}an=null}}else an=un?Ur(e.stateNode.nextSibling):null;return!0}function h1(){for(var e=an;e;)e=Ur(e.nextSibling)}function No(){an=un=null,Ye=!1}function xp(e){Bn===null?Bn=[e]:Bn.push(e)}var sE=Cr.ReactCurrentBatchConfig;function va(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ie(309));var r=n.stateNode}if(!r)throw Error(ie(147,e));var o=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var u=o.refs;l===null?delete u[a]:u[a]=l},t._stringRef=a,t)}if(typeof e!="string")throw Error(ie(284));if(!n._owner)throw Error(ie(290,e))}return e}function Ll(e,t){throw e=Object.prototype.toString.call(t),Error(ie(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Cv(e){var t=e._init;return t(e._payload)}function p1(e){function t(b,x){if(e){var S=b.deletions;S===null?(b.deletions=[x],b.flags|=16):S.push(x)}}function n(b,x){if(!e)return null;for(;x!==null;)t(b,x),x=x.sibling;return null}function r(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function o(b,x){return b=Gr(b,x),b.index=0,b.sibling=null,b}function a(b,x,S){return b.index=S,e?(S=b.alternate,S!==null?(S=S.index,S<x?(b.flags|=2,x):S):(b.flags|=2,x)):(b.flags|=1048576,x)}function l(b){return e&&b.alternate===null&&(b.flags|=2),b}function u(b,x,S,C){return x===null||x.tag!==6?(x=Kd(S,b.mode,C),x.return=b,x):(x=o(x,S),x.return=b,x)}function c(b,x,S,C){var D=S.type;return D===ro?h(b,x,S.props.children,C,S.key):x!==null&&(x.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===kr&&Cv(D)===x.type)?(C=o(x,S.props),C.ref=va(b,x,S),C.return=b,C):(C=cu(S.type,S.key,S.props,null,b.mode,C),C.ref=va(b,x,S),C.return=b,C)}function f(b,x,S,C){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=qd(S,b.mode,C),x.return=b,x):(x=o(x,S.children||[]),x.return=b,x)}function h(b,x,S,C,D){return x===null||x.tag!==7?(x=Pi(S,b.mode,C,D),x.return=b,x):(x=o(x,S),x.return=b,x)}function g(b,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Kd(""+x,b.mode,S),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case xl:return S=cu(x.type,x.key,x.props,null,b.mode,S),S.ref=va(b,null,x),S.return=b,S;case no:return x=qd(x,b.mode,S),x.return=b,x;case kr:var C=x._init;return g(b,C(x._payload),S)}if(Ea(x)||fa(x))return x=Pi(x,b.mode,S,null),x.return=b,x;Ll(b,x)}return null}function p(b,x,S,C){var D=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return D!==null?null:u(b,x,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case xl:return S.key===D?c(b,x,S,C):null;case no:return S.key===D?f(b,x,S,C):null;case kr:return D=S._init,p(b,x,D(S._payload),C)}if(Ea(S)||fa(S))return D!==null?null:h(b,x,S,C,null);Ll(b,S)}return null}function y(b,x,S,C,D){if(typeof C=="string"&&C!==""||typeof C=="number")return b=b.get(S)||null,u(x,b,""+C,D);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case xl:return b=b.get(C.key===null?S:C.key)||null,c(x,b,C,D);case no:return b=b.get(C.key===null?S:C.key)||null,f(x,b,C,D);case kr:var A=C._init;return y(b,x,S,A(C._payload),D)}if(Ea(C)||fa(C))return b=b.get(S)||null,h(x,b,C,D,null);Ll(x,C)}return null}function w(b,x,S,C){for(var D=null,A=null,M=x,U=x=0,I=null;M!==null&&U<S.length;U++){M.index>U?(I=M,M=null):I=M.sibling;var T=p(b,M,S[U],C);if(T===null){M===null&&(M=I);break}e&&M&&T.alternate===null&&t(b,M),x=a(T,x,U),A===null?D=T:A.sibling=T,A=T,M=I}if(U===S.length)return n(b,M),Ye&&gi(b,U),D;if(M===null){for(;U<S.length;U++)M=g(b,S[U],C),M!==null&&(x=a(M,x,U),A===null?D=M:A.sibling=M,A=M);return Ye&&gi(b,U),D}for(M=r(b,M);U<S.length;U++)I=y(M,b,U,S[U],C),I!==null&&(e&&I.alternate!==null&&M.delete(I.key===null?U:I.key),x=a(I,x,U),A===null?D=I:A.sibling=I,A=I);return e&&M.forEach(function(R){return t(b,R)}),Ye&&gi(b,U),D}function E(b,x,S,C){var D=fa(S);if(typeof D!="function")throw Error(ie(150));if(S=D.call(S),S==null)throw Error(ie(151));for(var A=D=null,M=x,U=x=0,I=null,T=S.next();M!==null&&!T.done;U++,T=S.next()){M.index>U?(I=M,M=null):I=M.sibling;var R=p(b,M,T.value,C);if(R===null){M===null&&(M=I);break}e&&M&&R.alternate===null&&t(b,M),x=a(R,x,U),A===null?D=R:A.sibling=R,A=R,M=I}if(T.done)return n(b,M),Ye&&gi(b,U),D;if(M===null){for(;!T.done;U++,T=S.next())T=g(b,T.value,C),T!==null&&(x=a(T,x,U),A===null?D=T:A.sibling=T,A=T);return Ye&&gi(b,U),D}for(M=r(b,M);!T.done;U++,T=S.next())T=y(M,b,U,T.value,C),T!==null&&(e&&T.alternate!==null&&M.delete(T.key===null?U:T.key),x=a(T,x,U),A===null?D=T:A.sibling=T,A=T);return e&&M.forEach(function(V){return t(b,V)}),Ye&&gi(b,U),D}function N(b,x,S,C){if(typeof S=="object"&&S!==null&&S.type===ro&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case xl:e:{for(var D=S.key,A=x;A!==null;){if(A.key===D){if(D=S.type,D===ro){if(A.tag===7){n(b,A.sibling),x=o(A,S.props.children),x.return=b,b=x;break e}}else if(A.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===kr&&Cv(D)===A.type){n(b,A.sibling),x=o(A,S.props),x.ref=va(b,A,S),x.return=b,b=x;break e}n(b,A);break}else t(b,A);A=A.sibling}S.type===ro?(x=Pi(S.props.children,b.mode,C,S.key),x.return=b,b=x):(C=cu(S.type,S.key,S.props,null,b.mode,C),C.ref=va(b,x,S),C.return=b,b=C)}return l(b);case no:e:{for(A=S.key;x!==null;){if(x.key===A)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){n(b,x.sibling),x=o(x,S.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else t(b,x);x=x.sibling}x=qd(S,b.mode,C),x.return=b,b=x}return l(b);case kr:return A=S._init,N(b,x,A(S._payload),C)}if(Ea(S))return w(b,x,S,C);if(fa(S))return E(b,x,S,C);Ll(b,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(n(b,x.sibling),x=o(x,S),x.return=b,b=x):(n(b,x),x=Kd(S,b.mode,C),x.return=b,b=x),l(b)):n(b,x)}return N}var ko=p1(!0),m1=p1(!1),Nu=ri(null),ku=null,fo=null,bp=null;function Sp(){bp=fo=ku=null}function Cp(e){var t=Nu.current;Ve(Nu),e._currentValue=t}function lh(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xo(e,t){ku=e,bp=fo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Qt=!0),e.firstContext=null)}function kn(e){var t=e._currentValue;if(bp!==e)if(e={context:e,memoizedValue:t,next:null},fo===null){if(ku===null)throw Error(ie(308));fo=e,ku.dependencies={lanes:0,firstContext:e}}else fo=fo.next=e;return t}var wi=null;function Ep(e){wi===null?wi=[e]:wi.push(e)}function g1(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Ep(t)):(n.next=o.next,o.next=n),t.interleaved=n,br(e,r)}function br(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ir=!1;function Pp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function v1(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _r(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $r(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Re&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,br(e,n)}return o=r.interleaved,o===null?(t.next=t,Ep(r)):(t.next=o.next,o.next=t),r.interleaved=t,br(e,n)}function iu(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,dp(e,n)}}function Ev(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?o=a=l:a=a.next=l,n=n.next}while(n!==null);a===null?o=a=t:a=a.next=t}else o=a=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Iu(e,t,n,r){var o=e.updateQueue;Ir=!1;var a=o.firstBaseUpdate,l=o.lastBaseUpdate,u=o.shared.pending;if(u!==null){o.shared.pending=null;var c=u,f=c.next;c.next=null,l===null?a=f:l.next=f,l=c;var h=e.alternate;h!==null&&(h=h.updateQueue,u=h.lastBaseUpdate,u!==l&&(u===null?h.firstBaseUpdate=f:u.next=f,h.lastBaseUpdate=c))}if(a!==null){var g=o.baseState;l=0,h=f=c=null,u=a;do{var p=u.lane,y=u.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:y,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var w=e,E=u;switch(p=t,y=n,E.tag){case 1:if(w=E.payload,typeof w=="function"){g=w.call(y,g,p);break e}g=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=E.payload,p=typeof w=="function"?w.call(y,g,p):w,p==null)break e;g=et({},g,p);break e;case 2:Ir=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,p=o.effects,p===null?o.effects=[u]:p.push(u))}else y={eventTime:y,lane:p,tag:u.tag,payload:u.payload,callback:u.callback,next:null},h===null?(f=h=y,c=g):h=h.next=y,l|=p;if(u=u.next,u===null){if(u=o.shared.pending,u===null)break;p=u,u=p.next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}while(!0);if(h===null&&(c=g),o.baseState=c,o.firstBaseUpdate=f,o.lastBaseUpdate=h,t=o.shared.interleaved,t!==null){o=t;do l|=o.lane,o=o.next;while(o!==t)}else a===null&&(o.shared.lanes=0);Di|=l,e.lanes=l,e.memoizedState=g}}function Pv(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(ie(191,o));o.call(r)}}}var Ms={},tr=ri(Ms),is=ri(Ms),os=ri(Ms);function xi(e){if(e===Ms)throw Error(ie(174));return e}function Np(e,t){switch(Ge(os,t),Ge(is,e),Ge(tr,Ms),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$f(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=$f(t,e)}Ve(tr),Ge(tr,t)}function Io(){Ve(tr),Ve(is),Ve(os)}function y1(e){xi(os.current);var t=xi(tr.current),n=$f(t,e.type);t!==n&&(Ge(is,e),Ge(tr,n))}function kp(e){is.current===e&&(Ve(tr),Ve(is))}var Je=ri(0);function Tu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var $d=[];function Ip(){for(var e=0;e<$d.length;e++)$d[e]._workInProgressVersionPrimary=null;$d.length=0}var ou=Cr.ReactCurrentDispatcher,Hd=Cr.ReactCurrentBatchConfig,Ti=0,Xe=null,ht=null,vt=null,Du=!1,Oa=!1,as=0,lE=0;function Lt(){throw Error(ie(321))}function Tp(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Un(e[n],t[n]))return!1;return!0}function Dp(e,t,n,r,o,a){if(Ti=a,Xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ou.current=e===null||e.memoizedState===null?fE:hE,e=n(r,o),Oa){a=0;do{if(Oa=!1,as=0,25<=a)throw Error(ie(301));a+=1,vt=ht=null,t.updateQueue=null,ou.current=pE,e=n(r,o)}while(Oa)}if(ou.current=Lu,t=ht!==null&&ht.next!==null,Ti=0,vt=ht=Xe=null,Du=!1,t)throw Error(ie(300));return e}function Lp(){var e=as!==0;return as=0,e}function Qn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Xe.memoizedState=vt=e:vt=vt.next=e,vt}function In(){if(ht===null){var e=Xe.alternate;e=e!==null?e.memoizedState:null}else e=ht.next;var t=vt===null?Xe.memoizedState:vt.next;if(t!==null)vt=t,ht=e;else{if(e===null)throw Error(ie(310));ht=e,e={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},vt===null?Xe.memoizedState=vt=e:vt=vt.next=e}return vt}function ss(e,t){return typeof t=="function"?t(e):t}function Zd(e){var t=In(),n=t.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=e;var r=ht,o=r.baseQueue,a=n.pending;if(a!==null){if(o!==null){var l=o.next;o.next=a.next,a.next=l}r.baseQueue=o=a,n.pending=null}if(o!==null){a=o.next,r=r.baseState;var u=l=null,c=null,f=a;do{var h=f.lane;if((Ti&h)===h)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var g={lane:h,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(u=c=g,l=r):c=c.next=g,Xe.lanes|=h,Di|=h}f=f.next}while(f!==null&&f!==a);c===null?l=r:c.next=u,Un(r,t.memoizedState)||(Qt=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do a=o.lane,Xe.lanes|=a,Di|=a,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Gd(e){var t=In(),n=t.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(o!==null){n.pending=null;var l=o=o.next;do a=e(a,l.action),l=l.next;while(l!==o);Un(a,t.memoizedState)||(Qt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function _1(){}function w1(e,t){var n=Xe,r=In(),o=t(),a=!Un(r.memoizedState,o);if(a&&(r.memoizedState=o,Qt=!0),r=r.queue,Ap(S1.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||vt!==null&&vt.memoizedState.tag&1){if(n.flags|=2048,ls(9,b1.bind(null,n,r,o,t),void 0,null),yt===null)throw Error(ie(349));Ti&30||x1(n,t,o)}return o}function x1(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function b1(e,t,n,r){t.value=n,t.getSnapshot=r,C1(t)&&E1(e)}function S1(e,t,n){return n(function(){C1(t)&&E1(e)})}function C1(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Un(e,n)}catch{return!0}}function E1(e){var t=br(e,1);t!==null&&Fn(t,e,1,-1)}function Nv(e){var t=Qn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:e},t.queue=e,e=e.dispatch=dE.bind(null,Xe,e),[t.memoizedState,e]}function ls(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function P1(){return In().memoizedState}function au(e,t,n,r){var o=Qn();Xe.flags|=e,o.memoizedState=ls(1|t,n,void 0,r===void 0?null:r)}function uc(e,t,n,r){var o=In();r=r===void 0?null:r;var a=void 0;if(ht!==null){var l=ht.memoizedState;if(a=l.destroy,r!==null&&Tp(r,l.deps)){o.memoizedState=ls(t,n,a,r);return}}Xe.flags|=e,o.memoizedState=ls(1|t,n,a,r)}function kv(e,t){return au(8390656,8,e,t)}function Ap(e,t){return uc(2048,8,e,t)}function N1(e,t){return uc(4,2,e,t)}function k1(e,t){return uc(4,4,e,t)}function I1(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function T1(e,t,n){return n=n!=null?n.concat([e]):null,uc(4,4,I1.bind(null,t,e),n)}function Mp(){}function D1(e,t){var n=In();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Tp(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function L1(e,t){var n=In();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Tp(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function A1(e,t,n){return Ti&21?(Un(n,t)||(n=j_(),Xe.lanes|=n,Di|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Qt=!0),e.memoizedState=n)}function uE(e,t){var n=Fe;Fe=n!==0&&4>n?n:4,e(!0);var r=Hd.transition;Hd.transition={};try{e(!1),t()}finally{Fe=n,Hd.transition=r}}function M1(){return In().memoizedState}function cE(e,t,n){var r=Zr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},R1(e))O1(t,n);else if(n=g1(e,t,n,r),n!==null){var o=Ht();Fn(n,e,r,o),B1(n,t,r)}}function dE(e,t,n){var r=Zr(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(R1(e))O1(t,o);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,u=a(l,n);if(o.hasEagerState=!0,o.eagerState=u,Un(u,l)){var c=t.interleaved;c===null?(o.next=o,Ep(t)):(o.next=c.next,c.next=o),t.interleaved=o;return}}catch{}finally{}n=g1(e,t,o,r),n!==null&&(o=Ht(),Fn(n,e,r,o),B1(n,t,r))}}function R1(e){var t=e.alternate;return e===Xe||t!==null&&t===Xe}function O1(e,t){Oa=Du=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function B1(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,dp(e,n)}}var Lu={readContext:kn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},fE={readContext:kn,useCallback:function(e,t){return Qn().memoizedState=[e,t===void 0?null:t],e},useContext:kn,useEffect:kv,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,au(4194308,4,I1.bind(null,t,e),n)},useLayoutEffect:function(e,t){return au(4194308,4,e,t)},useInsertionEffect:function(e,t){return au(4,2,e,t)},useMemo:function(e,t){var n=Qn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Qn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=cE.bind(null,Xe,e),[r.memoizedState,e]},useRef:function(e){var t=Qn();return e={current:e},t.memoizedState=e},useState:Nv,useDebugValue:Mp,useDeferredValue:function(e){return Qn().memoizedState=e},useTransition:function(){var e=Nv(!1),t=e[0];return e=uE.bind(null,e[1]),Qn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Xe,o=Qn();if(Ye){if(n===void 0)throw Error(ie(407));n=n()}else{if(n=t(),yt===null)throw Error(ie(349));Ti&30||x1(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,kv(S1.bind(null,r,a,e),[e]),r.flags|=2048,ls(9,b1.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Qn(),t=yt.identifierPrefix;if(Ye){var n=yr,r=vr;n=(r&~(1<<32-zn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=as++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=lE++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},hE={readContext:kn,useCallback:D1,useContext:kn,useEffect:Ap,useImperativeHandle:T1,useInsertionEffect:N1,useLayoutEffect:k1,useMemo:L1,useReducer:Zd,useRef:P1,useState:function(){return Zd(ss)},useDebugValue:Mp,useDeferredValue:function(e){var t=In();return A1(t,ht.memoizedState,e)},useTransition:function(){var e=Zd(ss)[0],t=In().memoizedState;return[e,t]},useMutableSource:_1,useSyncExternalStore:w1,useId:M1,unstable_isNewReconciler:!1},pE={readContext:kn,useCallback:D1,useContext:kn,useEffect:Ap,useImperativeHandle:T1,useInsertionEffect:N1,useLayoutEffect:k1,useMemo:L1,useReducer:Gd,useRef:P1,useState:function(){return Gd(ss)},useDebugValue:Mp,useDeferredValue:function(e){var t=In();return ht===null?t.memoizedState=e:A1(t,ht.memoizedState,e)},useTransition:function(){var e=Gd(ss)[0],t=In().memoizedState;return[e,t]},useMutableSource:_1,useSyncExternalStore:w1,useId:M1,unstable_isNewReconciler:!1};function Rn(e,t){if(e&&e.defaultProps){t=et({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function uh(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:et({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var cc={isMounted:function(e){return(e=e._reactInternals)?Fi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ht(),o=Zr(e),a=_r(r,o);a.payload=t,n!=null&&(a.callback=n),t=$r(e,a,o),t!==null&&(Fn(t,e,o,r),iu(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ht(),o=Zr(e),a=_r(r,o);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=$r(e,a,o),t!==null&&(Fn(t,e,o,r),iu(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ht(),r=Zr(e),o=_r(n,r);o.tag=2,t!=null&&(o.callback=t),t=$r(e,o,r),t!==null&&(Fn(t,e,r,n),iu(t,e,r))}};function Iv(e,t,n,r,o,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,l):t.prototype&&t.prototype.isPureReactComponent?!es(n,r)||!es(o,a):!0}function j1(e,t,n){var r=!1,o=Xr,a=t.contextType;return typeof a=="object"&&a!==null?a=kn(a):(o=en(t)?ki:Rt.current,r=t.contextTypes,a=(r=r!=null)?Po(e,o):Xr),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=cc,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function Tv(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&cc.enqueueReplaceState(t,t.state,null)}function ch(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Pp(e);var a=t.contextType;typeof a=="object"&&a!==null?o.context=kn(a):(a=en(t)?ki:Rt.current,o.context=Po(e,a)),o.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(uh(e,t,a,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&cc.enqueueReplaceState(o,o.state,null),Iu(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function To(e,t){try{var n="",r=t;do n+=$S(r),r=r.return;while(r);var o=n}catch(a){o=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:o,digest:null}}function Wd(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function dh(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var mE=typeof WeakMap=="function"?WeakMap:Map;function z1(e,t,n){n=_r(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Mu||(Mu=!0,xh=r),dh(e,t)},n}function F1(e,t,n){n=_r(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){dh(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){dh(e,t),typeof r!="function"&&(Hr===null?Hr=new Set([this]):Hr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function Dv(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new mE;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=IE.bind(null,e,t,n),t.then(e,e))}function Lv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Av(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=_r(-1,1),t.tag=2,$r(n,t,1))),n.lanes|=1),e)}var gE=Cr.ReactCurrentOwner,Qt=!1;function Ut(e,t,n,r){t.child=e===null?m1(t,null,n,r):ko(t,e.child,n,r)}function Mv(e,t,n,r,o){n=n.render;var a=t.ref;return xo(t,o),r=Dp(e,t,n,r,a,o),n=Lp(),e!==null&&!Qt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Sr(e,t,o)):(Ye&&n&&_p(t),t.flags|=1,Ut(e,t,r,o),t.child)}function Rv(e,t,n,r,o){if(e===null){var a=n.type;return typeof a=="function"&&!$p(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,U1(e,t,a,r,o)):(e=cu(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&o)){var l=a.memoizedProps;if(n=n.compare,n=n!==null?n:es,n(l,r)&&e.ref===t.ref)return Sr(e,t,o)}return t.flags|=1,e=Gr(a,r),e.ref=t.ref,e.return=t,t.child=e}function U1(e,t,n,r,o){if(e!==null){var a=e.memoizedProps;if(es(a,r)&&e.ref===t.ref)if(Qt=!1,t.pendingProps=r=a,(e.lanes&o)!==0)e.flags&131072&&(Qt=!0);else return t.lanes=e.lanes,Sr(e,t,o)}return fh(e,t,n,r,o)}function $1(e,t,n){var r=t.pendingProps,o=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(po,on),on|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ge(po,on),on|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Ge(po,on),on|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ge(po,on),on|=r;return Ut(e,t,o,n),t.child}function H1(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function fh(e,t,n,r,o){var a=en(n)?ki:Rt.current;return a=Po(t,a),xo(t,o),n=Dp(e,t,n,r,a,o),r=Lp(),e!==null&&!Qt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Sr(e,t,o)):(Ye&&r&&_p(t),t.flags|=1,Ut(e,t,n,o),t.child)}function Ov(e,t,n,r,o){if(en(n)){var a=!0;Cu(t)}else a=!1;if(xo(t,o),t.stateNode===null)su(e,t),j1(t,n,r),ch(t,n,r,o),r=!0;else if(e===null){var l=t.stateNode,u=t.memoizedProps;l.props=u;var c=l.context,f=n.contextType;typeof f=="object"&&f!==null?f=kn(f):(f=en(n)?ki:Rt.current,f=Po(t,f));var h=n.getDerivedStateFromProps,g=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function";g||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==r||c!==f)&&Tv(t,l,r,f),Ir=!1;var p=t.memoizedState;l.state=p,Iu(t,r,l,o),c=t.memoizedState,u!==r||p!==c||Xt.current||Ir?(typeof h=="function"&&(uh(t,n,h,r),c=t.memoizedState),(u=Ir||Iv(t,n,u,r,p,c,f))?(g||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),l.props=r,l.state=c,l.context=f,r=u):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,v1(e,t),u=t.memoizedProps,f=t.type===t.elementType?u:Rn(t.type,u),l.props=f,g=t.pendingProps,p=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=kn(c):(c=en(n)?ki:Rt.current,c=Po(t,c));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==g||p!==c)&&Tv(t,l,r,c),Ir=!1,p=t.memoizedState,l.state=p,Iu(t,r,l,o);var w=t.memoizedState;u!==g||p!==w||Xt.current||Ir?(typeof y=="function"&&(uh(t,n,y,r),w=t.memoizedState),(f=Ir||Iv(t,n,f,r,p,w,c)||!1)?(h||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,w,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,w,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),l.props=r,l.state=w,l.context=c,r=f):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return hh(e,t,n,r,a,o)}function hh(e,t,n,r,o,a){H1(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return o&&xv(t,n,!1),Sr(e,t,a);r=t.stateNode,gE.current=t;var u=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=ko(t,e.child,null,a),t.child=ko(t,null,u,a)):Ut(e,t,u,a),t.memoizedState=r.state,o&&xv(t,n,!0),t.child}function Z1(e){var t=e.stateNode;t.pendingContext?wv(e,t.pendingContext,t.pendingContext!==t.context):t.context&&wv(e,t.context,!1),Np(e,t.containerInfo)}function Bv(e,t,n,r,o){return No(),xp(o),t.flags|=256,Ut(e,t,n,r),t.child}var ph={dehydrated:null,treeContext:null,retryLane:0};function mh(e){return{baseLanes:e,cachePool:null,transitions:null}}function G1(e,t,n){var r=t.pendingProps,o=Je.current,a=!1,l=(t.flags&128)!==0,u;if((u=l)||(u=e!==null&&e.memoizedState===null?!1:(o&2)!==0),u?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Ge(Je,o&1),e===null)return sh(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=hc(l,r,0,null),e=Pi(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=mh(n),t.memoizedState=ph,e):Rp(t,l));if(o=e.memoizedState,o!==null&&(u=o.dehydrated,u!==null))return vE(e,t,l,r,u,o,n);if(a){a=r.fallback,l=t.mode,o=e.child,u=o.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Gr(o,c),r.subtreeFlags=o.subtreeFlags&14680064),u!==null?a=Gr(u,a):(a=Pi(a,l,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=e.child.memoizedState,l=l===null?mh(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=ph,r}return a=e.child,e=a.sibling,r=Gr(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Rp(e,t){return t=hc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Al(e,t,n,r){return r!==null&&xp(r),ko(t,e.child,null,n),e=Rp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function vE(e,t,n,r,o,a,l){if(n)return t.flags&256?(t.flags&=-257,r=Wd(Error(ie(422))),Al(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=hc({mode:"visible",children:r.children},o,0,null),a=Pi(a,o,l,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&ko(t,e.child,null,l),t.child.memoizedState=mh(l),t.memoizedState=ph,a);if(!(t.mode&1))return Al(e,t,l,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var u=r.dgst;return r=u,a=Error(ie(419)),r=Wd(a,r,void 0),Al(e,t,l,r)}if(u=(l&e.childLanes)!==0,Qt||u){if(r=yt,r!==null){switch(l&-l){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|l)?0:o,o!==0&&o!==a.retryLane&&(a.retryLane=o,br(e,o),Fn(r,e,o,-1))}return Up(),r=Wd(Error(ie(421))),Al(e,t,l,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=TE.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,an=Ur(o.nextSibling),un=t,Ye=!0,Bn=null,e!==null&&(xn[bn++]=vr,xn[bn++]=yr,xn[bn++]=Ii,vr=e.id,yr=e.overflow,Ii=t),t=Rp(t,r.children),t.flags|=4096,t)}function jv(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),lh(e.return,t,n)}function Vd(e,t,n,r,o){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o)}function W1(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(Ut(e,t,r.children,n),r=Je.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jv(e,n,t);else if(e.tag===19)jv(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ge(Je,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Tu(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Vd(t,!1,o,n,a);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Tu(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Vd(t,!0,n,null,a);break;case"together":Vd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function su(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Sr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Di|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ie(153));if(t.child!==null){for(e=t.child,n=Gr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Gr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function yE(e,t,n){switch(t.tag){case 3:Z1(t),No();break;case 5:y1(t);break;case 1:en(t.type)&&Cu(t);break;case 4:Np(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Ge(Nu,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ge(Je,Je.current&1),t.flags|=128,null):n&t.child.childLanes?G1(e,t,n):(Ge(Je,Je.current&1),e=Sr(e,t,n),e!==null?e.sibling:null);Ge(Je,Je.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return W1(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ge(Je,Je.current),r)break;return null;case 22:case 23:return t.lanes=0,$1(e,t,n)}return Sr(e,t,n)}var V1,gh,K1,q1;V1=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gh=function(){};K1=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,xi(tr.current);var a=null;switch(n){case"input":o=jf(e,o),r=jf(e,r),a=[];break;case"select":o=et({},o,{value:void 0}),r=et({},r,{value:void 0}),a=[];break;case"textarea":o=Uf(e,o),r=Uf(e,r),a=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=bu)}Hf(n,r);var l;n=null;for(f in o)if(!r.hasOwnProperty(f)&&o.hasOwnProperty(f)&&o[f]!=null)if(f==="style"){var u=o[f];for(l in u)u.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Va.hasOwnProperty(f)?a||(a=[]):(a=a||[]).push(f,null));for(f in r){var c=r[f];if(u=o?.[f],r.hasOwnProperty(f)&&c!==u&&(c!=null||u!=null))if(f==="style")if(u){for(l in u)!u.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&u[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(a||(a=[]),a.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(a=a||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Va.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&We("scroll",e),a||u===c||(a=[])):(a=a||[]).push(f,c))}n&&(a=a||[]).push("style",n);var f=a;(t.updateQueue=f)&&(t.flags|=4)}};q1=function(e,t,n,r){n!==r&&(t.flags|=4)};function ya(e,t){if(!Ye)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function At(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function _E(e,t,n){var r=t.pendingProps;switch(wp(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(t),null;case 1:return en(t.type)&&Su(),At(t),null;case 3:return r=t.stateNode,Io(),Ve(Xt),Ve(Rt),Ip(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Dl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Bn!==null&&(Ch(Bn),Bn=null))),gh(e,t),At(t),null;case 5:kp(t);var o=xi(os.current);if(n=t.type,e!==null&&t.stateNode!=null)K1(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ie(166));return At(t),null}if(e=xi(tr.current),Dl(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Jn]=t,r[rs]=a,e=(t.mode&1)!==0,n){case"dialog":We("cancel",r),We("close",r);break;case"iframe":case"object":case"embed":We("load",r);break;case"video":case"audio":for(o=0;o<Na.length;o++)We(Na[o],r);break;case"source":We("error",r);break;case"img":case"image":case"link":We("error",r),We("load",r);break;case"details":We("toggle",r);break;case"input":Vg(r,a),We("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},We("invalid",r);break;case"textarea":qg(r,a),We("invalid",r)}Hf(n,a),o=null;for(var l in a)if(a.hasOwnProperty(l)){var u=a[l];l==="children"?typeof u=="string"?r.textContent!==u&&(a.suppressHydrationWarning!==!0&&Tl(r.textContent,u,e),o=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(a.suppressHydrationWarning!==!0&&Tl(r.textContent,u,e),o=["children",""+u]):Va.hasOwnProperty(l)&&u!=null&&l==="onScroll"&&We("scroll",r)}switch(n){case"input":bl(r),Kg(r,a,!0);break;case"textarea":bl(r),Yg(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=bu)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=S_(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Jn]=t,e[rs]=r,V1(e,t,!1,!1),t.stateNode=e;e:{switch(l=Zf(n,r),n){case"dialog":We("cancel",e),We("close",e),o=r;break;case"iframe":case"object":case"embed":We("load",e),o=r;break;case"video":case"audio":for(o=0;o<Na.length;o++)We(Na[o],e);o=r;break;case"source":We("error",e),o=r;break;case"img":case"image":case"link":We("error",e),We("load",e),o=r;break;case"details":We("toggle",e),o=r;break;case"input":Vg(e,r),o=jf(e,r),We("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=et({},r,{value:void 0}),We("invalid",e);break;case"textarea":qg(e,r),o=Uf(e,r),We("invalid",e);break;default:o=r}Hf(n,o),u=o;for(a in u)if(u.hasOwnProperty(a)){var c=u[a];a==="style"?P_(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&C_(e,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ka(e,c):typeof c=="number"&&Ka(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Va.hasOwnProperty(a)?c!=null&&a==="onScroll"&&We("scroll",e):c!=null&&op(e,a,c,l))}switch(n){case"input":bl(e),Kg(e,r,!1);break;case"textarea":bl(e),Yg(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Jr(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?vo(e,!!r.multiple,a,!1):r.defaultValue!=null&&vo(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=bu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return At(t),null;case 6:if(e&&t.stateNode!=null)q1(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ie(166));if(n=xi(os.current),xi(tr.current),Dl(t)){if(r=t.stateNode,n=t.memoizedProps,r[Jn]=t,(a=r.nodeValue!==n)&&(e=un,e!==null))switch(e.tag){case 3:Tl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Tl(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Jn]=t,t.stateNode=r}return At(t),null;case 13:if(Ve(Je),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ye&&an!==null&&t.mode&1&&!(t.flags&128))h1(),No(),t.flags|=98560,a=!1;else if(a=Dl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(ie(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ie(317));a[Jn]=t}else No(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;At(t),a=!1}else Bn!==null&&(Ch(Bn),Bn=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Je.current&1?pt===0&&(pt=3):Up())),t.updateQueue!==null&&(t.flags|=4),At(t),null);case 4:return Io(),gh(e,t),e===null&&ts(t.stateNode.containerInfo),At(t),null;case 10:return Cp(t.type._context),At(t),null;case 17:return en(t.type)&&Su(),At(t),null;case 19:if(Ve(Je),a=t.memoizedState,a===null)return At(t),null;if(r=(t.flags&128)!==0,l=a.rendering,l===null)if(r)ya(a,!1);else{if(pt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Tu(e),l!==null){for(t.flags|=128,ya(a,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ge(Je,Je.current&1|2),t.child}e=e.sibling}a.tail!==null&&st()>Do&&(t.flags|=128,r=!0,ya(a,!1),t.lanes=4194304)}else{if(!r)if(e=Tu(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ya(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!Ye)return At(t),null}else 2*st()-a.renderingStartTime>Do&&n!==1073741824&&(t.flags|=128,r=!0,ya(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(n=a.last,n!==null?n.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=st(),t.sibling=null,n=Je.current,Ge(Je,r?n&1|2:n&1),t):(At(t),null);case 22:case 23:return Fp(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?on&1073741824&&(At(t),t.subtreeFlags&6&&(t.flags|=8192)):At(t),null;case 24:return null;case 25:return null}throw Error(ie(156,t.tag))}function wE(e,t){switch(wp(t),t.tag){case 1:return en(t.type)&&Su(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Io(),Ve(Xt),Ve(Rt),Ip(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return kp(t),null;case 13:if(Ve(Je),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ie(340));No()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ve(Je),null;case 4:return Io(),null;case 10:return Cp(t.type._context),null;case 22:case 23:return Fp(),null;case 24:return null;default:return null}}var Ml=!1,Mt=!1,xE=typeof WeakSet=="function"?WeakSet:Set,fe=null;function ho(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ot(e,t,r)}else n.current=null}function vh(e,t,n){try{n()}catch(r){ot(e,t,r)}}var zv=!1;function bE(e,t){if(eh=_u,e=e1(),yp(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var l=0,u=-1,c=-1,f=0,h=0,g=e,p=null;t:for(;;){for(var y;g!==n||o!==0&&g.nodeType!==3||(u=l+o),g!==a||r!==0&&g.nodeType!==3||(c=l+r),g.nodeType===3&&(l+=g.nodeValue.length),(y=g.firstChild)!==null;)p=g,g=y;for(;;){if(g===e)break t;if(p===n&&++f===o&&(u=l),p===a&&++h===r&&(c=l),(y=g.nextSibling)!==null)break;g=p,p=g.parentNode}g=y}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(th={focusedElem:e,selectionRange:n},_u=!1,fe=t;fe!==null;)if(t=fe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,fe=e;else for(;fe!==null;){t=fe;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var E=w.memoizedProps,N=w.memoizedState,b=t.stateNode,x=b.getSnapshotBeforeUpdate(t.elementType===t.type?E:Rn(t.type,E),N);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(C){ot(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,fe=e;break}fe=t.return}return w=zv,zv=!1,w}function Ba(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,a!==void 0&&vh(t,n,a)}o=o.next}while(o!==r)}}function dc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function yh(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Y1(e){var t=e.alternate;t!==null&&(e.alternate=null,Y1(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Jn],delete t[rs],delete t[ih],delete t[iE],delete t[oE])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Q1(e){return e.tag===5||e.tag===3||e.tag===4}function Fv(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Q1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _h(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=bu));else if(r!==4&&(e=e.child,e!==null))for(_h(e,t,n),e=e.sibling;e!==null;)_h(e,t,n),e=e.sibling}function wh(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(wh(e,t,n),e=e.sibling;e!==null;)wh(e,t,n),e=e.sibling}var Nt=null,On=!1;function Nr(e,t,n){for(n=n.child;n!==null;)J1(e,t,n),n=n.sibling}function J1(e,t,n){if(er&&typeof er.onCommitFiberUnmount=="function")try{er.onCommitFiberUnmount(rc,n)}catch{}switch(n.tag){case 5:Mt||ho(n,t);case 6:var r=Nt,o=On;Nt=null,Nr(e,t,n),Nt=r,On=o,Nt!==null&&(On?(e=Nt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Nt.removeChild(n.stateNode));break;case 18:Nt!==null&&(On?(e=Nt,n=n.stateNode,e.nodeType===8?Fd(e.parentNode,n):e.nodeType===1&&Fd(e,n),Ja(e)):Fd(Nt,n.stateNode));break;case 4:r=Nt,o=On,Nt=n.stateNode.containerInfo,On=!0,Nr(e,t,n),Nt=r,On=o;break;case 0:case 11:case 14:case 15:if(!Mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var a=o,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&vh(n,t,l),o=o.next}while(o!==r)}Nr(e,t,n);break;case 1:if(!Mt&&(ho(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){ot(n,t,u)}Nr(e,t,n);break;case 21:Nr(e,t,n);break;case 22:n.mode&1?(Mt=(r=Mt)||n.memoizedState!==null,Nr(e,t,n),Mt=r):Nr(e,t,n);break;default:Nr(e,t,n)}}function Uv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new xE),t.forEach(function(r){var o=DE.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Mn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var a=e,l=t,u=l;e:for(;u!==null;){switch(u.tag){case 5:Nt=u.stateNode,On=!1;break e;case 3:Nt=u.stateNode.containerInfo,On=!0;break e;case 4:Nt=u.stateNode.containerInfo,On=!0;break e}u=u.return}if(Nt===null)throw Error(ie(160));J1(a,l,o),Nt=null,On=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(f){ot(o,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)X1(t,e),t=t.sibling}function X1(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mn(t,e),Vn(e),r&4){try{Ba(3,e,e.return),dc(3,e)}catch(E){ot(e,e.return,E)}try{Ba(5,e,e.return)}catch(E){ot(e,e.return,E)}}break;case 1:Mn(t,e),Vn(e),r&512&&n!==null&&ho(n,n.return);break;case 5:if(Mn(t,e),Vn(e),r&512&&n!==null&&ho(n,n.return),e.flags&32){var o=e.stateNode;try{Ka(o,"")}catch(E){ot(e,e.return,E)}}if(r&4&&(o=e.stateNode,o!=null)){var a=e.memoizedProps,l=n!==null?n.memoizedProps:a,u=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{u==="input"&&a.type==="radio"&&a.name!=null&&x_(o,a),Zf(u,l);var f=Zf(u,a);for(l=0;l<c.length;l+=2){var h=c[l],g=c[l+1];h==="style"?P_(o,g):h==="dangerouslySetInnerHTML"?C_(o,g):h==="children"?Ka(o,g):op(o,h,g,f)}switch(u){case"input":zf(o,a);break;case"textarea":b_(o,a);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var y=a.value;y!=null?vo(o,!!a.multiple,y,!1):p!==!!a.multiple&&(a.defaultValue!=null?vo(o,!!a.multiple,a.defaultValue,!0):vo(o,!!a.multiple,a.multiple?[]:"",!1))}o[rs]=a}catch(E){ot(e,e.return,E)}}break;case 6:if(Mn(t,e),Vn(e),r&4){if(e.stateNode===null)throw Error(ie(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(E){ot(e,e.return,E)}}break;case 3:if(Mn(t,e),Vn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ja(t.containerInfo)}catch(E){ot(e,e.return,E)}break;case 4:Mn(t,e),Vn(e);break;case 13:Mn(t,e),Vn(e),o=e.child,o.flags&8192&&(a=o.memoizedState!==null,o.stateNode.isHidden=a,!a||o.alternate!==null&&o.alternate.memoizedState!==null||(jp=st())),r&4&&Uv(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(Mt=(f=Mt)||h,Mn(t,e),Mt=f):Mn(t,e),Vn(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!h&&e.mode&1)for(fe=e,h=e.child;h!==null;){for(g=fe=h;fe!==null;){switch(p=fe,y=p.child,p.tag){case 0:case 11:case 14:case 15:Ba(4,p,p.return);break;case 1:ho(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(E){ot(r,n,E)}}break;case 5:ho(p,p.return);break;case 22:if(p.memoizedState!==null){Hv(g);continue}}y!==null?(y.return=p,fe=y):Hv(g)}h=h.sibling}e:for(h=null,g=e;;){if(g.tag===5){if(h===null){h=g;try{o=g.stateNode,f?(a=o.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(u=g.stateNode,c=g.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=E_("display",l))}catch(E){ot(e,e.return,E)}}}else if(g.tag===6){if(h===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(E){ot(e,e.return,E)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;h===g&&(h=null),g=g.return}h===g&&(h=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Mn(t,e),Vn(e),r&4&&Uv(e);break;case 21:break;default:Mn(t,e),Vn(e)}}function Vn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Q1(n)){var r=n;break e}n=n.return}throw Error(ie(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Ka(o,""),r.flags&=-33);var a=Fv(e);wh(e,a,o);break;case 3:case 4:var l=r.stateNode.containerInfo,u=Fv(e);_h(e,u,l);break;default:throw Error(ie(161))}}catch(c){ot(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function SE(e,t,n){fe=e,ew(e)}function ew(e,t,n){for(var r=(e.mode&1)!==0;fe!==null;){var o=fe,a=o.child;if(o.tag===22&&r){var l=o.memoizedState!==null||Ml;if(!l){var u=o.alternate,c=u!==null&&u.memoizedState!==null||Mt;u=Ml;var f=Mt;if(Ml=l,(Mt=c)&&!f)for(fe=o;fe!==null;)l=fe,c=l.child,l.tag===22&&l.memoizedState!==null?Zv(o):c!==null?(c.return=l,fe=c):Zv(o);for(;a!==null;)fe=a,ew(a),a=a.sibling;fe=o,Ml=u,Mt=f}$v(e)}else o.subtreeFlags&8772&&a!==null?(a.return=o,fe=a):$v(e)}}function $v(e){for(;fe!==null;){var t=fe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Mt||dc(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Mt)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Rn(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Pv(t,a,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Pv(t,l,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var h=f.memoizedState;if(h!==null){var g=h.dehydrated;g!==null&&Ja(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}Mt||t.flags&512&&yh(t)}catch(p){ot(t,t.return,p)}}if(t===e){fe=null;break}if(n=t.sibling,n!==null){n.return=t.return,fe=n;break}fe=t.return}}function Hv(e){for(;fe!==null;){var t=fe;if(t===e){fe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,fe=n;break}fe=t.return}}function Zv(e){for(;fe!==null;){var t=fe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{dc(4,t)}catch(c){ot(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(c){ot(t,o,c)}}var a=t.return;try{yh(t)}catch(c){ot(t,a,c)}break;case 5:var l=t.return;try{yh(t)}catch(c){ot(t,l,c)}}}catch(c){ot(t,t.return,c)}if(t===e){fe=null;break}var u=t.sibling;if(u!==null){u.return=t.return,fe=u;break}fe=t.return}}var CE=Math.ceil,Au=Cr.ReactCurrentDispatcher,Op=Cr.ReactCurrentOwner,Pn=Cr.ReactCurrentBatchConfig,Re=0,yt=null,ft=null,Tt=0,on=0,po=ri(0),pt=0,us=null,Di=0,fc=0,Bp=0,ja=null,Yt=null,jp=0,Do=1/0,hr=null,Mu=!1,xh=null,Hr=null,Rl=!1,Rr=null,Ru=0,za=0,bh=null,lu=-1,uu=0;function Ht(){return Re&6?st():lu!==-1?lu:lu=st()}function Zr(e){return e.mode&1?Re&2&&Tt!==0?Tt&-Tt:sE.transition!==null?(uu===0&&(uu=j_()),uu):(e=Fe,e!==0||(e=window.event,e=e===void 0?16:G_(e.type)),e):1}function Fn(e,t,n,r){if(50<za)throw za=0,bh=null,Error(ie(185));Ds(e,n,r),(!(Re&2)||e!==yt)&&(e===yt&&(!(Re&2)&&(fc|=n),pt===4&&Dr(e,Tt)),tn(e,r),n===1&&Re===0&&!(t.mode&1)&&(Do=st()+500,lc&&ii()))}function tn(e,t){var n=e.callbackNode;sC(e,t);var r=yu(e,e===yt?Tt:0);if(r===0)n!==null&&Xg(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Xg(n),t===1)e.tag===0?aE(Gv.bind(null,e)):c1(Gv.bind(null,e)),nE(function(){!(Re&6)&&ii()}),n=null;else{switch(z_(r)){case 1:n=cp;break;case 4:n=O_;break;case 16:n=vu;break;case 536870912:n=B_;break;default:n=vu}n=lw(n,tw.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function tw(e,t){if(lu=-1,uu=0,Re&6)throw Error(ie(327));var n=e.callbackNode;if(bo()&&e.callbackNode!==n)return null;var r=yu(e,e===yt?Tt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ou(e,r);else{t=r;var o=Re;Re|=2;var a=rw();(yt!==e||Tt!==t)&&(hr=null,Do=st()+500,Ei(e,t));do try{NE();break}catch(u){nw(e,u)}while(!0);Sp(),Au.current=a,Re=o,ft!==null?t=0:(yt=null,Tt=0,t=pt)}if(t!==0){if(t===2&&(o=qf(e),o!==0&&(r=o,t=Sh(e,o))),t===1)throw n=us,Ei(e,0),Dr(e,r),tn(e,st()),n;if(t===6)Dr(e,r);else{if(o=e.current.alternate,!(r&30)&&!EE(o)&&(t=Ou(e,r),t===2&&(a=qf(e),a!==0&&(r=a,t=Sh(e,a))),t===1))throw n=us,Ei(e,0),Dr(e,r),tn(e,st()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(ie(345));case 2:vi(e,Yt,hr);break;case 3:if(Dr(e,r),(r&130023424)===r&&(t=jp+500-st(),10<t)){if(yu(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){Ht(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=rh(vi.bind(null,e,Yt,hr),t);break}vi(e,Yt,hr);break;case 4:if(Dr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var l=31-zn(r);a=1<<l,l=t[l],l>o&&(o=l),r&=~a}if(r=o,r=st()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*CE(r/1960))-r,10<r){e.timeoutHandle=rh(vi.bind(null,e,Yt,hr),r);break}vi(e,Yt,hr);break;case 5:vi(e,Yt,hr);break;default:throw Error(ie(329))}}}return tn(e,st()),e.callbackNode===n?tw.bind(null,e):null}function Sh(e,t){var n=ja;return e.current.memoizedState.isDehydrated&&(Ei(e,t).flags|=256),e=Ou(e,t),e!==2&&(t=Yt,Yt=n,t!==null&&Ch(t)),e}function Ch(e){Yt===null?Yt=e:Yt.push.apply(Yt,e)}function EE(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],a=o.getSnapshot;o=o.value;try{if(!Un(a(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dr(e,t){for(t&=~Bp,t&=~fc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zn(t),r=1<<n;e[n]=-1,t&=~r}}function Gv(e){if(Re&6)throw Error(ie(327));bo();var t=yu(e,0);if(!(t&1))return tn(e,st()),null;var n=Ou(e,t);if(e.tag!==0&&n===2){var r=qf(e);r!==0&&(t=r,n=Sh(e,r))}if(n===1)throw n=us,Ei(e,0),Dr(e,t),tn(e,st()),n;if(n===6)throw Error(ie(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,vi(e,Yt,hr),tn(e,st()),null}function zp(e,t){var n=Re;Re|=1;try{return e(t)}finally{Re=n,Re===0&&(Do=st()+500,lc&&ii())}}function Li(e){Rr!==null&&Rr.tag===0&&!(Re&6)&&bo();var t=Re;Re|=1;var n=Pn.transition,r=Fe;try{if(Pn.transition=null,Fe=1,e)return e()}finally{Fe=r,Pn.transition=n,Re=t,!(Re&6)&&ii()}}function Fp(){on=po.current,Ve(po)}function Ei(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,tE(n)),ft!==null)for(n=ft.return;n!==null;){var r=n;switch(wp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Su();break;case 3:Io(),Ve(Xt),Ve(Rt),Ip();break;case 5:kp(r);break;case 4:Io();break;case 13:Ve(Je);break;case 19:Ve(Je);break;case 10:Cp(r.type._context);break;case 22:case 23:Fp()}n=n.return}if(yt=e,ft=e=Gr(e.current,null),Tt=on=t,pt=0,us=null,Bp=fc=Di=0,Yt=ja=null,wi!==null){for(t=0;t<wi.length;t++)if(n=wi[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,a=n.pending;if(a!==null){var l=a.next;a.next=o,r.next=l}n.pending=r}wi=null}return e}function nw(e,t){do{var n=ft;try{if(Sp(),ou.current=Lu,Du){for(var r=Xe.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Du=!1}if(Ti=0,vt=ht=Xe=null,Oa=!1,as=0,Op.current=null,n===null||n.return===null){pt=1,us=t,ft=null;break}e:{var a=e,l=n.return,u=n,c=t;if(t=Tt,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,h=u,g=h.tag;if(!(h.mode&1)&&(g===0||g===11||g===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Lv(l);if(y!==null){y.flags&=-257,Av(y,l,u,a,t),y.mode&1&&Dv(a,f,t),t=y,c=f;var w=t.updateQueue;if(w===null){var E=new Set;E.add(c),t.updateQueue=E}else w.add(c);break e}else{if(!(t&1)){Dv(a,f,t),Up();break e}c=Error(ie(426))}}else if(Ye&&u.mode&1){var N=Lv(l);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Av(N,l,u,a,t),xp(To(c,u));break e}}a=c=To(c,u),pt!==4&&(pt=2),ja===null?ja=[a]:ja.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var b=z1(a,c,t);Ev(a,b);break e;case 1:u=c;var x=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Hr===null||!Hr.has(S)))){a.flags|=65536,t&=-t,a.lanes|=t;var C=F1(a,u,t);Ev(a,C);break e}}a=a.return}while(a!==null)}ow(n)}catch(D){t=D,ft===n&&n!==null&&(ft=n=n.return);continue}break}while(!0)}function rw(){var e=Au.current;return Au.current=Lu,e===null?Lu:e}function Up(){(pt===0||pt===3||pt===2)&&(pt=4),yt===null||!(Di&268435455)&&!(fc&268435455)||Dr(yt,Tt)}function Ou(e,t){var n=Re;Re|=2;var r=rw();(yt!==e||Tt!==t)&&(hr=null,Ei(e,t));do try{PE();break}catch(o){nw(e,o)}while(!0);if(Sp(),Re=n,Au.current=r,ft!==null)throw Error(ie(261));return yt=null,Tt=0,pt}function PE(){for(;ft!==null;)iw(ft)}function NE(){for(;ft!==null&&!JS();)iw(ft)}function iw(e){var t=sw(e.alternate,e,on);e.memoizedProps=e.pendingProps,t===null?ow(e):ft=t,Op.current=null}function ow(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=wE(n,t),n!==null){n.flags&=32767,ft=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{pt=6,ft=null;return}}else if(n=_E(n,t,on),n!==null){ft=n;return}if(t=t.sibling,t!==null){ft=t;return}ft=t=e}while(t!==null);pt===0&&(pt=5)}function vi(e,t,n){var r=Fe,o=Pn.transition;try{Pn.transition=null,Fe=1,kE(e,t,n,r)}finally{Pn.transition=o,Fe=r}return null}function kE(e,t,n,r){do bo();while(Rr!==null);if(Re&6)throw Error(ie(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ie(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(lC(e,a),e===yt&&(ft=yt=null,Tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Rl||(Rl=!0,lw(vu,function(){return bo(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Pn.transition,Pn.transition=null;var l=Fe;Fe=1;var u=Re;Re|=4,Op.current=null,bE(e,n),X1(n,e),KC(th),_u=!!eh,th=eh=null,e.current=n,SE(n),XS(),Re=u,Fe=l,Pn.transition=a}else e.current=n;if(Rl&&(Rl=!1,Rr=e,Ru=o),a=e.pendingLanes,a===0&&(Hr=null),nC(n.stateNode),tn(e,st()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Mu)throw Mu=!1,e=xh,xh=null,e;return Ru&1&&e.tag!==0&&bo(),a=e.pendingLanes,a&1?e===bh?za++:(za=0,bh=e):za=0,ii(),null}function bo(){if(Rr!==null){var e=z_(Ru),t=Pn.transition,n=Fe;try{if(Pn.transition=null,Fe=16>e?16:e,Rr===null)var r=!1;else{if(e=Rr,Rr=null,Ru=0,Re&6)throw Error(ie(331));var o=Re;for(Re|=4,fe=e.current;fe!==null;){var a=fe,l=a.child;if(fe.flags&16){var u=a.deletions;if(u!==null){for(var c=0;c<u.length;c++){var f=u[c];for(fe=f;fe!==null;){var h=fe;switch(h.tag){case 0:case 11:case 15:Ba(8,h,a)}var g=h.child;if(g!==null)g.return=h,fe=g;else for(;fe!==null;){h=fe;var p=h.sibling,y=h.return;if(Y1(h),h===f){fe=null;break}if(p!==null){p.return=y,fe=p;break}fe=y}}}var w=a.alternate;if(w!==null){var E=w.child;if(E!==null){w.child=null;do{var N=E.sibling;E.sibling=null,E=N}while(E!==null)}}fe=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,fe=l;else e:for(;fe!==null;){if(a=fe,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ba(9,a,a.return)}var b=a.sibling;if(b!==null){b.return=a.return,fe=b;break e}fe=a.return}}var x=e.current;for(fe=x;fe!==null;){l=fe;var S=l.child;if(l.subtreeFlags&2064&&S!==null)S.return=l,fe=S;else e:for(l=x;fe!==null;){if(u=fe,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:dc(9,u)}}catch(D){ot(u,u.return,D)}if(u===l){fe=null;break e}var C=u.sibling;if(C!==null){C.return=u.return,fe=C;break e}fe=u.return}}if(Re=o,ii(),er&&typeof er.onPostCommitFiberRoot=="function")try{er.onPostCommitFiberRoot(rc,e)}catch{}r=!0}return r}finally{Fe=n,Pn.transition=t}}return!1}function Wv(e,t,n){t=To(n,t),t=z1(e,t,1),e=$r(e,t,1),t=Ht(),e!==null&&(Ds(e,1,t),tn(e,t))}function ot(e,t,n){if(e.tag===3)Wv(e,e,n);else for(;t!==null;){if(t.tag===3){Wv(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Hr===null||!Hr.has(r))){e=To(n,e),e=F1(t,e,1),t=$r(t,e,1),e=Ht(),t!==null&&(Ds(t,1,e),tn(t,e));break}}t=t.return}}function IE(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ht(),e.pingedLanes|=e.suspendedLanes&n,yt===e&&(Tt&n)===n&&(pt===4||pt===3&&(Tt&130023424)===Tt&&500>st()-jp?Ei(e,0):Bp|=n),tn(e,t)}function aw(e,t){t===0&&(e.mode&1?(t=El,El<<=1,!(El&130023424)&&(El=4194304)):t=1);var n=Ht();e=br(e,t),e!==null&&(Ds(e,t,n),tn(e,n))}function TE(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),aw(e,n)}function DE(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ie(314))}r!==null&&r.delete(t),aw(e,n)}var sw;sw=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Xt.current)Qt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Qt=!1,yE(e,t,n);Qt=!!(e.flags&131072)}else Qt=!1,Ye&&t.flags&1048576&&d1(t,Pu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;su(e,t),e=t.pendingProps;var o=Po(t,Rt.current);xo(t,n),o=Dp(null,t,r,e,o,n);var a=Lp();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,en(r)?(a=!0,Cu(t)):a=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Pp(t),o.updater=cc,t.stateNode=o,o._reactInternals=t,ch(t,r,e,n),t=hh(null,t,r,!0,a,n)):(t.tag=0,Ye&&a&&_p(t),Ut(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(su(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=AE(r),e=Rn(r,e),o){case 0:t=fh(null,t,r,e,n);break e;case 1:t=Ov(null,t,r,e,n);break e;case 11:t=Mv(null,t,r,e,n);break e;case 14:t=Rv(null,t,r,Rn(r.type,e),n);break e}throw Error(ie(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Rn(r,o),fh(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Rn(r,o),Ov(e,t,r,o,n);case 3:e:{if(Z1(t),e===null)throw Error(ie(387));r=t.pendingProps,a=t.memoizedState,o=a.element,v1(e,t),Iu(t,r,null,n);var l=t.memoizedState;if(r=l.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){o=To(Error(ie(423)),t),t=Bv(e,t,r,n,o);break e}else if(r!==o){o=To(Error(ie(424)),t),t=Bv(e,t,r,n,o);break e}else for(an=Ur(t.stateNode.containerInfo.firstChild),un=t,Ye=!0,Bn=null,n=m1(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(No(),r===o){t=Sr(e,t,n);break e}Ut(e,t,r,n)}t=t.child}return t;case 5:return y1(t),e===null&&sh(t),r=t.type,o=t.pendingProps,a=e!==null?e.memoizedProps:null,l=o.children,nh(r,o)?l=null:a!==null&&nh(r,a)&&(t.flags|=32),H1(e,t),Ut(e,t,l,n),t.child;case 6:return e===null&&sh(t),null;case 13:return G1(e,t,n);case 4:return Np(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ko(t,null,r,n):Ut(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Rn(r,o),Mv(e,t,r,o,n);case 7:return Ut(e,t,t.pendingProps,n),t.child;case 8:return Ut(e,t,t.pendingProps.children,n),t.child;case 12:return Ut(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,a=t.memoizedProps,l=o.value,Ge(Nu,r._currentValue),r._currentValue=l,a!==null)if(Un(a.value,l)){if(a.children===o.children&&!Xt.current){t=Sr(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var u=a.dependencies;if(u!==null){l=a.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=_r(-1,n&-n),c.tag=2;var f=a.updateQueue;if(f!==null){f=f.shared;var h=f.pending;h===null?c.next=c:(c.next=h.next,h.next=c),f.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),lh(a.return,n,t),u.lanes|=n;break}c=c.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(ie(341));l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),lh(l,n,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}Ut(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,xo(t,n),o=kn(o),r=r(o),t.flags|=1,Ut(e,t,r,n),t.child;case 14:return r=t.type,o=Rn(r,t.pendingProps),o=Rn(r.type,o),Rv(e,t,r,o,n);case 15:return U1(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Rn(r,o),su(e,t),t.tag=1,en(r)?(e=!0,Cu(t)):e=!1,xo(t,n),j1(t,r,o),ch(t,r,o,n),hh(null,t,r,!0,e,n);case 19:return W1(e,t,n);case 22:return $1(e,t,n)}throw Error(ie(156,t.tag))};function lw(e,t){return R_(e,t)}function LE(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(e,t,n,r){return new LE(e,t,n,r)}function $p(e){return e=e.prototype,!(!e||!e.isReactComponent)}function AE(e){if(typeof e=="function")return $p(e)?1:0;if(e!=null){if(e=e.$$typeof,e===sp)return 11;if(e===lp)return 14}return 2}function Gr(e,t){var n=e.alternate;return n===null?(n=Cn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function cu(e,t,n,r,o,a){var l=2;if(r=e,typeof e=="function")$p(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case ro:return Pi(n.children,o,a,t);case ap:l=8,o|=8;break;case Mf:return e=Cn(12,n,t,o|2),e.elementType=Mf,e.lanes=a,e;case Rf:return e=Cn(13,n,t,o),e.elementType=Rf,e.lanes=a,e;case Of:return e=Cn(19,n,t,o),e.elementType=Of,e.lanes=a,e;case y_:return hc(n,o,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case g_:l=10;break e;case v_:l=9;break e;case sp:l=11;break e;case lp:l=14;break e;case kr:l=16,r=null;break e}throw Error(ie(130,e==null?e:typeof e,""))}return t=Cn(l,n,t,o),t.elementType=e,t.type=r,t.lanes=a,t}function Pi(e,t,n,r){return e=Cn(7,e,r,t),e.lanes=n,e}function hc(e,t,n,r){return e=Cn(22,e,r,t),e.elementType=y_,e.lanes=n,e.stateNode={isHidden:!1},e}function Kd(e,t,n){return e=Cn(6,e,null,t),e.lanes=n,e}function qd(e,t,n){return t=Cn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ME(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Id(0),this.expirationTimes=Id(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Id(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Hp(e,t,n,r,o,a,l,u,c){return e=new ME(e,t,n,u,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Cn(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pp(a),e}function RE(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:no,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function uw(e){if(!e)return Xr;e=e._reactInternals;e:{if(Fi(e)!==e||e.tag!==1)throw Error(ie(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(en(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ie(171))}if(e.tag===1){var n=e.type;if(en(n))return u1(e,n,t)}return t}function cw(e,t,n,r,o,a,l,u,c){return e=Hp(n,r,!0,e,o,a,l,u,c),e.context=uw(null),n=e.current,r=Ht(),o=Zr(n),a=_r(r,o),a.callback=t??null,$r(n,a,o),e.current.lanes=o,Ds(e,o,r),tn(e,r),e}function pc(e,t,n,r){var o=t.current,a=Ht(),l=Zr(o);return n=uw(n),t.context===null?t.context=n:t.pendingContext=n,t=_r(a,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=$r(o,t,l),e!==null&&(Fn(e,o,l,a),iu(e,o,l)),l}function Bu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Vv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Zp(e,t){Vv(e,t),(e=e.alternate)&&Vv(e,t)}function OE(){return null}var dw=typeof reportError=="function"?reportError:function(e){console.error(e)};function Gp(e){this._internalRoot=e}mc.prototype.render=Gp.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ie(409));pc(e,t,null,null)};mc.prototype.unmount=Gp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Li(function(){pc(null,e,null,null)}),t[xr]=null}};function mc(e){this._internalRoot=e}mc.prototype.unstable_scheduleHydration=function(e){if(e){var t=$_();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Tr.length&&t!==0&&t<Tr[n].priority;n++);Tr.splice(n,0,e),n===0&&Z_(e)}};function Wp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function gc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Kv(){}function BE(e,t,n,r,o){if(o){if(typeof r=="function"){var a=r;r=function(){var f=Bu(l);a.call(f)}}var l=cw(t,r,e,0,null,!1,!1,"",Kv);return e._reactRootContainer=l,e[xr]=l.current,ts(e.nodeType===8?e.parentNode:e),Li(),l}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var u=r;r=function(){var f=Bu(c);u.call(f)}}var c=Hp(e,0,!1,null,null,!1,!1,"",Kv);return e._reactRootContainer=c,e[xr]=c.current,ts(e.nodeType===8?e.parentNode:e),Li(function(){pc(t,c,n,r)}),c}function vc(e,t,n,r,o){var a=n._reactRootContainer;if(a){var l=a;if(typeof o=="function"){var u=o;o=function(){var c=Bu(l);u.call(c)}}pc(t,l,e,o)}else l=BE(n,t,e,o,r);return Bu(l)}F_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Pa(t.pendingLanes);n!==0&&(dp(t,n|1),tn(t,st()),!(Re&6)&&(Do=st()+500,ii()))}break;case 13:Li(function(){var r=br(e,1);if(r!==null){var o=Ht();Fn(r,e,1,o)}}),Zp(e,1)}};fp=function(e){if(e.tag===13){var t=br(e,134217728);if(t!==null){var n=Ht();Fn(t,e,134217728,n)}Zp(e,134217728)}};U_=function(e){if(e.tag===13){var t=Zr(e),n=br(e,t);if(n!==null){var r=Ht();Fn(n,e,t,r)}Zp(e,t)}};$_=function(){return Fe};H_=function(e,t){var n=Fe;try{return Fe=e,t()}finally{Fe=n}};Wf=function(e,t,n){switch(t){case"input":if(zf(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=sc(r);if(!o)throw Error(ie(90));w_(r),zf(r,o)}}}break;case"textarea":b_(e,n);break;case"select":t=n.value,t!=null&&vo(e,!!n.multiple,t,!1)}};I_=zp;T_=Li;var jE={usingClientEntryPoint:!1,Events:[As,so,sc,N_,k_,zp]},_a={findFiberByHostInstance:_i,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zE={bundleType:_a.bundleType,version:_a.version,rendererPackageName:_a.rendererPackageName,rendererConfig:_a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=A_(e),e===null?null:e.stateNode},findFiberByHostInstance:_a.findFiberByHostInstance||OE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ol=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ol.isDisabled&&Ol.supportsFiber)try{rc=Ol.inject(zE),er=Ol}catch{}}hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jE;hn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wp(t))throw Error(ie(200));return RE(e,t,null,n)};hn.createRoot=function(e,t){if(!Wp(e))throw Error(ie(299));var n=!1,r="",o=dw;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Hp(e,1,!1,null,null,n,!1,r,o),e[xr]=t.current,ts(e.nodeType===8?e.parentNode:e),new Gp(t)};hn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ie(188)):(e=Object.keys(e).join(","),Error(ie(268,e)));return e=A_(t),e=e===null?null:e.stateNode,e};hn.flushSync=function(e){return Li(e)};hn.hydrate=function(e,t,n){if(!gc(t))throw Error(ie(200));return vc(null,e,t,!0,n)};hn.hydrateRoot=function(e,t,n){if(!Wp(e))throw Error(ie(405));var r=n!=null&&n.hydratedSources||null,o=!1,a="",l=dw;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=cw(t,null,e,1,n??null,o,!1,a,l),e[xr]=t.current,ts(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new mc(t)};hn.render=function(e,t,n){if(!gc(t))throw Error(ie(200));return vc(null,e,t,!1,n)};hn.unmountComponentAtNode=function(e){if(!gc(e))throw Error(ie(40));return e._reactRootContainer?(Li(function(){vc(null,null,e,!1,function(){e._reactRootContainer=null,e[xr]=null})}),!0):!1};hn.unstable_batchedUpdates=zp;hn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!gc(n))throw Error(ie(200));if(e==null||e._reactInternals===void 0)throw Error(ie(38));return vc(e,t,n,!1,r)};hn.version="18.3.1-next-f1338f8080-20240426";function fw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fw)}catch(e){console.error(e)}}fw(),f_.exports=hn;var Vp=f_.exports;const FE=Uo(Vp);var qv=Vp;Lf.createRoot=qv.createRoot,Lf.hydrateRoot=qv.hydrateRoot;const Eh=(e,t)=>t.some(n=>e instanceof n);let Yv,Qv;function UE(){return Yv||(Yv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $E(){return Qv||(Qv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ph=new WeakMap,Yd=new WeakMap,yc=new WeakMap;function HE(e){const t=new Promise((n,r)=>{const o=()=>{e.removeEventListener("success",a),e.removeEventListener("error",l)},a=()=>{n(Ni(e.result)),o()},l=()=>{r(e.error),o()};e.addEventListener("success",a),e.addEventListener("error",l)});return yc.set(t,e),t}function ZE(e){if(Ph.has(e))return;const t=new Promise((n,r)=>{const o=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",l),e.removeEventListener("abort",l)},a=()=>{n(),o()},l=()=>{r(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",a),e.addEventListener("error",l),e.addEventListener("abort",l)});Ph.set(e,t)}let Nh={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Ph.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ni(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function hw(e){Nh=e(Nh)}function GE(e){return $E().includes(e)?function(...t){return e.apply(kh(this),t),Ni(this.request)}:function(...t){return Ni(e.apply(kh(this),t))}}function WE(e){return typeof e=="function"?GE(e):(e instanceof IDBTransaction&&ZE(e),Eh(e,UE())?new Proxy(e,Nh):e)}function Ni(e){if(e instanceof IDBRequest)return HE(e);if(Yd.has(e))return Yd.get(e);const t=WE(e);return t!==e&&(Yd.set(e,t),yc.set(t,e)),t}const kh=e=>yc.get(e);function pw(e,t,{blocked:n,upgrade:r,blocking:o,terminated:a}={}){const l=indexedDB.open(e,t),u=Ni(l);return r&&l.addEventListener("upgradeneeded",c=>{r(Ni(l.result),c.oldVersion,c.newVersion,Ni(l.transaction),c)}),n&&l.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{a&&c.addEventListener("close",()=>a()),o&&c.addEventListener("versionchange",f=>o(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const VE=["get","getKey","getAll","getAllKeys","count"],KE=["put","add","delete","clear"],Qd=new Map;function Jv(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Qd.get(t))return Qd.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=KE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||VE.includes(n)))return;const a=async function(l,...u){const c=this.transaction(l,o?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),o&&c.done]))[0]};return Qd.set(t,a),a}hw(e=>({...e,get:(t,n,r)=>Jv(t,n)||e.get(t,n,r),has:(t,n)=>!!Jv(t,n)||e.has(t,n)}));const qE=["continue","continuePrimaryKey","advance"],Xv={},Ih=new WeakMap,mw=new WeakMap,YE={get(e,t){if(!qE.includes(t))return e[t];let n=Xv[t];return n||(n=Xv[t]=function(...r){Ih.set(this,mw.get(this)[t](...r))}),n}};async function*QE(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,YE);for(mw.set(n,t),yc.set(n,kh(t));t;)yield n,t=await(Ih.get(n)||t.continue()),Ih.delete(n)}function e0(e,t){return t===Symbol.asyncIterator&&Eh(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&Eh(e,[IDBIndex,IDBObjectStore])}hw(e=>({...e,get(t,n,r){return e0(t,n)?QE:e.get(t,n,r)},has(t,n){return e0(t,n)||e.has(t,n)}}));const JE="postal_snap_db",XE=2,cs="images",t0="metadata";let Bl=null;const Kp=async()=>Bl||(Bl=await pw(JE,XE,{upgrade(e,t,n,r){if(console.log(`Upgrading DB from version ${t} to ${n}`),t<1&&(e.objectStoreNames.contains(cs)||e.createObjectStore(cs),!e.objectStoreNames.contains(t0))){const o=e.createObjectStore(t0,{keyPath:"filename"});o.createIndex("dateTaken","date_taken"),o.createIndex("location",["location.lat","location.lon"]),o.createIndex("tags","tags",{multiEntry:!0})}}}),Bl),So=async(e,t)=>{await(await Kp()).put(cs,t,e)},nr=async e=>(await Kp()).get(cs,e),gw=async e=>{await(await Kp()).delete(cs,e)},eP="postal_snap_db",tP=2,n0="images",ju="app_data",r0="metadata";let jl=null;const vw=async()=>jl||(jl=await pw(eP,tP,{upgrade(e,t,n){if(e.objectStoreNames.contains(n0)||e.createObjectStore(n0),e.objectStoreNames.contains(ju)||e.createObjectStore(ju),!e.objectStoreNames.contains(r0)){const r=e.createObjectStore(r0,{keyPath:"filename"});r.createIndex("dateTaken","date_taken"),r.createIndex("location",["location.lat","location.lon"]),r.createIndex("tags","tags",{multiEntry:!0})}}}),jl),mo=async e=>{const t=await vw(),n=await Lr(),r=new Set([...(n.items||[]).map(a=>a.image),...(n.groups||[]).flatMap(a=>(a.photos||[]).map(l=>l.image))].filter(Boolean)),o=new Set([...(e.items||[]).map(a=>a.image),...(e.groups||[]).flatMap(a=>(a.photos||[]).map(l=>l.image))].filter(Boolean));for(const a of r)if(!o.has(a))try{await gw(a)}catch(l){console.error(`Failed to delete orphaned image ${a}:`,l)}await t.put(ju,e,"storage_data")};async function Lr(){try{const t=await(await vw()).get(ju,"storage_data");return t||{items:[],groups:[],tags:[]}}catch(e){return console.error("データの読み込みに失敗しました:",e),{items:[],groups:[],tags:[]}}}const du=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),nP=()=>localStorage.getItem("app_icon"),rP=()=>{const e=localStorage.getItem("app_icon");e&&(URL.revokeObjectURL(e),localStorage.removeItem("app_icon"))},iP=()=>{const[e,t]=j.useState([]),[n,r]=j.useState([]),o=j.useCallback(async()=>{const E=await Lr();t(E.items||[]),r(E.groups||[])},[]);j.useEffect(()=>{o()},[o]);const a=async E=>{const N=await Lr(),b=N.items||[],x=b.findIndex(S=>S.id===E.id);x>=0?b[x]=E:b.push(E),await mo({...N,items:b}),t(b)},l=async E=>{const N=await Lr(),b=N.groups||[],x=b.findIndex(S=>S.id===E.id);x>=0?b[x]=E:b.push(E),await mo({...N,groups:b}),r(b)};return{items:e,groups:n,setItems:t,setGroups:r,saveItem:a,saveGroup:l,addItem:async E=>{await a(E)},addGroup:async E=>{await l(E)},updateItem:async(E,N)=>{const b=e.find(x=>x.id===E);b&&await a({...b,...N,updatedAt:new Date})},updateGroup:async(E,N)=>{const b=n.find(x=>x.id===E);b&&await l({...b,...N,updatedAt:new Date})},deleteItem:async E=>{const N=await Lr(),b=(N.items||[]).filter(x=>x.id!==E);await mo({...N,items:b}),t(b)},deleteGroup:async E=>{const N=await Lr(),b=(N.groups||[]).filter(x=>x.id!==E);await mo({...N,groups:b}),r(b)},getItem:E=>e.find(N=>N.id===E),getGroup:E=>n.find(N=>N.id===E)}};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var oP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Le=(e,t)=>{const n=j.forwardRef(({color:r="currentColor",size:o=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:u="",children:c,...f},h)=>j.createElement("svg",{ref:h,...oP,width:o,height:o,stroke:r,strokeWidth:l?Number(a)*24/Number(o):a,className:["lucide",`lucide-${aP(e)}`,u].join(" "),...f},[...t.map(([g,p])=>j.createElement(g,p)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=Le("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=Le("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=Le("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=Le("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=Le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=Le("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=Le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=Le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=Le("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=Le("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=Le("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=Le("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=Le("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=Le("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=Le("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=Le("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=Le("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=Le("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=Le("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=Le("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=Le("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=Le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=Le("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=Le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=Le("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=Le("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=Le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=Le("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=Le("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=Le("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=Le("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=Le("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=Le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=Le("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=Le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),yP=({isOpen:e,onClose:t,onSearch:n,isSearching:r})=>{const[o,a]=j.useState(""),[l,u]=j.useState(["ocr_text","memo","tags"]),[c,f]=j.useState(""),[h,g]=j.useState(""),[p,y]=j.useState([]),[w,E]=j.useState(20),N=[{id:"ocr_text",label:"OCRテキスト",icon:ds},{id:"memo",label:"メモ",icon:Sw},{id:"tags",label:"タグ",icon:a0},{id:"location_name",label:"位置情報",icon:Yp},{id:"group_title",label:"グループタイトル",icon:ds}],b=D=>{u(A=>A.includes(D)?A.filter(M=>M!==D):[...A,D])},x=D=>{y(A=>A.includes(D)?A.filter(M=>M!==D):[...A,D])},S=()=>{if(!o.trim())return;const D={query:o.trim(),fields:l.length>0?l:void 0,dateFrom:c?new Date(c):void 0,dateTo:h?new Date(h):void 0,tags:p.length>0?p:void 0,limit:w};n(D)},C=()=>{a(""),u(["ocr_text","memo","tags"]),f(""),g(""),y([]),E(20)};return e?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[v.jsxs("div",{className:"flex items-center justify-between mb-6",children:[v.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[v.jsx(Fu,{className:"h-5 w-5"}),"高度な検索"]}),v.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:v.jsx(ei,{className:"h-5 w-5"})})]}),v.jsxs("div",{className:"mb-6",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"検索キーワード"}),v.jsx("input",{type:"text",value:o,onChange:D=>a(D.target.value),placeholder:"検索したいキーワードを入力...",className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyPress:D=>D.key==="Enter"&&S()})]}),v.jsxs("div",{className:"mb-6",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"検索対象フィールド"}),v.jsx("div",{className:"grid grid-cols-2 gap-2",children:N.map(D=>{const A=D.icon;return v.jsxs("label",{className:`flex items-center gap-2 p-2 rounded-lg border cursor-pointer transition-colors ${l.includes(D.id)?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:[v.jsx("input",{type:"checkbox",checked:l.includes(D.id),onChange:()=>b(D.id),className:"sr-only"}),v.jsx(A,{className:"h-4 w-4"}),v.jsx("span",{className:"text-sm",children:D.label})]},D.id)})})]}),v.jsxs("div",{className:"mb-6",children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[v.jsx(zu,{className:"h-4 w-4"}),"作成日時範囲"]}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"開始日"}),v.jsx("input",{type:"date",value:c,onChange:D=>f(D.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"終了日"}),v.jsx("input",{type:"date",value:h,onChange:D=>g(D.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),v.jsxs("div",{className:"mb-6",children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[v.jsx(a0,{className:"h-4 w-4"}),"タグフィルター"]}),v.jsx("div",{className:"flex flex-wrap gap-2",children:["仕事","趣味","旅行","郵便物","重要","緊急"].map(D=>v.jsx("button",{onClick:()=>x(D),className:`px-3 py-1 rounded-full text-sm transition-colors ${p.includes(D)?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:D},D))})]}),v.jsxs("div",{className:"mb-6",children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[v.jsx(lP,{className:"h-4 w-4"}),"最大結果件数"]}),v.jsxs("select",{value:w,onChange:D=>E(Number(D.target.value)),className:"w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[v.jsx("option",{value:10,children:"10件"}),v.jsx("option",{value:20,children:"20件"}),v.jsx("option",{value:50,children:"50件"}),v.jsx("option",{value:100,children:"100件"})]})]}),v.jsxs("div",{className:"flex justify-end gap-3",children:[v.jsx("button",{onClick:C,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"リセット"}),v.jsx("button",{onClick:S,disabled:r||!o.trim(),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center gap-2",children:r?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"検索中..."]}):v.jsxs(v.Fragment,{children:[v.jsx(Fu,{className:"h-4 w-4"}),"検索"]})})]})]})}):null},_P=({value:e,onChange:t,onAdvancedSearch:n,placeholder:r="テキストやタグで検索...",showAdvancedSearch:o=!0,isSearching:a=!1})=>{const[l,u]=j.useState(!1),c=f=>{n?.(f),u(!1)};return v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:v.jsx(Fu,{className:"h-5 w-5 text-gray-400"})}),v.jsx("input",{type:"text",value:e,onChange:f=>t(f.target.value),className:"block w-full pl-10 pr-20 py-3 border border-gray-200 rounded-xl bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:r,disabled:a}),v.jsxs("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center gap-1",children:[e&&v.jsx("button",{onClick:()=>t(""),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",disabled:a,children:v.jsx(ei,{className:"h-4 w-4"})}),o&&n&&v.jsx("button",{onClick:()=>u(!0),className:"p-1 text-gray-400 hover:text-blue-500 transition-colors",title:"高度な検索",disabled:a,children:v.jsx(_w,{className:"h-4 w-4"})})]}),!e&&v.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 px-3 py-2 bg-gray-50 rounded-lg text-xs text-gray-500",children:[v.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[v.jsx(vP,{className:"h-3 w-3"}),v.jsx("span",{className:"font-medium",children:"検索対象:"})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1",children:[v.jsx("span",{children:"• OCRテキスト"}),v.jsx("span",{children:"• メモ内容"}),v.jsx("span",{children:"• タグ"}),v.jsx("span",{children:"• 位置情報・施設名"})]})]})]}),o&&n&&v.jsx(yP,{isOpen:l,onClose:()=>u(!1),onSearch:c,isSearching:a})]})},wP={仕事:"bg-blue-100 text-blue-800 border-blue-200",趣味:"bg-green-100 text-green-800 border-green-200",旅行:"bg-purple-100 text-purple-800 border-purple-200",郵便物:"bg-orange-100 text-orange-800 border-orange-200"},Ai=({tag:e,selected:t=!1,count:n,onClick:r,removable:o=!1,onRemove:a,style:l,color:u})=>{const c=u?"":wP[e]||"bg-gray-100 text-gray-800 border-gray-200",f=t?"ring-2 ring-blue-500 ring-opacity-50":"",h=u?{backgroundColor:`${u}22`,color:u,borderColor:u}:{};return v.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium border cursor-pointer transition-all duration-200 ${c} ${f} ${r?"hover:shadow-md hover:scale-105":""}`,onClick:r,style:{...l,...h},children:["#",e,n!==void 0&&v.jsxs("span",{className:"ml-1 text-xs opacity-75",children:["(",n,")"]}),o&&a&&v.jsx("button",{onClick:g=>{g.stopPropagation(),a()},className:"ml-1 hover:bg-red-200 rounded-full p-0.5 transition-colors",children:"×"})]})},s0=({item:e,group:t,onClick:n,imageUrl:r})=>{const o=u=>new Intl.DateTimeFormat("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(u),a=(u,c=100)=>u?u.length<=c?u:u.slice(0,c)+"...":"",l=u=>{const f=JSON.parse(localStorage.getItem("postal_tags")||"[]").find(h=>h.name===u);return f?f.color:"#ccc"};return e?v.jsxs("div",{onClick:n,className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden cursor-pointer transition-all duration-200 hover:shadow-md hover:scale-[1.02] active:scale-[0.98]",children:[v.jsx("div",{className:"bg-gray-100 overflow-hidden flex items-center justify-center",style:{height:160},children:v.jsx("img",{src:r,alt:"撮影画像",className:"max-h-full max-w-full object-contain",style:{width:"100%",height:"auto"}})}),v.jsxs("div",{className:"p-4",children:[v.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-2",children:[v.jsx(zu,{className:"h-4 w-4"}),v.jsx("span",{children:o(e.createdAt)})]}),v.jsxs("div",{className:"flex items-start gap-2 mb-3",children:[v.jsx(ds,{className:"h-4 w-4 text-gray-400 mt-0.5 flex-shrink-0"}),v.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:a(e.ocrText)})]}),e.memo&&v.jsx("p",{className:"text-sm text-gray-600 mb-3 italic",children:a(e.memo,80)}),e.tags.length>0&&v.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map(u=>v.jsx(Ai,{tag:u,style:{backgroundColor:l(u)+"22",color:l(u)}},u))})]})]}):t?v.jsxs("div",{onClick:n,className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden cursor-pointer transition-all duration-200 hover:shadow-md hover:scale-[1.02] active:scale-[0.98]",children:[v.jsx("div",{className:"bg-gray-100 overflow-hidden flex items-center justify-center",style:{height:160},children:v.jsx("img",{src:r,alt:"グループのサムネイル",className:"max-h-full max-w-full object-contain",style:{width:"100%",height:"auto"}})}),v.jsxs("div",{className:"p-4",children:[v.jsx("h3",{className:"font-medium text-lg mb-2",children:t.title||"無題のグループ"}),v.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-2",children:[v.jsx(zu,{className:"h-4 w-4"}),v.jsx("span",{children:o(t.createdAt)}),v.jsxs("span",{className:"ml-auto flex items-center gap-1",children:[v.jsx(ww,{className:"h-4 w-4"}),t.photos.length,"枚"]})]}),t.memo&&v.jsx("p",{className:"text-sm text-gray-600 mb-3 italic",children:a(t.memo,80)}),t.tags.length>0&&v.jsx("div",{className:"flex flex-wrap gap-1",children:t.tags.map(u=>v.jsx(Ai,{tag:u,style:{backgroundColor:l(u)+"22",color:l(u)}},u))})]})]}):null},xP=[{name:"仕事",color:"#3B82F6"},{name:"趣味",color:"#22C55E"},{name:"旅行",color:"#A78BFA"},{name:"食事",color:"#F59E0B"},{name:"趣味",color:"#EC4899"},{name:"営業第一部",color:"#EF4444"},{name:"営業第二部",color:"#06B6D4"},{name:"経営企画部",color:"#8B5CF6"},{name:"経理部",color:"#10B981"},{name:"総務部",color:"#6366F1"},{name:"赤",color:"#DC2626"},{name:"青",color:"#2563EB"},{name:"緑",color:"#059669"},{name:"黄",color:"#D97706"},{name:"紫",color:"#7C3AED"},{name:"橙",color:"#EA580C"},{name:"茶",color:"#92400E"},{name:"ピンク",color:"#DB2777"},{name:"シアン",color:"#0891B2"},{name:"マゼンタ",color:"#BE185D"},{name:"ライム",color:"#65A30D"},{name:"ネイビー",color:"#1E40AF"},{name:"オリーブ",color:"#4D7C0F"},{name:"テール",color:"#0F766E"},{name:"マルーン",color:"#9F1239"},{name:"グレー",color:"#4B5563"},{name:"白",color:"#F9FAFB"}],l0=xP.slice(0,10),u0=40,Cw=()=>{const[e,t]=j.useState(()=>{const S=localStorage.getItem("postal_tags");if(S){const C=JSON.parse(S),D=new Set(C.map(U=>U.name)),A=l0.filter(U=>!D.has(U.name)),M=[...C,...A];return localStorage.setItem("postal_tags",JSON.stringify(M)),M}return l0}),[n,r]=j.useState(!1),[o,a]=j.useState(""),[l,u]=j.useState("#3B82F6"),[c,f]=j.useState(null),[h,g]=j.useState(""),[p,y]=j.useState("#3B82F6");return{tags:e,showAddTag:n,setShowAddTag:r,newTagName:o,setNewTagName:a,newTagColor:l,setNewTagColor:u,tagEditIdx:c,tagEditName:h,setTagEditName:g,tagEditColor:p,setTagEditColor:y,handleAddTag:()=>{if(!o.trim())return;const S={name:o.trim(),color:l},C=[...e,S];t(C),localStorage.setItem("postal_tags",JSON.stringify(C)),a(""),u("#3B82F6"),r(!1)},startEditTag:S=>{f(S),g(e[S].name),y(e[S].color)},handleEditTag:()=>{if(c===null||!h.trim())return;const S=e.map((C,D)=>D===c?{name:h.trim(),color:p}:C);t(S),localStorage.setItem("postal_tags",JSON.stringify(S)),f(null),g(""),y("#3B82F6")},handleCancelEdit:()=>{f(null),g(""),y("#3B82F6")},handleRemoveTag:S=>{if(!window.confirm("このタグを削除しますか？"))return;const C=e.filter((D,A)=>A!==S);t(C),localStorage.setItem("postal_tags",JSON.stringify(C))}}};let Yn=null;try{typeof window<"u"&&window.__TAURI__&&(Yn=require("@tauri-apps/api/tauri").invoke)}catch(e){console.warn("Tauri API not available:",e)}const bP=(e,t,n)=>{const r=[],o=n.query.toLowerCase();return e.forEach(a=>{let l=0;const u=[],c=[];a.ocrText?.toLowerCase().includes(o)&&(l+=3,u.push(`OCR: ${a.ocrText}`),c.push("ocr_text")),a.memo?.toLowerCase().includes(o)&&(l+=2,u.push(`メモ: ${a.memo}`),c.push("memo")),a.tags?.some(f=>f.toLowerCase().includes(o))&&(l+=1,u.push(`タグ: ${a.tags.join(", ")}`),c.push("tags")),a.metadata?.location?.name?.toLowerCase().includes(o)&&(l+=2,u.push(`位置: ${a.metadata.location.name}`),c.push("location_name")),l>0&&r.push({id:a.id,score:l,highlights:u,matchedFields:c})}),t.forEach(a=>{let l=0;const u=[],c=[];a.title?.toLowerCase().includes(o)&&(l+=2,u.push(`タイトル: ${a.title}`),c.push("group_title")),a.memo?.toLowerCase().includes(o)&&(l+=1,u.push(`メモ: ${a.memo}`),c.push("memo")),a.photos.forEach(f=>{f.ocrText?.toLowerCase().includes(o)&&(l+=1,u.push(`写真OCR: ${f.ocrText}`),c.push("ocr_text"))}),l>0&&r.push({id:a.id,score:l,highlights:u,matchedFields:c})}),r.sort((a,l)=>l.score-a.score).slice(0,n.limit||20)},SP=()=>{const[e,t]=j.useState(!1),[n,r]=j.useState(!1),[o,a]=j.useState([]),[l,u]=j.useState([]),[c,f]=j.useState(null),[h,g]=j.useState(!1);j.useEffect(()=>{g(!!Yn),t(!0)},[]);const p=j.useCallback(async()=>{if(!h){t(!0);return}try{await Yn("init_search_engine"),t(!0),f(null)}catch(A){f(`検索エンジンの初期化に失敗しました: ${A}`),console.error("Search engine initialization failed:",A)}},[h]),y=j.useCallback(async A=>{if(!(!e||!h))try{const M={id:A.id,ocrText:A.ocrText,memo:A.memo,tags:A.tags,locationName:A.metadata?.location?.name,createdAt:A.createdAt.toISOString(),updatedAt:A.updatedAt.toISOString(),groupTitle:null,imagePath:A.image};await Yn("add_item_to_index",{item:M})}catch(M){console.error("Failed to add item to search index:",M)}},[e,h]),w=j.useCallback(async A=>{if(!(!e||!h))try{for(const M of A.photos){const U={id:M.id,ocrText:M.ocrText,memo:M.memo,tags:M.tags,locationName:M.metadata?.location?.name,createdAt:M.createdAt.toISOString(),updatedAt:M.updatedAt.toISOString(),groupTitle:A.title,imagePath:M.image};await Yn("add_item_to_index",{item:U})}}catch(M){console.error("Failed to add group to search index:",M)}},[e,h]),E=j.useCallback(async A=>{if(!(!e||!h))try{const M={id:A.id,ocrText:A.ocrText,memo:A.memo,tags:A.tags,locationName:A.metadata?.location?.name,createdAt:A.createdAt.toISOString(),updatedAt:A.updatedAt.toISOString(),groupTitle:null,imagePath:A.image};await Yn("update_item_in_index",{item:M})}catch(M){console.error("Failed to update item in search index:",M)}},[e,h]),N=j.useCallback(async A=>{if(!(!e||!h))try{await Yn("delete_item_from_index",{itemId:A})}catch(M){console.error("Failed to delete item from search index:",M)}},[e,h]),b=j.useCallback(async(A,M,U)=>{if(!e){f("検索エンジンが初期化されていません");return}r(!0),f(null);try{let I=[];if(h){const R={query:A.query,fields:A.fields,dateFrom:A.dateFrom?.toISOString(),dateTo:A.dateTo?.toISOString(),tags:A.tags,limit:A.limit||20};I=await Yn("search_items",{query:R})}else if(M&&U)I=bP(M,U,A);else throw new Error("フォールバック検索にはアイテムとグループのデータが必要です");a(I);const T={query:A.query,timestamp:new Date,resultCount:I.length};u(R=>[T,...R.slice(0,9)])}catch(I){f(`検索に失敗しました: ${I}`),console.error("Search failed:",I)}finally{r(!1)}},[e,h]),x=j.useCallback(async()=>{if(!(!e||!h))try{await Yn("clear_search_index"),a([])}catch(A){console.error("Failed to clear search index:",A)}},[e,h]),S=j.useCallback(async()=>{if(!e||!h)return null;try{return await Yn("get_search_stats")}catch(A){return console.error("Failed to get search stats:",A),null}},[e,h]),C=j.useCallback(()=>{u([])},[]),D=j.useCallback((A,M,U)=>{b({query:A.query},M,U)},[b]);return j.useEffect(()=>{p()},[p]),{isInitialized:e,isSearching:n,searchResults:o,searchHistory:l,error:c,useTauri:h,search:b,addItemToIndex:y,addGroupToIndex:w,updateItemInIndex:E,deleteItemFromIndex:N,clearIndex:x,getSearchStats:S,clearSearchHistory:C,searchFromHistory:D}};var CP=Object.defineProperty,Uu=Object.getOwnPropertySymbols,Ew=Object.prototype.hasOwnProperty,Pw=Object.prototype.propertyIsEnumerable,c0=(e,t,n)=>t in e?CP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ps=(e,t)=>{for(var n in t||(t={}))Ew.call(t,n)&&c0(e,n,t[n]);if(Uu)for(var n of Uu(t))Pw.call(t,n)&&c0(e,n,t[n]);return e},em=(e,t)=>{var n={};for(var r in e)Ew.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Uu)for(var r of Uu(e))t.indexOf(r)<0&&Pw.call(e,r)&&(n[r]=e[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Mi;(e=>{const t=class{constructor(c,f,h,g){if(this.version=c,this.errorCorrectionLevel=f,this.modules=[],this.isFunction=[],c<t.MIN_VERSION||c>t.MAX_VERSION)throw new RangeError("Version value out of range");if(g<-1||g>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let p=[];for(let w=0;w<this.size;w++)p.push(!1);for(let w=0;w<this.size;w++)this.modules.push(p.slice()),this.isFunction.push(p.slice());this.drawFunctionPatterns();const y=this.addEccAndInterleave(h);if(this.drawCodewords(y),g==-1){let w=1e9;for(let E=0;E<8;E++){this.applyMask(E),this.drawFormatBits(E);const N=this.getPenaltyScore();N<w&&(g=E,w=N),this.applyMask(E)}}a(0<=g&&g<=7),this.mask=g,this.applyMask(g),this.drawFormatBits(g),this.isFunction=[]}static encodeText(c,f){const h=e.QrSegment.makeSegments(c);return t.encodeSegments(h,f)}static encodeBinary(c,f){const h=e.QrSegment.makeBytes(c);return t.encodeSegments([h],f)}static encodeSegments(c,f,h=1,g=40,p=-1,y=!0){if(!(t.MIN_VERSION<=h&&h<=g&&g<=t.MAX_VERSION)||p<-1||p>7)throw new RangeError("Invalid value");let w,E;for(w=h;;w++){const S=t.getNumDataCodewords(w,f)*8,C=u.getTotalBits(c,w);if(C<=S){E=C;break}if(w>=g)throw new RangeError("Data too long")}for(const S of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])y&&E<=t.getNumDataCodewords(w,S)*8&&(f=S);let N=[];for(const S of c){r(S.mode.modeBits,4,N),r(S.numChars,S.mode.numCharCountBits(w),N);for(const C of S.getData())N.push(C)}a(N.length==E);const b=t.getNumDataCodewords(w,f)*8;a(N.length<=b),r(0,Math.min(4,b-N.length),N),r(0,(8-N.length%8)%8,N),a(N.length%8==0);for(let S=236;N.length<b;S^=253)r(S,8,N);let x=[];for(;x.length*8<N.length;)x.push(0);return N.forEach((S,C)=>x[C>>>3]|=S<<7-(C&7)),new t(w,f,x,p)}getModule(c,f){return 0<=c&&c<this.size&&0<=f&&f<this.size&&this.modules[f][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let h=0;h<this.size;h++)this.setFunctionModule(6,h,h%2==0),this.setFunctionModule(h,6,h%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),f=c.length;for(let h=0;h<f;h++)for(let g=0;g<f;g++)h==0&&g==0||h==0&&g==f-1||h==f-1&&g==0||this.drawAlignmentPattern(c[h],c[g]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const f=this.errorCorrectionLevel.formatBits<<3|c;let h=f;for(let p=0;p<10;p++)h=h<<1^(h>>>9)*1335;const g=(f<<10|h)^21522;a(g>>>15==0);for(let p=0;p<=5;p++)this.setFunctionModule(8,p,o(g,p));this.setFunctionModule(8,7,o(g,6)),this.setFunctionModule(8,8,o(g,7)),this.setFunctionModule(7,8,o(g,8));for(let p=9;p<15;p++)this.setFunctionModule(14-p,8,o(g,p));for(let p=0;p<8;p++)this.setFunctionModule(this.size-1-p,8,o(g,p));for(let p=8;p<15;p++)this.setFunctionModule(8,this.size-15+p,o(g,p));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let h=0;h<12;h++)c=c<<1^(c>>>11)*7973;const f=this.version<<12|c;a(f>>>18==0);for(let h=0;h<18;h++){const g=o(f,h),p=this.size-11+h%3,y=Math.floor(h/3);this.setFunctionModule(p,y,g),this.setFunctionModule(y,p,g)}}drawFinderPattern(c,f){for(let h=-4;h<=4;h++)for(let g=-4;g<=4;g++){const p=Math.max(Math.abs(g),Math.abs(h)),y=c+g,w=f+h;0<=y&&y<this.size&&0<=w&&w<this.size&&this.setFunctionModule(y,w,p!=2&&p!=4)}}drawAlignmentPattern(c,f){for(let h=-2;h<=2;h++)for(let g=-2;g<=2;g++)this.setFunctionModule(c+g,f+h,Math.max(Math.abs(g),Math.abs(h))!=1)}setFunctionModule(c,f,h){this.modules[f][c]=h,this.isFunction[f][c]=!0}addEccAndInterleave(c){const f=this.version,h=this.errorCorrectionLevel;if(c.length!=t.getNumDataCodewords(f,h))throw new RangeError("Invalid argument");const g=t.NUM_ERROR_CORRECTION_BLOCKS[h.ordinal][f],p=t.ECC_CODEWORDS_PER_BLOCK[h.ordinal][f],y=Math.floor(t.getNumRawDataModules(f)/8),w=g-y%g,E=Math.floor(y/g);let N=[];const b=t.reedSolomonComputeDivisor(p);for(let S=0,C=0;S<g;S++){let D=c.slice(C,C+E-p+(S<w?0:1));C+=D.length;const A=t.reedSolomonComputeRemainder(D,b);S<w&&D.push(0),N.push(D.concat(A))}let x=[];for(let S=0;S<N[0].length;S++)N.forEach((C,D)=>{(S!=E-p||D>=w)&&x.push(C[S])});return a(x.length==y),x}drawCodewords(c){if(c.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let f=0;for(let h=this.size-1;h>=1;h-=2){h==6&&(h=5);for(let g=0;g<this.size;g++)for(let p=0;p<2;p++){const y=h-p,E=(h+1&2)==0?this.size-1-g:g;!this.isFunction[E][y]&&f<c.length*8&&(this.modules[E][y]=o(c[f>>>3],7-(f&7)),f++)}}a(f==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let f=0;f<this.size;f++)for(let h=0;h<this.size;h++){let g;switch(c){case 0:g=(h+f)%2==0;break;case 1:g=f%2==0;break;case 2:g=h%3==0;break;case 3:g=(h+f)%3==0;break;case 4:g=(Math.floor(h/3)+Math.floor(f/2))%2==0;break;case 5:g=h*f%2+h*f%3==0;break;case 6:g=(h*f%2+h*f%3)%2==0;break;case 7:g=((h+f)%2+h*f%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[f][h]&&g&&(this.modules[f][h]=!this.modules[f][h])}}getPenaltyScore(){let c=0;for(let p=0;p<this.size;p++){let y=!1,w=0,E=[0,0,0,0,0,0,0];for(let N=0;N<this.size;N++)this.modules[p][N]==y?(w++,w==5?c+=t.PENALTY_N1:w>5&&c++):(this.finderPenaltyAddHistory(w,E),y||(c+=this.finderPenaltyCountPatterns(E)*t.PENALTY_N3),y=this.modules[p][N],w=1);c+=this.finderPenaltyTerminateAndCount(y,w,E)*t.PENALTY_N3}for(let p=0;p<this.size;p++){let y=!1,w=0,E=[0,0,0,0,0,0,0];for(let N=0;N<this.size;N++)this.modules[N][p]==y?(w++,w==5?c+=t.PENALTY_N1:w>5&&c++):(this.finderPenaltyAddHistory(w,E),y||(c+=this.finderPenaltyCountPatterns(E)*t.PENALTY_N3),y=this.modules[N][p],w=1);c+=this.finderPenaltyTerminateAndCount(y,w,E)*t.PENALTY_N3}for(let p=0;p<this.size-1;p++)for(let y=0;y<this.size-1;y++){const w=this.modules[p][y];w==this.modules[p][y+1]&&w==this.modules[p+1][y]&&w==this.modules[p+1][y+1]&&(c+=t.PENALTY_N2)}let f=0;for(const p of this.modules)f=p.reduce((y,w)=>y+(w?1:0),f);const h=this.size*this.size,g=Math.ceil(Math.abs(f*20-h*10)/h)-1;return a(0<=g&&g<=9),c+=g*t.PENALTY_N4,a(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,f=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let h=[6];for(let g=this.size-7;h.length<c;g-=f)h.splice(1,0,g);return h}}static getNumRawDataModules(c){if(c<t.MIN_VERSION||c>t.MAX_VERSION)throw new RangeError("Version number out of range");let f=(16*c+128)*c+64;if(c>=2){const h=Math.floor(c/7)+2;f-=(25*h-10)*h-55,c>=7&&(f-=36)}return a(208<=f&&f<=29648),f}static getNumDataCodewords(c,f){return Math.floor(t.getNumRawDataModules(c)/8)-t.ECC_CODEWORDS_PER_BLOCK[f.ordinal][c]*t.NUM_ERROR_CORRECTION_BLOCKS[f.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let f=[];for(let g=0;g<c-1;g++)f.push(0);f.push(1);let h=1;for(let g=0;g<c;g++){for(let p=0;p<f.length;p++)f[p]=t.reedSolomonMultiply(f[p],h),p+1<f.length&&(f[p]^=f[p+1]);h=t.reedSolomonMultiply(h,2)}return f}static reedSolomonComputeRemainder(c,f){let h=f.map(g=>0);for(const g of c){const p=g^h.shift();h.push(0),f.forEach((y,w)=>h[w]^=t.reedSolomonMultiply(y,p))}return h}static reedSolomonMultiply(c,f){if(c>>>8||f>>>8)throw new RangeError("Byte out of range");let h=0;for(let g=7;g>=0;g--)h=h<<1^(h>>>7)*285,h^=(f>>>g&1)*c;return a(h>>>8==0),h}finderPenaltyCountPatterns(c){const f=c[1];a(f<=this.size*3);const h=f>0&&c[2]==f&&c[3]==f*3&&c[4]==f&&c[5]==f;return(h&&c[0]>=f*4&&c[6]>=f?1:0)+(h&&c[6]>=f*4&&c[0]>=f?1:0)}finderPenaltyTerminateAndCount(c,f,h){return c&&(this.finderPenaltyAddHistory(f,h),f=0),f+=this.size,this.finderPenaltyAddHistory(f,h),this.finderPenaltyCountPatterns(h)}finderPenaltyAddHistory(c,f){f[0]==0&&(c+=this.size),f.pop(),f.unshift(c)}};let n=t;n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=n;function r(c,f,h){if(f<0||f>31||c>>>f)throw new RangeError("Value out of range");for(let g=f-1;g>=0;g--)h.push(c>>>g&1)}function o(c,f){return(c>>>f&1)!=0}function a(c){if(!c)throw new Error("Assertion error")}const l=class{constructor(c,f,h){if(this.mode=c,this.numChars=f,this.bitData=h,f<0)throw new RangeError("Invalid argument");this.bitData=h.slice()}static makeBytes(c){let f=[];for(const h of c)r(h,8,f);return new l(l.Mode.BYTE,c.length,f)}static makeNumeric(c){if(!l.isNumeric(c))throw new RangeError("String contains non-numeric characters");let f=[];for(let h=0;h<c.length;){const g=Math.min(c.length-h,3);r(parseInt(c.substr(h,g),10),g*3+1,f),h+=g}return new l(l.Mode.NUMERIC,c.length,f)}static makeAlphanumeric(c){if(!l.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let f=[],h;for(h=0;h+2<=c.length;h+=2){let g=l.ALPHANUMERIC_CHARSET.indexOf(c.charAt(h))*45;g+=l.ALPHANUMERIC_CHARSET.indexOf(c.charAt(h+1)),r(g,11,f)}return h<c.length&&r(l.ALPHANUMERIC_CHARSET.indexOf(c.charAt(h)),6,f),new l(l.Mode.ALPHANUMERIC,c.length,f)}static makeSegments(c){return c==""?[]:l.isNumeric(c)?[l.makeNumeric(c)]:l.isAlphanumeric(c)?[l.makeAlphanumeric(c)]:[l.makeBytes(l.toUtf8ByteArray(c))]}static makeEci(c){let f=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)r(c,8,f);else if(c<16384)r(2,2,f),r(c,14,f);else if(c<1e6)r(6,3,f),r(c,21,f);else throw new RangeError("ECI assignment value out of range");return new l(l.Mode.ECI,0,f)}static isNumeric(c){return l.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return l.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,f){let h=0;for(const g of c){const p=g.mode.numCharCountBits(f);if(g.numChars>=1<<p)return 1/0;h+=4+p+g.bitData.length}return h}static toUtf8ByteArray(c){c=encodeURI(c);let f=[];for(let h=0;h<c.length;h++)c.charAt(h)!="%"?f.push(c.charCodeAt(h)):(f.push(parseInt(c.substr(h+1,2),16)),h+=2);return f}};let u=l;u.NUMERIC_REGEX=/^[0-9]*$/,u.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,u.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.QrSegment=u})(Mi||(Mi={}));(e=>{(t=>{const n=class{constructor(o,a){this.ordinal=o,this.formatBits=a}};let r=n;r.LOW=new n(0,1),r.MEDIUM=new n(1,0),r.QUARTILE=new n(2,3),r.HIGH=new n(3,2),t.Ecc=r})(e.QrCode||(e.QrCode={}))})(Mi||(Mi={}));(e=>{(t=>{const n=class{constructor(o,a){this.modeBits=o,this.numBitsCharCount=a}numCharCountBits(o){return this.numBitsCharCount[Math.floor((o+7)/17)]}};let r=n;r.NUMERIC=new n(1,[10,12,14]),r.ALPHANUMERIC=new n(2,[9,11,13]),r.BYTE=new n(4,[8,16,16]),r.KANJI=new n(8,[8,10,12]),r.ECI=new n(7,[0,0,0]),t.Mode=r})(e.QrSegment||(e.QrSegment={}))})(Mi||(Mi={}));var go=Mi;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Nw={L:go.QrCode.Ecc.LOW,M:go.QrCode.Ecc.MEDIUM,Q:go.QrCode.Ecc.QUARTILE,H:go.QrCode.Ecc.HIGH},kw=128,Iw="L",Tw="#FFFFFF",Dw="#000000",Lw=!1,tm=4,EP=.1;function Aw(e,t=0){const n=[];return e.forEach(function(r,o){let a=null;r.forEach(function(l,u){if(!l&&a!==null){n.push(`M${a+t} ${o+t}h${u-a}v1H${a+t}z`),a=null;return}if(u===r.length-1){if(!l)return;a===null?n.push(`M${u+t},${o+t} h1v1H${u+t}z`):n.push(`M${a+t},${o+t} h${u+1-a}v1H${a+t}z`);return}l&&a===null&&(a=u)})}),n.join("")}function Mw(e,t){return e.slice().map((n,r)=>r<t.y||r>=t.y+t.h?n:n.map((o,a)=>a<t.x||a>=t.x+t.w?o:!1))}function Rw(e,t,n,r){if(r==null)return null;const o=n?tm:0,a=e.length+o*2,l=Math.floor(t*EP),u=a/t,c=(r.width||l)*u,f=(r.height||l)*u,h=r.x==null?e.length/2-c/2:r.x*u,g=r.y==null?e.length/2-f/2:r.y*u;let p=null;if(r.excavate){let y=Math.floor(h),w=Math.floor(g),E=Math.ceil(c+h-y),N=Math.ceil(f+g-w);p={x:y,y:w,w:E,h:N}}return{x:h,y:g,h:f,w:c,excavation:p}}var PP=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function NP(e){const t=e,{value:n,size:r=kw,level:o=Iw,bgColor:a=Tw,fgColor:l=Dw,includeMargin:u=Lw,style:c,imageSettings:f}=t,h=em(t,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),g=f?.src,p=Se.useRef(null),y=Se.useRef(null),[w,E]=Se.useState(!1);Se.useEffect(()=>{if(p.current!=null){const x=p.current,S=x.getContext("2d");if(!S)return;let C=go.QrCode.encodeText(n,Nw[o]).getModules();const D=u?tm:0,A=C.length+D*2,M=Rw(C,r,u,f),U=y.current,I=M!=null&&U!==null&&U.complete&&U.naturalHeight!==0&&U.naturalWidth!==0;I&&M.excavation!=null&&(C=Mw(C,M.excavation));const T=window.devicePixelRatio||1;x.height=x.width=r*T;const R=r/A*T;S.scale(R,R),S.fillStyle=a,S.fillRect(0,0,A,A),S.fillStyle=l,PP?S.fill(new Path2D(Aw(C,D))):C.forEach(function(V,Z){V.forEach(function(q,J){q&&S.fillRect(J+D,Z+D,1,1)})}),I&&S.drawImage(U,M.x+D,M.y+D,M.w,M.h)}}),Se.useEffect(()=>{E(!1)},[g]);const N=ps({height:r,width:r},c);let b=null;return g!=null&&(b=Se.createElement("img",{src:g,key:g,style:{display:"none"},onLoad:()=>{E(!0)},ref:y})),Se.createElement(Se.Fragment,null,Se.createElement("canvas",ps({style:N,height:r,width:r,ref:p},h)),b)}function kP(e){const t=e,{value:n,size:r=kw,level:o=Iw,bgColor:a=Tw,fgColor:l=Dw,includeMargin:u=Lw,imageSettings:c}=t,f=em(t,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let h=go.QrCode.encodeText(n,Nw[o]).getModules();const g=u?tm:0,p=h.length+g*2,y=Rw(h,r,u,c);let w=null;c!=null&&y!=null&&(y.excavation!=null&&(h=Mw(h,y.excavation)),w=Se.createElement("image",{xlinkHref:c.src,height:y.h,width:y.w,x:y.x+g,y:y.y+g,preserveAspectRatio:"none"}));const E=Aw(h,g);return Se.createElement("svg",ps({height:r,width:r,viewBox:`0 0 ${p} ${p}`},f),Se.createElement("path",{fill:a,d:`M0,0 h${p}v${p}H0z`,shapeRendering:"crispEdges"}),Se.createElement("path",{fill:l,d:E,shapeRendering:"crispEdges"}),w)}var IP=e=>{const t=e,{renderAs:n}=t,r=em(t,["renderAs"]);return n==="svg"?Se.createElement(kP,ps({},r)):Se.createElement(NP,ps({},r))},Th={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(n,r){r(t)})(e_,function(n){var r="1.9.4";function o(i){var s,d,m,_;for(d=1,m=arguments.length;d<m;d++){_=arguments[d];for(s in _)i[s]=_[s]}return i}var a=Object.create||function(){function i(){}return function(s){return i.prototype=s,new i}}();function l(i,s){var d=Array.prototype.slice;if(i.bind)return i.bind.apply(i,d.call(arguments,1));var m=d.call(arguments,2);return function(){return i.apply(s,m.length?m.concat(d.call(arguments)):arguments)}}var u=0;function c(i){return"_leaflet_id"in i||(i._leaflet_id=++u),i._leaflet_id}function f(i,s,d){var m,_,P,O;return O=function(){m=!1,_&&(P.apply(d,_),_=!1)},P=function(){m?_=arguments:(i.apply(d,arguments),setTimeout(O,s),m=!0)},P}function h(i,s,d){var m=s[1],_=s[0],P=m-_;return i===m&&d?i:((i-_)%P+P)%P+_}function g(){return!1}function p(i,s){if(s===!1)return i;var d=Math.pow(10,s===void 0?6:s);return Math.round(i*d)/d}function y(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function w(i){return y(i).split(/\s+/)}function E(i,s){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?a(i.options):{});for(var d in s)i.options[d]=s[d];return i.options}function N(i,s,d){var m=[];for(var _ in i)m.push(encodeURIComponent(d?_.toUpperCase():_)+"="+encodeURIComponent(i[_]));return(!s||s.indexOf("?")===-1?"?":"&")+m.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function x(i,s){return i.replace(b,function(d,m){var _=s[m];if(_===void 0)throw new Error("No value provided for variable "+d);return typeof _=="function"&&(_=_(s)),_})}var S=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function C(i,s){for(var d=0;d<i.length;d++)if(i[d]===s)return d;return-1}var D="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function A(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var M=0;function U(i){var s=+new Date,d=Math.max(0,16-(s-M));return M=s+d,window.setTimeout(i,d)}var I=window.requestAnimationFrame||A("RequestAnimationFrame")||U,T=window.cancelAnimationFrame||A("CancelAnimationFrame")||A("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function R(i,s,d){if(d&&I===U)i.call(s);else return I.call(window,l(i,s))}function V(i){i&&T.call(window,i)}var Z={__proto__:null,extend:o,create:a,bind:l,get lastId(){return u},stamp:c,throttle:f,wrapNum:h,falseFn:g,formatNum:p,trim:y,splitWords:w,setOptions:E,getParamString:N,template:x,isArray:S,indexOf:C,emptyImageUrl:D,requestFn:I,cancelFn:T,requestAnimFrame:R,cancelAnimFrame:V};function q(){}q.extend=function(i){var s=function(){E(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=s.__super__=this.prototype,m=a(d);m.constructor=s,s.prototype=m;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(s[_]=this[_]);return i.statics&&o(s,i.statics),i.includes&&(J(i.includes),o.apply(null,[m].concat(i.includes))),o(m,i),delete m.statics,delete m.includes,m.options&&(m.options=d.options?a(d.options):{},o(m.options,i.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var P=0,O=m._initHooks.length;P<O;P++)m._initHooks[P].call(this)}},s},q.include=function(i){var s=this.prototype.options;return o(this.prototype,i),i.options&&(this.prototype.options=s,this.mergeOptions(i.options)),this},q.mergeOptions=function(i){return o(this.prototype.options,i),this},q.addInitHook=function(i){var s=Array.prototype.slice.call(arguments,1),d=typeof i=="function"?i:function(){this[i].apply(this,s)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function J(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=S(i)?i:[i];for(var s=0;s<i.length;s++)i[s]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Y={on:function(i,s,d){if(typeof i=="object")for(var m in i)this._on(m,i[m],s);else{i=w(i);for(var _=0,P=i.length;_<P;_++)this._on(i[_],s,d)}return this},off:function(i,s,d){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var m in i)this._off(m,i[m],s);else{i=w(i);for(var _=arguments.length===1,P=0,O=i.length;P<O;P++)_?this._off(i[P]):this._off(i[P],s,d)}return this},_on:function(i,s,d,m){if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}if(this._listens(i,s,d)===!1){d===this&&(d=void 0);var _={fn:s,ctx:d};m&&(_.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(_)}},_off:function(i,s,d){var m,_,P;if(this._events&&(m=this._events[i],!!m)){if(arguments.length===1){if(this._firingCount)for(_=0,P=m.length;_<P;_++)m[_].fn=g;delete this._events[i];return}if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}var O=this._listens(i,s,d);if(O!==!1){var $=m[O];this._firingCount&&($.fn=g,this._events[i]=m=m.slice()),m.splice(O,1)}}},fire:function(i,s,d){if(!this.listens(i,d))return this;var m=o({},s,{type:i,target:this,sourceTarget:s&&s.sourceTarget||this});if(this._events){var _=this._events[i];if(_){this._firingCount=this._firingCount+1||1;for(var P=0,O=_.length;P<O;P++){var $=_[P],W=$.fn;$.once&&this.off(i,W,$.ctx),W.call($.ctx||this,m)}this._firingCount--}}return d&&this._propagateEvent(m),this},listens:function(i,s,d,m){typeof i!="string"&&console.warn('"string" type argument expected');var _=s;typeof s!="function"&&(m=!!s,_=void 0,d=void 0);var P=this._events&&this._events[i];if(P&&P.length&&this._listens(i,_,d)!==!1)return!0;if(m){for(var O in this._eventParents)if(this._eventParents[O].listens(i,s,d,m))return!0}return!1},_listens:function(i,s,d){if(!this._events)return!1;var m=this._events[i]||[];if(!s)return!!m.length;d===this&&(d=void 0);for(var _=0,P=m.length;_<P;_++)if(m[_].fn===s&&m[_].ctx===d)return _;return!1},once:function(i,s,d){if(typeof i=="object")for(var m in i)this._on(m,i[m],s,!0);else{i=w(i);for(var _=0,P=i.length;_<P;_++)this._on(i[_],s,d,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[c(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[c(i)],this},_propagateEvent:function(i){for(var s in this._eventParents)this._eventParents[s].fire(i.type,o({layer:i.target,propagatedFrom:i.target},i),!0)}};Y.addEventListener=Y.on,Y.removeEventListener=Y.clearAllEventListeners=Y.off,Y.addOneTimeEventListener=Y.once,Y.fireEvent=Y.fire,Y.hasEventListeners=Y.listens;var te=q.extend(Y);function B(i,s,d){this.x=d?Math.round(i):i,this.y=d?Math.round(s):s}var F=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};B.prototype={clone:function(){return new B(this.x,this.y)},add:function(i){return this.clone()._add(k(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(k(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new B(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new B(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=F(this.x),this.y=F(this.y),this},distanceTo:function(i){i=k(i);var s=i.x-this.x,d=i.y-this.y;return Math.sqrt(s*s+d*d)},equals:function(i){return i=k(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=k(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+p(this.x)+", "+p(this.y)+")"}};function k(i,s,d){return i instanceof B?i:S(i)?new B(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new B(i.x,i.y):new B(i,s,d)}function z(i,s){if(i)for(var d=s?[i,s]:i,m=0,_=d.length;m<_;m++)this.extend(d[m])}z.prototype={extend:function(i){var s,d;if(!i)return this;if(i instanceof B||typeof i[0]=="number"||"x"in i)s=d=k(i);else if(i=G(i),s=i.min,d=i.max,!s||!d)return this;return!this.min&&!this.max?(this.min=s.clone(),this.max=d.clone()):(this.min.x=Math.min(s.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(s.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(i){return k((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return k(this.min.x,this.max.y)},getTopRight:function(){return k(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var s,d;return typeof i[0]=="number"||i instanceof B?i=k(i):i=G(i),i instanceof z?(s=i.min,d=i.max):s=d=i,s.x>=this.min.x&&d.x<=this.max.x&&s.y>=this.min.y&&d.y<=this.max.y},intersects:function(i){i=G(i);var s=this.min,d=this.max,m=i.min,_=i.max,P=_.x>=s.x&&m.x<=d.x,O=_.y>=s.y&&m.y<=d.y;return P&&O},overlaps:function(i){i=G(i);var s=this.min,d=this.max,m=i.min,_=i.max,P=_.x>s.x&&m.x<d.x,O=_.y>s.y&&m.y<d.y;return P&&O},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var s=this.min,d=this.max,m=Math.abs(s.x-d.x)*i,_=Math.abs(s.y-d.y)*i;return G(k(s.x-m,s.y-_),k(d.x+m,d.y+_))},equals:function(i){return i?(i=G(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function G(i,s){return!i||i instanceof z?i:new z(i,s)}function H(i,s){if(i)for(var d=s?[i,s]:i,m=0,_=d.length;m<_;m++)this.extend(d[m])}H.prototype={extend:function(i){var s=this._southWest,d=this._northEast,m,_;if(i instanceof ne)m=i,_=i;else if(i instanceof H){if(m=i._southWest,_=i._northEast,!m||!_)return this}else return i?this.extend(Q(i)||K(i)):this;return!s&&!d?(this._southWest=new ne(m.lat,m.lng),this._northEast=new ne(_.lat,_.lng)):(s.lat=Math.min(m.lat,s.lat),s.lng=Math.min(m.lng,s.lng),d.lat=Math.max(_.lat,d.lat),d.lng=Math.max(_.lng,d.lng)),this},pad:function(i){var s=this._southWest,d=this._northEast,m=Math.abs(s.lat-d.lat)*i,_=Math.abs(s.lng-d.lng)*i;return new H(new ne(s.lat-m,s.lng-_),new ne(d.lat+m,d.lng+_))},getCenter:function(){return new ne((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ne(this.getNorth(),this.getWest())},getSouthEast:function(){return new ne(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof ne||"lat"in i?i=Q(i):i=K(i);var s=this._southWest,d=this._northEast,m,_;return i instanceof H?(m=i.getSouthWest(),_=i.getNorthEast()):m=_=i,m.lat>=s.lat&&_.lat<=d.lat&&m.lng>=s.lng&&_.lng<=d.lng},intersects:function(i){i=K(i);var s=this._southWest,d=this._northEast,m=i.getSouthWest(),_=i.getNorthEast(),P=_.lat>=s.lat&&m.lat<=d.lat,O=_.lng>=s.lng&&m.lng<=d.lng;return P&&O},overlaps:function(i){i=K(i);var s=this._southWest,d=this._northEast,m=i.getSouthWest(),_=i.getNorthEast(),P=_.lat>s.lat&&m.lat<d.lat,O=_.lng>s.lng&&m.lng<d.lng;return P&&O},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,s){return i?(i=K(i),this._southWest.equals(i.getSouthWest(),s)&&this._northEast.equals(i.getNorthEast(),s)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function K(i,s){return i instanceof H?i:new H(i,s)}function ne(i,s,d){if(isNaN(i)||isNaN(s))throw new Error("Invalid LatLng object: ("+i+", "+s+")");this.lat=+i,this.lng=+s,d!==void 0&&(this.alt=+d)}ne.prototype={equals:function(i,s){if(!i)return!1;i=Q(i);var d=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return d<=(s===void 0?1e-9:s)},toString:function(i){return"LatLng("+p(this.lat,i)+", "+p(this.lng,i)+")"},distanceTo:function(i){return ve.distance(this,Q(i))},wrap:function(){return ve.wrapLatLng(this)},toBounds:function(i){var s=180*i/40075017,d=s/Math.cos(Math.PI/180*this.lat);return K([this.lat-s,this.lng-d],[this.lat+s,this.lng+d])},clone:function(){return new ne(this.lat,this.lng,this.alt)}};function Q(i,s,d){return i instanceof ne?i:S(i)&&typeof i[0]!="object"?i.length===3?new ne(i[0],i[1],i[2]):i.length===2?new ne(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new ne(i.lat,"lng"in i?i.lng:i.lon,i.alt):s===void 0?null:new ne(i,s,d)}var ce={latLngToPoint:function(i,s){var d=this.projection.project(i),m=this.scale(s);return this.transformation._transform(d,m)},pointToLatLng:function(i,s){var d=this.scale(s),m=this.transformation.untransform(i,d);return this.projection.unproject(m)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var s=this.projection.bounds,d=this.scale(i),m=this.transformation.transform(s.min,d),_=this.transformation.transform(s.max,d);return new z(m,_)},infinite:!1,wrapLatLng:function(i){var s=this.wrapLng?h(i.lng,this.wrapLng,!0):i.lng,d=this.wrapLat?h(i.lat,this.wrapLat,!0):i.lat,m=i.alt;return new ne(d,s,m)},wrapLatLngBounds:function(i){var s=i.getCenter(),d=this.wrapLatLng(s),m=s.lat-d.lat,_=s.lng-d.lng;if(m===0&&_===0)return i;var P=i.getSouthWest(),O=i.getNorthEast(),$=new ne(P.lat-m,P.lng-_),W=new ne(O.lat-m,O.lng-_);return new H($,W)}},ve=o({},ce,{wrapLng:[-180,180],R:6371e3,distance:function(i,s){var d=Math.PI/180,m=i.lat*d,_=s.lat*d,P=Math.sin((s.lat-i.lat)*d/2),O=Math.sin((s.lng-i.lng)*d/2),$=P*P+Math.cos(m)*Math.cos(_)*O*O,W=2*Math.atan2(Math.sqrt($),Math.sqrt(1-$));return this.R*W}}),$e=6378137,Oe={R:$e,MAX_LATITUDE:85.0511287798,project:function(i){var s=Math.PI/180,d=this.MAX_LATITUDE,m=Math.max(Math.min(d,i.lat),-d),_=Math.sin(m*s);return new B(this.R*i.lng*s,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(i){var s=180/Math.PI;return new ne((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*s,i.x*s/this.R)},bounds:function(){var i=$e*Math.PI;return new z([-i,-i],[i,i])}()};function tt(i,s,d,m){if(S(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=s,this._c=d,this._d=m}tt.prototype={transform:function(i,s){return this._transform(i.clone(),s)},_transform:function(i,s){return s=s||1,i.x=s*(this._a*i.x+this._b),i.y=s*(this._c*i.y+this._d),i},untransform:function(i,s){return s=s||1,new B((i.x/s-this._b)/this._a,(i.y/s-this._d)/this._c)}};function nt(i,s,d,m){return new tt(i,s,d,m)}var bt=o({},ve,{code:"EPSG:3857",projection:Oe,transformation:function(){var i=.5/(Math.PI*Oe.R);return nt(i,.5,-i,.5)}()}),lt=o({},bt,{code:"EPSG:900913"});function re(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function de(i,s){var d="",m,_,P,O,$,W;for(m=0,P=i.length;m<P;m++){for($=i[m],_=0,O=$.length;_<O;_++)W=$[_],d+=(_?"L":"M")+W.x+" "+W.y;d+=s?le.svg?"z":"x":""}return d||"M0 0"}var me=document.documentElement.style,xe="ActiveXObject"in window,be=xe&&!document.addEventListener,Ke="msLaunchUri"in navigator&&!("documentMode"in document),rt=ut("webkit"),ee=ut("android"),se=ut("android 2")||ut("android 3"),he=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),_e=ee&&ut("Google")&&he<537&&!("AudioNode"in window),we=!!window.opera,ke=!Ke&&ut("chrome"),Be=ut("gecko")&&!rt&&!we&&!xe,St=!ke&&ut("safari"),Ot=ut("phantom"),Bt="OTransition"in me,ar=navigator.platform.indexOf("Win")===0,Dn=xe&&"transition"in me,sr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!se,si="MozPerspective"in me,Hn=!window.L_DISABLE_3D&&(Dn||sr||si)&&!Bt&&!Ot,nn=typeof orientation<"u"||ut("mobile"),Jo=nn&&rt,Xo=nn&&sr,Xs=!window.PointerEvent&&window.MSPointerEvent,el=!!(window.PointerEvent||Xs),tl="ontouchstart"in window||!!window.TouchEvent,Vc=!window.L_NO_TOUCH&&(tl||el),Kc=nn&&we,qc=nn&&Be,$i=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Yc=function(){var i=!1;try{var s=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",g,s),window.removeEventListener("testPassiveEventSupport",g,s)}catch{}return i}(),Qc=function(){return!!document.createElement("canvas").getContext}(),oe=!!(document.createElementNS&&re("svg").createSVGRect),Pe=!!oe&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Te=!oe&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var s=i.firstChild;return s.style.behavior="url(#default#VML)",s&&typeof s.adj=="object"}catch{return!1}}(),it=navigator.platform.indexOf("Mac")===0,Vt=navigator.platform.indexOf("Linux")===0;function ut(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var le={ie:xe,ielt9:be,edge:Ke,webkit:rt,android:ee,android23:se,androidStock:_e,opera:we,chrome:ke,gecko:Be,safari:St,phantom:Ot,opera12:Bt,win:ar,ie3d:Dn,webkit3d:sr,gecko3d:si,any3d:Hn,mobile:nn,mobileWebkit:Jo,mobileWebkit3d:Xo,msPointer:Xs,pointer:el,touch:Vc,touchNative:tl,mobileOpera:Kc,mobileGecko:qc,retina:$i,passiveEvents:Yc,canvas:Qc,svg:oe,vml:Te,inlineSvg:Pe,mac:it,linux:Vt},jt=le.msPointer?"MSPointerDown":"pointerdown",Vm=le.msPointer?"MSPointerMove":"pointermove",Km=le.msPointer?"MSPointerUp":"pointerup",qm=le.msPointer?"MSPointerCancel":"pointercancel",Jc={touchstart:jt,touchmove:Vm,touchend:Km,touchcancel:qm},Ym={touchstart:m2,touchmove:nl,touchend:nl,touchcancel:nl},Hi={},Qm=!1;function c2(i,s,d){return s==="touchstart"&&p2(),Ym[s]?(d=Ym[s].bind(this,d),i.addEventListener(Jc[s],d,!1),d):(console.warn("wrong event specified:",s),g)}function d2(i,s,d){if(!Jc[s]){console.warn("wrong event specified:",s);return}i.removeEventListener(Jc[s],d,!1)}function f2(i){Hi[i.pointerId]=i}function h2(i){Hi[i.pointerId]&&(Hi[i.pointerId]=i)}function Jm(i){delete Hi[i.pointerId]}function p2(){Qm||(document.addEventListener(jt,f2,!0),document.addEventListener(Vm,h2,!0),document.addEventListener(Km,Jm,!0),document.addEventListener(qm,Jm,!0),Qm=!0)}function nl(i,s){if(s.pointerType!==(s.MSPOINTER_TYPE_MOUSE||"mouse")){s.touches=[];for(var d in Hi)s.touches.push(Hi[d]);s.changedTouches=[s],i(s)}}function m2(i,s){s.MSPOINTER_TYPE_TOUCH&&s.pointerType===s.MSPOINTER_TYPE_TOUCH&&Ct(s),nl(i,s)}function g2(i){var s={},d,m;for(m in i)d=i[m],s[m]=d&&d.bind?d.bind(i):d;return i=s,s.type="dblclick",s.detail=2,s.isTrusted=!1,s._simulated=!0,s}var v2=200;function y2(i,s){i.addEventListener("dblclick",s);var d=0,m;function _(P){if(P.detail!==1){m=P.detail;return}if(!(P.pointerType==="mouse"||P.sourceCapabilities&&!P.sourceCapabilities.firesTouchEvents)){var O=rg(P);if(!(O.some(function(W){return W instanceof HTMLLabelElement&&W.attributes.for})&&!O.some(function(W){return W instanceof HTMLInputElement||W instanceof HTMLSelectElement}))){var $=Date.now();$-d<=v2?(m++,m===2&&s(g2(P))):m=1,d=$}}}return i.addEventListener("click",_),{dblclick:s,simDblclick:_}}function _2(i,s){i.removeEventListener("dblclick",s.dblclick),i.removeEventListener("click",s.simDblclick)}var Xc=ol(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ea=ol(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Xm=ea==="webkitTransition"||ea==="OTransition"?ea+"End":"transitionend";function eg(i){return typeof i=="string"?document.getElementById(i):i}function ta(i,s){var d=i.style[s]||i.currentStyle&&i.currentStyle[s];if((!d||d==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(i,null);d=m?m[s]:null}return d==="auto"?null:d}function je(i,s,d){var m=document.createElement(i);return m.className=s||"",d&&d.appendChild(m),m}function Qe(i){var s=i.parentNode;s&&s.removeChild(i)}function rl(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Zi(i){var s=i.parentNode;s&&s.lastChild!==i&&s.appendChild(i)}function Gi(i){var s=i.parentNode;s&&s.firstChild!==i&&s.insertBefore(i,s.firstChild)}function ed(i,s){if(i.classList!==void 0)return i.classList.contains(s);var d=il(i);return d.length>0&&new RegExp("(^|\\s)"+s+"(\\s|$)").test(d)}function Ee(i,s){if(i.classList!==void 0)for(var d=w(s),m=0,_=d.length;m<_;m++)i.classList.add(d[m]);else if(!ed(i,s)){var P=il(i);td(i,(P?P+" ":"")+s)}}function at(i,s){i.classList!==void 0?i.classList.remove(s):td(i,y((" "+il(i)+" ").replace(" "+s+" "," ")))}function td(i,s){i.className.baseVal===void 0?i.className=s:i.className.baseVal=s}function il(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function vn(i,s){"opacity"in i.style?i.style.opacity=s:"filter"in i.style&&w2(i,s)}function w2(i,s){var d=!1,m="DXImageTransform.Microsoft.Alpha";try{d=i.filters.item(m)}catch{if(s===1)return}s=Math.round(s*100),d?(d.Enabled=s!==100,d.Opacity=s):i.style.filter+=" progid:"+m+"(opacity="+s+")"}function ol(i){for(var s=document.documentElement.style,d=0;d<i.length;d++)if(i[d]in s)return i[d];return!1}function li(i,s,d){var m=s||new B(0,0);i.style[Xc]=(le.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(d?" scale("+d+")":"")}function ct(i,s){i._leaflet_pos=s,le.any3d?li(i,s):(i.style.left=s.x+"px",i.style.top=s.y+"px")}function ui(i){return i._leaflet_pos||new B(0,0)}var na,ra,nd;if("onselectstart"in document)na=function(){Ce(window,"selectstart",Ct)},ra=function(){Ze(window,"selectstart",Ct)};else{var ia=ol(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);na=function(){if(ia){var i=document.documentElement.style;nd=i[ia],i[ia]="none"}},ra=function(){ia&&(document.documentElement.style[ia]=nd,nd=void 0)}}function rd(){Ce(window,"dragstart",Ct)}function id(){Ze(window,"dragstart",Ct)}var al,od;function ad(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(sl(),al=i,od=i.style.outlineStyle,i.style.outlineStyle="none",Ce(window,"keydown",sl))}function sl(){al&&(al.style.outlineStyle=od,al=void 0,od=void 0,Ze(window,"keydown",sl))}function tg(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function sd(i){var s=i.getBoundingClientRect();return{x:s.width/i.offsetWidth||1,y:s.height/i.offsetHeight||1,boundingClientRect:s}}var x2={__proto__:null,TRANSFORM:Xc,TRANSITION:ea,TRANSITION_END:Xm,get:eg,getStyle:ta,create:je,remove:Qe,empty:rl,toFront:Zi,toBack:Gi,hasClass:ed,addClass:Ee,removeClass:at,setClass:td,getClass:il,setOpacity:vn,testProp:ol,setTransform:li,setPosition:ct,getPosition:ui,get disableTextSelection(){return na},get enableTextSelection(){return ra},disableImageDrag:rd,enableImageDrag:id,preventOutline:ad,restoreOutline:sl,getSizedParentNode:tg,getScale:sd};function Ce(i,s,d,m){if(s&&typeof s=="object")for(var _ in s)ud(i,_,s[_],d);else{s=w(s);for(var P=0,O=s.length;P<O;P++)ud(i,s[P],d,m)}return this}var Zn="_leaflet_events";function Ze(i,s,d,m){if(arguments.length===1)ng(i),delete i[Zn];else if(s&&typeof s=="object")for(var _ in s)cd(i,_,s[_],d);else if(s=w(s),arguments.length===2)ng(i,function($){return C(s,$)!==-1});else for(var P=0,O=s.length;P<O;P++)cd(i,s[P],d,m);return this}function ng(i,s){for(var d in i[Zn]){var m=d.split(/\d/)[0];(!s||s(m))&&cd(i,m,null,null,d)}}var ld={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ud(i,s,d,m){var _=s+c(d)+(m?"_"+c(m):"");if(i[Zn]&&i[Zn][_])return this;var P=function($){return d.call(m||i,$||window.event)},O=P;!le.touchNative&&le.pointer&&s.indexOf("touch")===0?P=c2(i,s,P):le.touch&&s==="dblclick"?P=y2(i,P):"addEventListener"in i?s==="touchstart"||s==="touchmove"||s==="wheel"||s==="mousewheel"?i.addEventListener(ld[s]||s,P,le.passiveEvents?{passive:!1}:!1):s==="mouseenter"||s==="mouseleave"?(P=function($){$=$||window.event,fd(i,$)&&O($)},i.addEventListener(ld[s],P,!1)):i.addEventListener(s,O,!1):i.attachEvent("on"+s,P),i[Zn]=i[Zn]||{},i[Zn][_]=P}function cd(i,s,d,m,_){_=_||s+c(d)+(m?"_"+c(m):"");var P=i[Zn]&&i[Zn][_];if(!P)return this;!le.touchNative&&le.pointer&&s.indexOf("touch")===0?d2(i,s,P):le.touch&&s==="dblclick"?_2(i,P):"removeEventListener"in i?i.removeEventListener(ld[s]||s,P,!1):i.detachEvent("on"+s,P),i[Zn][_]=null}function ci(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function dd(i){return ud(i,"wheel",ci),this}function oa(i){return Ce(i,"mousedown touchstart dblclick contextmenu",ci),i._leaflet_disable_click=!0,this}function Ct(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function di(i){return Ct(i),ci(i),this}function rg(i){if(i.composedPath)return i.composedPath();for(var s=[],d=i.target;d;)s.push(d),d=d.parentNode;return s}function ig(i,s){if(!s)return new B(i.clientX,i.clientY);var d=sd(s),m=d.boundingClientRect;return new B((i.clientX-m.left)/d.x-s.clientLeft,(i.clientY-m.top)/d.y-s.clientTop)}var b2=le.linux&&le.chrome?window.devicePixelRatio:le.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function og(i){return le.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/b2:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function fd(i,s){var d=s.relatedTarget;if(!d)return!0;try{for(;d&&d!==i;)d=d.parentNode}catch{return!1}return d!==i}var S2={__proto__:null,on:Ce,off:Ze,stopPropagation:ci,disableScrollPropagation:dd,disableClickPropagation:oa,preventDefault:Ct,stop:di,getPropagationPath:rg,getMousePosition:ig,getWheelDelta:og,isExternalTarget:fd,addListener:Ce,removeListener:Ze},ag=te.extend({run:function(i,s,d,m){this.stop(),this._el=i,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=ui(i),this._offset=s.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=R(this._animate,this),this._step()},_step:function(i){var s=+new Date-this._startTime,d=this._duration*1e3;s<d?this._runFrame(this._easeOut(s/d),i):(this._runFrame(1),this._complete())},_runFrame:function(i,s){var d=this._startPos.add(this._offset.multiplyBy(i));s&&d._round(),ct(this._el,d),this.fire("step")},_complete:function(){V(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Ae=te.extend({options:{crs:bt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,s){s=E(this,s),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),s.maxBounds&&this.setMaxBounds(s.maxBounds),s.zoom!==void 0&&(this._zoom=this._limitZoom(s.zoom)),s.center&&s.zoom!==void 0&&this.setView(Q(s.center),s.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ea&&le.any3d&&!le.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ce(this._proxy,Xm,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,s,d){if(s=s===void 0?this._zoom:this._limitZoom(s),i=this._limitCenter(Q(i),s,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=o({animate:d.animate},d.zoom),d.pan=o({animate:d.animate,duration:d.duration},d.pan));var m=this._zoom!==s?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,s,d.zoom):this._tryAnimatedPan(i,d.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(i,s,d.pan&&d.pan.noMoveStart),this},setZoom:function(i,s){return this._loaded?this.setView(this.getCenter(),i,{zoom:s}):(this._zoom=i,this)},zoomIn:function(i,s){return i=i||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,s)},zoomOut:function(i,s){return i=i||(le.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,s)},setZoomAround:function(i,s,d){var m=this.getZoomScale(s),_=this.getSize().divideBy(2),P=i instanceof B?i:this.latLngToContainerPoint(i),O=P.subtract(_).multiplyBy(1-1/m),$=this.containerPointToLatLng(_.add(O));return this.setView($,s,{zoom:d})},_getBoundsCenterZoom:function(i,s){s=s||{},i=i.getBounds?i.getBounds():K(i);var d=k(s.paddingTopLeft||s.padding||[0,0]),m=k(s.paddingBottomRight||s.padding||[0,0]),_=this.getBoundsZoom(i,!1,d.add(m));if(_=typeof s.maxZoom=="number"?Math.min(s.maxZoom,_):_,_===1/0)return{center:i.getCenter(),zoom:_};var P=m.subtract(d).divideBy(2),O=this.project(i.getSouthWest(),_),$=this.project(i.getNorthEast(),_),W=this.unproject(O.add($).divideBy(2).add(P),_);return{center:W,zoom:_}},fitBounds:function(i,s){if(i=K(i),!i.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(i,s);return this.setView(d.center,d.zoom,s)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,s){return this.setView(i,this._zoom,{pan:s})},panBy:function(i,s){if(i=k(i).round(),s=s||{},!i.x&&!i.y)return this.fire("moveend");if(s.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ag,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),s.noMoveStart||this.fire("movestart"),s.animate!==!1){Ee(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,d,s.duration||.25,s.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,s,d){if(d=d||{},d.animate===!1||!le.any3d)return this.setView(i,s,d);this._stop();var m=this.project(this.getCenter()),_=this.project(i),P=this.getSize(),O=this._zoom;i=Q(i),s=s===void 0?O:s;var $=Math.max(P.x,P.y),W=$*this.getZoomScale(O,s),X=_.distanceTo(m)||1,ue=1.42,ye=ue*ue;function Ne(dt){var _l=dt?-1:1,dS=dt?W:$,fS=W*W-$*$+_l*ye*ye*X*X,hS=2*dS*ye*X,Sd=fS/hS,Fg=Math.sqrt(Sd*Sd+1)-Sd,pS=Fg<1e-9?-18:Math.log(Fg);return pS}function zt(dt){return(Math.exp(dt)-Math.exp(-dt))/2}function mt(dt){return(Math.exp(dt)+Math.exp(-dt))/2}function _n(dt){return zt(dt)/mt(dt)}var Kt=Ne(0);function Qi(dt){return $*(mt(Kt)/mt(Kt+ue*dt))}function sS(dt){return $*(mt(Kt)*_n(Kt+ue*dt)-zt(Kt))/ye}function lS(dt){return 1-Math.pow(1-dt,1.5)}var uS=Date.now(),jg=(Ne(1)-Kt)/ue,cS=d.duration?1e3*d.duration:1e3*jg*.8;function zg(){var dt=(Date.now()-uS)/cS,_l=lS(dt)*jg;dt<=1?(this._flyToFrame=R(zg,this),this._move(this.unproject(m.add(_.subtract(m).multiplyBy(sS(_l)/X)),O),this.getScaleZoom($/Qi(_l),O),{flyTo:!0})):this._move(i,s)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),zg.call(this),this},flyToBounds:function(i,s){var d=this._getBoundsCenterZoom(i,s);return this.flyTo(d.center,d.zoom,s)},setMaxBounds:function(i){return i=K(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var s=this.options.minZoom;return this.options.minZoom=i,this._loaded&&s!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var s=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&s!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,s){this._enforcingBounds=!0;var d=this.getCenter(),m=this._limitCenter(d,this._zoom,K(i));return d.equals(m)||this.panTo(m,s),this._enforcingBounds=!1,this},panInside:function(i,s){s=s||{};var d=k(s.paddingTopLeft||s.padding||[0,0]),m=k(s.paddingBottomRight||s.padding||[0,0]),_=this.project(this.getCenter()),P=this.project(i),O=this.getPixelBounds(),$=G([O.min.add(d),O.max.subtract(m)]),W=$.getSize();if(!$.contains(P)){this._enforcingBounds=!0;var X=P.subtract($.getCenter()),ue=$.extend(P).getSize().subtract(W);_.x+=X.x<0?-ue.x:ue.x,_.y+=X.y<0?-ue.y:ue.y,this.panTo(this.unproject(_),s),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=o({animate:!1,pan:!0},i===!0?{animate:!0}:i);var s=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),m=s.divideBy(2).round(),_=d.divideBy(2).round(),P=m.subtract(_);return!P.x&&!P.y?this:(i.animate&&i.pan?this.panBy(P):(i.pan&&this._rawPanBy(P),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:s,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=o({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var s=l(this._handleGeolocationResponse,this),d=l(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(s,d,i):navigator.geolocation.getCurrentPosition(s,d,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var s=i.code,d=i.message||(s===1?"permission denied":s===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:s,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var s=i.coords.latitude,d=i.coords.longitude,m=new ne(s,d),_=m.toBounds(i.coords.accuracy*2),P=this._locateOptions;if(P.setView){var O=this.getBoundsZoom(_);this.setView(m,P.maxZoom?Math.min(O,P.maxZoom):O)}var $={latlng:m,bounds:_,timestamp:i.timestamp};for(var W in i.coords)typeof i.coords[W]=="number"&&($[W]=i.coords[W]);this.fire("locationfound",$)}},addHandler:function(i,s){if(!s)return this;var d=this[i]=new s(this);return this._handlers.push(d),this.options[i]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Qe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(V(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)Qe(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,s){var d="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),m=je("div",d,s||this._mapPane);return i&&(this._panes[i]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),s=this.unproject(i.getBottomLeft()),d=this.unproject(i.getTopRight());return new H(s,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,s,d){i=K(i),d=k(d||[0,0]);var m=this.getZoom()||0,_=this.getMinZoom(),P=this.getMaxZoom(),O=i.getNorthWest(),$=i.getSouthEast(),W=this.getSize().subtract(d),X=G(this.project($,m),this.project(O,m)).getSize(),ue=le.any3d?this.options.zoomSnap:1,ye=W.x/X.x,Ne=W.y/X.y,zt=s?Math.max(ye,Ne):Math.min(ye,Ne);return m=this.getScaleZoom(zt,m),ue&&(m=Math.round(m/(ue/100))*(ue/100),m=s?Math.ceil(m/ue)*ue:Math.floor(m/ue)*ue),Math.max(_,Math.min(P,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new B(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,s){var d=this._getTopLeftPoint(i,s);return new z(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,s){var d=this.options.crs;return s=s===void 0?this._zoom:s,d.scale(i)/d.scale(s)},getScaleZoom:function(i,s){var d=this.options.crs;s=s===void 0?this._zoom:s;var m=d.zoom(i*d.scale(s));return isNaN(m)?1/0:m},project:function(i,s){return s=s===void 0?this._zoom:s,this.options.crs.latLngToPoint(Q(i),s)},unproject:function(i,s){return s=s===void 0?this._zoom:s,this.options.crs.pointToLatLng(k(i),s)},layerPointToLatLng:function(i){var s=k(i).add(this.getPixelOrigin());return this.unproject(s)},latLngToLayerPoint:function(i){var s=this.project(Q(i))._round();return s._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(Q(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(K(i))},distance:function(i,s){return this.options.crs.distance(Q(i),Q(s))},containerPointToLayerPoint:function(i){return k(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return k(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var s=this.containerPointToLayerPoint(k(i));return this.layerPointToLatLng(s)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Q(i)))},mouseEventToContainerPoint:function(i){return ig(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var s=this._container=eg(i);if(s){if(s._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ce(s,"scroll",this._onScroll,this),this._containerId=c(s)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&le.any3d,Ee(i,"leaflet-container"+(le.touch?" leaflet-touch":"")+(le.retina?" leaflet-retina":"")+(le.ielt9?" leaflet-oldie":"")+(le.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var s=ta(i,"position");s!=="absolute"&&s!=="relative"&&s!=="fixed"&&s!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ct(this._mapPane,new B(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ee(i.markerPane,"leaflet-zoom-hide"),Ee(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,s,d){ct(this._mapPane,new B(0,0));var m=!this._loaded;this._loaded=!0,s=this._limitZoom(s),this.fire("viewprereset");var _=this._zoom!==s;this._moveStart(_,d)._move(i,s)._moveEnd(_),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(i,s){return i&&this.fire("zoomstart"),s||this.fire("movestart"),this},_move:function(i,s,d,m){s===void 0&&(s=this._zoom);var _=this._zoom!==s;return this._zoom=s,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),m?d&&d.pinch&&this.fire("zoom",d):((_||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return V(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){ct(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[c(this._container)]=this;var s=i?Ze:Ce;s(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&s(window,"resize",this._onResize,this),le.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){V(this._resizeRequest),this._resizeRequest=R(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,s){for(var d=[],m,_=s==="mouseout"||s==="mouseover",P=i.target||i.srcElement,O=!1;P;){if(m=this._targets[c(P)],m&&(s==="click"||s==="preclick")&&this._draggableMoved(m)){O=!0;break}if(m&&m.listens(s,!0)&&(_&&!fd(P,i)||(d.push(m),_))||P===this._container)break;P=P.parentNode}return!d.length&&!O&&!_&&this.listens(s,!0)&&(d=[this]),d},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var s=i.target||i.srcElement;if(!(!this._loaded||s._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(s))){var d=i.type;d==="mousedown"&&ad(s),this._fireDOMEvent(i,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,s,d){if(i.type==="click"){var m=o({},i);m.type="preclick",this._fireDOMEvent(m,m.type,d)}var _=this._findEventTargets(i,s);if(d){for(var P=[],O=0;O<d.length;O++)d[O].listens(s,!0)&&P.push(d[O]);_=P.concat(_)}if(_.length){s==="contextmenu"&&Ct(i);var $=_[0],W={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var X=$.getLatLng&&(!$._radius||$._radius<=10);W.containerPoint=X?this.latLngToContainerPoint($.getLatLng()):this.mouseEventToContainerPoint(i),W.layerPoint=this.containerPointToLayerPoint(W.containerPoint),W.latlng=X?$.getLatLng():this.layerPointToLatLng(W.layerPoint)}for(O=0;O<_.length;O++)if(_[O].fire(s,W,!0),W.originalEvent._stopped||_[O].options.bubblingMouseEvents===!1&&C(this._mouseEvents,s)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,s=this._handlers.length;i<s;i++)this._handlers[i].disable()},whenReady:function(i,s){return this._loaded?i.call(s||this,{target:this}):this.on("load",i,s),this},_getMapPanePos:function(){return ui(this._mapPane)||new B(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,s){var d=i&&s!==void 0?this._getNewPixelOrigin(i,s):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,s){var d=this.getSize()._divideBy(2);return this.project(i,s)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,s,d){var m=this._getNewPixelOrigin(d,s);return this.project(i,s)._subtract(m)},_latLngBoundsToNewLayerBounds:function(i,s,d){var m=this._getNewPixelOrigin(d,s);return G([this.project(i.getSouthWest(),s)._subtract(m),this.project(i.getNorthWest(),s)._subtract(m),this.project(i.getSouthEast(),s)._subtract(m),this.project(i.getNorthEast(),s)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,s,d){if(!d)return i;var m=this.project(i,s),_=this.getSize().divideBy(2),P=new z(m.subtract(_),m.add(_)),O=this._getBoundsOffset(P,d,s);return Math.abs(O.x)<=1&&Math.abs(O.y)<=1?i:this.unproject(m.add(O),s)},_limitOffset:function(i,s){if(!s)return i;var d=this.getPixelBounds(),m=new z(d.min.add(i),d.max.add(i));return i.add(this._getBoundsOffset(m,s))},_getBoundsOffset:function(i,s,d){var m=G(this.project(s.getNorthEast(),d),this.project(s.getSouthWest(),d)),_=m.min.subtract(i.min),P=m.max.subtract(i.max),O=this._rebound(_.x,-P.x),$=this._rebound(_.y,-P.y);return new B(O,$)},_rebound:function(i,s){return i+s>0?Math.round(i-s)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(s))},_limitZoom:function(i){var s=this.getMinZoom(),d=this.getMaxZoom(),m=le.any3d?this.options.zoomSnap:1;return m&&(i=Math.round(i/m)*m),Math.max(s,Math.min(d,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){at(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,s){var d=this._getCenterOffset(i)._trunc();return(s&&s.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,s),!0)},_createAnimProxy:function(){var i=this._proxy=je("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(s){var d=Xc,m=this._proxy.style[d];li(this._proxy,this.project(s.center,s.zoom),this.getZoomScale(s.zoom,1)),m===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Qe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),s=this.getZoom();li(this._proxy,this.project(i,s),this.getZoomScale(s,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,s,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(s-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(s),_=this._getCenterOffset(i)._divideBy(1-1/m);return d.animate!==!0&&!this.getSize().contains(_)?!1:(R(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(i,s,!0)},this),!0)},_animateZoom:function(i,s,d,m){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=s,Ee(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:s,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&at(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function C2(i,s){return new Ae(i,s)}var Ln=q.extend({options:{position:"topright"},initialize:function(i){E(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var s=this._map;return s&&s.removeControl(this),this.options.position=i,s&&s.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var s=this._container=this.onAdd(i),d=this.getPosition(),m=i._controlCorners[d];return Ee(s,"leaflet-control"),d.indexOf("bottom")!==-1?m.insertBefore(s,m.firstChild):m.appendChild(s),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Qe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),aa=function(i){return new Ln(i)};Ae.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},s="leaflet-",d=this._controlContainer=je("div",s+"control-container",this._container);function m(_,P){var O=s+_+" "+s+P;i[_+P]=je("div",O,d)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)Qe(this._controlCorners[i]);Qe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var sg=Ln.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,s,d,m){return d<m?-1:m<d?1:0}},initialize:function(i,s,d){E(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in i)this._addLayer(i[m],m);for(m in s)this._addLayer(s[m],m,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return Ln.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,s){return this._addLayer(i,s),this._map?this._update():this},addOverlay:function(i,s){return this._addLayer(i,s,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var s=this._getLayer(c(i));return s&&this._layers.splice(this._layers.indexOf(s),1),this._map?this._update():this},expand:function(){Ee(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(Ee(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):at(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return at(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",s=this._container=je("div",i),d=this.options.collapsed;s.setAttribute("aria-haspopup",!0),oa(s),dd(s);var m=this._section=je("section",i+"-list");d&&(this._map.on("click",this.collapse,this),Ce(s,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=je("a",i+"-toggle",s);_.href="#",_.title="Layers",_.setAttribute("role","button"),Ce(_,{keydown:function(P){P.keyCode===13&&this._expandSafely()},click:function(P){Ct(P),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=je("div",i+"-base",m),this._separator=je("div",i+"-separator",m),this._overlaysList=je("div",i+"-overlays",m),s.appendChild(m)},_getLayer:function(i){for(var s=0;s<this._layers.length;s++)if(this._layers[s]&&c(this._layers[s].layer)===i)return this._layers[s]},_addLayer:function(i,s,d){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:s,overlay:d}),this.options.sortLayers&&this._layers.sort(l(function(m,_){return this.options.sortFunction(m.layer,_.layer,m.name,_.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;rl(this._baseLayersList),rl(this._overlaysList),this._layerControlInputs=[];var i,s,d,m,_=0;for(d=0;d<this._layers.length;d++)m=this._layers[d],this._addItem(m),s=s||m.overlay,i=i||!m.overlay,_+=m.overlay?0:1;return this.options.hideSingleBase&&(i=i&&_>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=s&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var s=this._getLayer(c(i.target)),d=s.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;d&&this._map.fire(d,s)},_createRadioElement:function(i,s){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(s?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=d,m.firstChild},_addItem:function(i){var s=document.createElement("label"),d=this._map.hasLayer(i.layer),m;i.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=d):m=this._createRadioElement("leaflet-base-layers_"+c(this),d),this._layerControlInputs.push(m),m.layerId=c(i.layer),Ce(m,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+i.name;var P=document.createElement("span");s.appendChild(P),P.appendChild(m),P.appendChild(_);var O=i.overlay?this._overlaysList:this._baseLayersList;return O.appendChild(s),this._checkDisabledLayers(),s},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,s,d,m=[],_=[];this._handlingClick=!0;for(var P=i.length-1;P>=0;P--)s=i[P],d=this._getLayer(s.layerId).layer,s.checked?m.push(d):s.checked||_.push(d);for(P=0;P<_.length;P++)this._map.hasLayer(_[P])&&this._map.removeLayer(_[P]);for(P=0;P<m.length;P++)this._map.hasLayer(m[P])||this._map.addLayer(m[P]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,s,d,m=this._map.getZoom(),_=i.length-1;_>=0;_--)s=i[_],d=this._getLayer(s.layerId).layer,s.disabled=d.options.minZoom!==void 0&&m<d.options.minZoom||d.options.maxZoom!==void 0&&m>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,Ce(i,"click",Ct),this.expand();var s=this;setTimeout(function(){Ze(i,"click",Ct),s._preventClick=!1})}}),E2=function(i,s,d){return new sg(i,s,d)},hd=Ln.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var s="leaflet-control-zoom",d=je("div",s+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,s+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,s+"-out",d,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,s,d,m,_){var P=je("a",d,m);return P.innerHTML=i,P.href="#",P.title=s,P.setAttribute("role","button"),P.setAttribute("aria-label",s),oa(P),Ce(P,"click",di),Ce(P,"click",_,this),Ce(P,"click",this._refocusOnMap,this),P},_updateDisabled:function(){var i=this._map,s="leaflet-disabled";at(this._zoomInButton,s),at(this._zoomOutButton,s),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(Ee(this._zoomOutButton,s),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(Ee(this._zoomInButton,s),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ae.mergeOptions({zoomControl:!0}),Ae.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new hd,this.addControl(this.zoomControl))});var P2=function(i){return new hd(i)},lg=Ln.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var s="leaflet-control-scale",d=je("div",s),m=this.options;return this._addScales(m,s+"-line",d),i.on(m.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),d},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,s,d){i.metric&&(this._mScale=je("div",s,d)),i.imperial&&(this._iScale=je("div",s,d))},_update:function(){var i=this._map,s=i.getSize().y/2,d=i.distance(i.containerPointToLatLng([0,s]),i.containerPointToLatLng([this.options.maxWidth,s]));this._updateScales(d)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var s=this._getRoundNum(i),d=s<1e3?s+" m":s/1e3+" km";this._updateScale(this._mScale,d,s/i)},_updateImperial:function(i){var s=i*3.2808399,d,m,_;s>5280?(d=s/5280,m=this._getRoundNum(d),this._updateScale(this._iScale,m+" mi",m/d)):(_=this._getRoundNum(s),this._updateScale(this._iScale,_+" ft",_/s))},_updateScale:function(i,s,d){i.style.width=Math.round(this.options.maxWidth*d)+"px",i.innerHTML=s},_getRoundNum:function(i){var s=Math.pow(10,(Math.floor(i)+"").length-1),d=i/s;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,s*d}}),N2=function(i){return new lg(i)},k2='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',pd=Ln.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(le.inlineSvg?k2+" ":"")+"Leaflet</a>"},initialize:function(i){E(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=je("div","leaflet-control-attribution"),oa(this._container);for(var s in i._layers)i._layers[s].getAttribution&&this.addAttribution(i._layers[s].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var s in this._attributions)this._attributions[s]&&i.push(s);var d=[];this.options.prefix&&d.push(this.options.prefix),i.length&&d.push(i.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Ae.mergeOptions({attributionControl:!0}),Ae.addInitHook(function(){this.options.attributionControl&&new pd().addTo(this)});var I2=function(i){return new pd(i)};Ln.Layers=sg,Ln.Zoom=hd,Ln.Scale=lg,Ln.Attribution=pd,aa.layers=E2,aa.zoom=P2,aa.scale=N2,aa.attribution=I2;var Gn=q.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Gn.addTo=function(i,s){return i.addHandler(s,this),this};var T2={Events:Y},ug=le.touch?"touchstart mousedown":"mousedown",Er=te.extend({options:{clickTolerance:3},initialize:function(i,s,d,m){E(this,m),this._element=i,this._dragStartTarget=s||i,this._preventOutline=d},enable:function(){this._enabled||(Ce(this._dragStartTarget,ug,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Er._dragging===this&&this.finishDrag(!0),Ze(this._dragStartTarget,ug,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!ed(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Er._dragging===this&&this.finishDrag();return}if(!(Er._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Er._dragging=this,this._preventOutline&&ad(this._element),rd(),na(),!this._moving)){this.fire("down");var s=i.touches?i.touches[0]:i,d=tg(this._element);this._startPoint=new B(s.clientX,s.clientY),this._startPos=ui(this._element),this._parentScale=sd(d);var m=i.type==="mousedown";Ce(document,m?"mousemove":"touchmove",this._onMove,this),Ce(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var s=i.touches&&i.touches.length===1?i.touches[0]:i,d=new B(s.clientX,s.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,Ct(i),this._moved||(this.fire("dragstart"),this._moved=!0,Ee(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ee(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),ct(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){at(document.body,"leaflet-dragging"),this._lastTarget&&(at(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ze(document,"mousemove touchmove",this._onMove,this),Ze(document,"mouseup touchend touchcancel",this._onUp,this),id(),ra();var s=this._moved&&this._moving;this._moving=!1,Er._dragging=!1,s&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function cg(i,s,d){var m,_=[1,4,2,8],P,O,$,W,X,ue,ye,Ne;for(P=0,ue=i.length;P<ue;P++)i[P]._code=fi(i[P],s);for($=0;$<4;$++){for(ye=_[$],m=[],P=0,ue=i.length,O=ue-1;P<ue;O=P++)W=i[P],X=i[O],W._code&ye?X._code&ye||(Ne=ll(X,W,ye,s,d),Ne._code=fi(Ne,s),m.push(Ne)):(X._code&ye&&(Ne=ll(X,W,ye,s,d),Ne._code=fi(Ne,s),m.push(Ne)),m.push(W));i=m}return i}function dg(i,s){var d,m,_,P,O,$,W,X,ue;if(!i||i.length===0)throw new Error("latlngs not passed");yn(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var ye=Q([0,0]),Ne=K(i),zt=Ne.getNorthWest().distanceTo(Ne.getSouthWest())*Ne.getNorthEast().distanceTo(Ne.getNorthWest());zt<1700&&(ye=md(i));var mt=i.length,_n=[];for(d=0;d<mt;d++){var Kt=Q(i[d]);_n.push(s.project(Q([Kt.lat-ye.lat,Kt.lng-ye.lng])))}for($=W=X=0,d=0,m=mt-1;d<mt;m=d++)_=_n[d],P=_n[m],O=_.y*P.x-P.y*_.x,W+=(_.x+P.x)*O,X+=(_.y+P.y)*O,$+=O*3;$===0?ue=_n[0]:ue=[W/$,X/$];var Qi=s.unproject(k(ue));return Q([Qi.lat+ye.lat,Qi.lng+ye.lng])}function md(i){for(var s=0,d=0,m=0,_=0;_<i.length;_++){var P=Q(i[_]);s+=P.lat,d+=P.lng,m++}return Q([s/m,d/m])}var D2={__proto__:null,clipPolygon:cg,polygonCenter:dg,centroid:md};function fg(i,s){if(!s||!i.length)return i.slice();var d=s*s;return i=M2(i,d),i=A2(i,d),i}function hg(i,s,d){return Math.sqrt(sa(i,s,d,!0))}function L2(i,s,d){return sa(i,s,d)}function A2(i,s){var d=i.length,m=typeof Uint8Array<"u"?Uint8Array:Array,_=new m(d);_[0]=_[d-1]=1,gd(i,_,s,0,d-1);var P,O=[];for(P=0;P<d;P++)_[P]&&O.push(i[P]);return O}function gd(i,s,d,m,_){var P=0,O,$,W;for($=m+1;$<=_-1;$++)W=sa(i[$],i[m],i[_],!0),W>P&&(O=$,P=W);P>d&&(s[O]=1,gd(i,s,d,m,O),gd(i,s,d,O,_))}function M2(i,s){for(var d=[i[0]],m=1,_=0,P=i.length;m<P;m++)R2(i[m],i[_])>s&&(d.push(i[m]),_=m);return _<P-1&&d.push(i[P-1]),d}var pg;function mg(i,s,d,m,_){var P=m?pg:fi(i,d),O=fi(s,d),$,W,X;for(pg=O;;){if(!(P|O))return[i,s];if(P&O)return!1;$=P||O,W=ll(i,s,$,d,_),X=fi(W,d),$===P?(i=W,P=X):(s=W,O=X)}}function ll(i,s,d,m,_){var P=s.x-i.x,O=s.y-i.y,$=m.min,W=m.max,X,ue;return d&8?(X=i.x+P*(W.y-i.y)/O,ue=W.y):d&4?(X=i.x+P*($.y-i.y)/O,ue=$.y):d&2?(X=W.x,ue=i.y+O*(W.x-i.x)/P):d&1&&(X=$.x,ue=i.y+O*($.x-i.x)/P),new B(X,ue,_)}function fi(i,s){var d=0;return i.x<s.min.x?d|=1:i.x>s.max.x&&(d|=2),i.y<s.min.y?d|=4:i.y>s.max.y&&(d|=8),d}function R2(i,s){var d=s.x-i.x,m=s.y-i.y;return d*d+m*m}function sa(i,s,d,m){var _=s.x,P=s.y,O=d.x-_,$=d.y-P,W=O*O+$*$,X;return W>0&&(X=((i.x-_)*O+(i.y-P)*$)/W,X>1?(_=d.x,P=d.y):X>0&&(_+=O*X,P+=$*X)),O=i.x-_,$=i.y-P,m?O*O+$*$:new B(_,P)}function yn(i){return!S(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function gg(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),yn(i)}function vg(i,s){var d,m,_,P,O,$,W,X;if(!i||i.length===0)throw new Error("latlngs not passed");yn(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var ue=Q([0,0]),ye=K(i),Ne=ye.getNorthWest().distanceTo(ye.getSouthWest())*ye.getNorthEast().distanceTo(ye.getNorthWest());Ne<1700&&(ue=md(i));var zt=i.length,mt=[];for(d=0;d<zt;d++){var _n=Q(i[d]);mt.push(s.project(Q([_n.lat-ue.lat,_n.lng-ue.lng])))}for(d=0,m=0;d<zt-1;d++)m+=mt[d].distanceTo(mt[d+1])/2;if(m===0)X=mt[0];else for(d=0,P=0;d<zt-1;d++)if(O=mt[d],$=mt[d+1],_=O.distanceTo($),P+=_,P>m){W=(P-m)/_,X=[$.x-W*($.x-O.x),$.y-W*($.y-O.y)];break}var Kt=s.unproject(k(X));return Q([Kt.lat+ue.lat,Kt.lng+ue.lng])}var O2={__proto__:null,simplify:fg,pointToSegmentDistance:hg,closestPointOnSegment:L2,clipSegment:mg,_getEdgeIntersection:ll,_getBitCode:fi,_sqClosestPointOnSegment:sa,isFlat:yn,_flat:gg,polylineCenter:vg},vd={project:function(i){return new B(i.lng,i.lat)},unproject:function(i){return new ne(i.y,i.x)},bounds:new z([-180,-90],[180,90])},yd={R:6378137,R_MINOR:6356752314245179e-9,bounds:new z([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var s=Math.PI/180,d=this.R,m=i.lat*s,_=this.R_MINOR/d,P=Math.sqrt(1-_*_),O=P*Math.sin(m),$=Math.tan(Math.PI/4-m/2)/Math.pow((1-O)/(1+O),P/2);return m=-d*Math.log(Math.max($,1e-10)),new B(i.lng*s*d,m)},unproject:function(i){for(var s=180/Math.PI,d=this.R,m=this.R_MINOR/d,_=Math.sqrt(1-m*m),P=Math.exp(-i.y/d),O=Math.PI/2-2*Math.atan(P),$=0,W=.1,X;$<15&&Math.abs(W)>1e-7;$++)X=_*Math.sin(O),X=Math.pow((1-X)/(1+X),_/2),W=Math.PI/2-2*Math.atan(P*X)-O,O+=W;return new ne(O*s,i.x*s/d)}},B2={__proto__:null,LonLat:vd,Mercator:yd,SphericalMercator:Oe},j2=o({},ve,{code:"EPSG:3395",projection:yd,transformation:function(){var i=.5/(Math.PI*yd.R);return nt(i,.5,-i,.5)}()}),yg=o({},ve,{code:"EPSG:4326",projection:vd,transformation:nt(1/180,1,-1/180,.5)}),z2=o({},ce,{projection:vd,transformation:nt(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,s){var d=s.lng-i.lng,m=s.lat-i.lat;return Math.sqrt(d*d+m*m)},infinite:!0});ce.Earth=ve,ce.EPSG3395=j2,ce.EPSG3857=bt,ce.EPSG900913=lt,ce.EPSG4326=yg,ce.Simple=z2;var An=te.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[c(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[c(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var s=i.target;if(s.hasLayer(this)){if(this._map=s,this._zoomAnimated=s._zoomAnimated,this.getEvents){var d=this.getEvents();s.on(d,this),this.once("remove",function(){s.off(d,this)},this)}this.onAdd(s),this.fire("add"),s.fire("layeradd",{layer:this})}}});Ae.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var s=c(i);return this._layers[s]?this:(this._layers[s]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var s=c(i);return this._layers[s]?(this._loaded&&i.onRemove(this),delete this._layers[s],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return c(i)in this._layers},eachLayer:function(i,s){for(var d in this._layers)i.call(s,this._layers[d]);return this},_addLayers:function(i){i=i?S(i)?i:[i]:[];for(var s=0,d=i.length;s<d;s++)this.addLayer(i[s])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[c(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var s=c(i);this._zoomBoundLayers[s]&&(delete this._zoomBoundLayers[s],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,s=-1/0,d=this._getZoomSpan();for(var m in this._zoomBoundLayers){var _=this._zoomBoundLayers[m].options;i=_.minZoom===void 0?i:Math.min(i,_.minZoom),s=_.maxZoom===void 0?s:Math.max(s,_.maxZoom)}this._layersMaxZoom=s===-1/0?void 0:s,this._layersMinZoom=i===1/0?void 0:i,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Wi=An.extend({initialize:function(i,s){E(this,s),this._layers={};var d,m;if(i)for(d=0,m=i.length;d<m;d++)this.addLayer(i[d])},addLayer:function(i){var s=this.getLayerId(i);return this._layers[s]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var s=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[s]&&this._map.removeLayer(this._layers[s]),delete this._layers[s],this},hasLayer:function(i){var s=typeof i=="number"?i:this.getLayerId(i);return s in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var s=Array.prototype.slice.call(arguments,1),d,m;for(d in this._layers)m=this._layers[d],m[i]&&m[i].apply(m,s);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,s){for(var d in this._layers)i.call(s,this._layers[d]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return c(i)}}),F2=function(i,s){return new Wi(i,s)},lr=Wi.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),Wi.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),Wi.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new H;for(var s in this._layers){var d=this._layers[s];i.extend(d.getBounds?d.getBounds():d.getLatLng())}return i}}),U2=function(i,s){return new lr(i,s)},Vi=q.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){E(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,s){var d=this._getIconUrl(i);if(!d){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(d,s&&s.tagName==="IMG"?s:null);return this._setIconStyles(m,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(i,s){var d=this.options,m=d[s+"Size"];typeof m=="number"&&(m=[m,m]);var _=k(m),P=k(s==="shadow"&&d.shadowAnchor||d.iconAnchor||_&&_.divideBy(2,!0));i.className="leaflet-marker-"+s+" "+(d.className||""),P&&(i.style.marginLeft=-P.x+"px",i.style.marginTop=-P.y+"px"),_&&(i.style.width=_.x+"px",i.style.height=_.y+"px")},_createImg:function(i,s){return s=s||document.createElement("img"),s.src=i,s},_getIconUrl:function(i){return le.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function $2(i){return new Vi(i)}var la=Vi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof la.imagePath!="string"&&(la.imagePath=this._detectIconPath()),(this.options.imagePath||la.imagePath)+Vi.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var s=function(d,m,_){var P=m.exec(d);return P&&P[_]};return i=s(i,/^url\((['"])?(.+)\1\)$/,2),i&&s(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=je("div","leaflet-default-icon-path",document.body),s=ta(i,"background-image")||ta(i,"backgroundImage");if(document.body.removeChild(i),s=this._stripUrl(s),s)return s;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),_g=Gn.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Er(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ee(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&at(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var s=this._marker,d=s._map,m=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,P=ui(s._icon),O=d.getPixelBounds(),$=d.getPixelOrigin(),W=G(O.min._subtract($).add(_),O.max._subtract($).subtract(_));if(!W.contains(P)){var X=k((Math.max(W.max.x,P.x)-W.max.x)/(O.max.x-W.max.x)-(Math.min(W.min.x,P.x)-W.min.x)/(O.min.x-W.min.x),(Math.max(W.max.y,P.y)-W.max.y)/(O.max.y-W.max.y)-(Math.min(W.min.y,P.y)-W.min.y)/(O.min.y-W.min.y)).multiplyBy(m);d.panBy(X,{animate:!1}),this._draggable._newPos._add(X),this._draggable._startPos._add(X),ct(s._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=R(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(V(this._panRequest),this._panRequest=R(this._adjustPan.bind(this,i)))},_onDrag:function(i){var s=this._marker,d=s._shadow,m=ui(s._icon),_=s._map.layerPointToLatLng(m);d&&ct(d,m),s._latlng=_,i.latlng=_,i.oldLatLng=this._oldLatLng,s.fire("move",i).fire("drag",i)},_onDragEnd:function(i){V(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),ul=An.extend({options:{icon:new la,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,s){E(this,s),this._latlng=Q(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var s=this._latlng;return this._latlng=Q(i),this.update(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,s="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=i.icon.createIcon(this._icon),m=!1;d!==this._icon&&(this._icon&&this._removeIcon(),m=!0,i.title&&(d.title=i.title),d.tagName==="IMG"&&(d.alt=i.alt||"")),Ee(d,s),i.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ce(d,"focus",this._panOnFocus,this);var _=i.icon.createShadow(this._shadow),P=!1;_!==this._shadow&&(this._removeShadow(),P=!0),_&&(Ee(_,s),_.alt=""),this._shadow=_,i.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&P&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ze(this._icon,"focus",this._panOnFocus,this),Qe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Qe(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&ct(this._icon,i),this._shadow&&ct(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var s=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(s)},_initInteraction:function(){if(this.options.interactive&&(Ee(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),_g)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new _g(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&vn(this._icon,i),this._shadow&&vn(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var s=this.options.icon.options,d=s.iconSize?k(s.iconSize):k(0,0),m=s.iconAnchor?k(s.iconAnchor):k(0,0);i.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:d.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function H2(i,s){return new ul(i,s)}var Pr=An.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return E(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),cl=Pr.extend({options:{fill:!0,radius:10},initialize:function(i,s){E(this,s),this._latlng=Q(i),this._radius=this.options.radius},setLatLng:function(i){var s=this._latlng;return this._latlng=Q(i),this.redraw(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var s=i&&i.radius||this._radius;return Pr.prototype.setStyle.call(this,i),this.setRadius(s),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,s=this._radiusY||i,d=this._clickTolerance(),m=[i+d,s+d];this._pxBounds=new z(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Z2(i,s){return new cl(i,s)}var _d=cl.extend({initialize:function(i,s,d){if(typeof s=="number"&&(s=o({},d,{radius:s})),E(this,s),this._latlng=Q(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new H(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Pr.prototype.setStyle,_project:function(){var i=this._latlng.lng,s=this._latlng.lat,d=this._map,m=d.options.crs;if(m.distance===ve.distance){var _=Math.PI/180,P=this._mRadius/ve.R/_,O=d.project([s+P,i]),$=d.project([s-P,i]),W=O.add($).divideBy(2),X=d.unproject(W).lat,ue=Math.acos((Math.cos(P*_)-Math.sin(s*_)*Math.sin(X*_))/(Math.cos(s*_)*Math.cos(X*_)))/_;(isNaN(ue)||ue===0)&&(ue=P/Math.cos(Math.PI/180*s)),this._point=W.subtract(d.getPixelOrigin()),this._radius=isNaN(ue)?0:W.x-d.project([X,i-ue]).x,this._radiusY=W.y-O.y}else{var ye=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(ye).x}this._updateBounds()}});function G2(i,s,d){return new _d(i,s,d)}var ur=Pr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,s){E(this,s),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var s=1/0,d=null,m=sa,_,P,O=0,$=this._parts.length;O<$;O++)for(var W=this._parts[O],X=1,ue=W.length;X<ue;X++){_=W[X-1],P=W[X];var ye=m(i,_,P,!0);ye<s&&(s=ye,d=m(i,_,P))}return d&&(d.distance=Math.sqrt(s)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vg(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,s){return s=s||this._defaultShape(),i=Q(i),s.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new H,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return yn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var s=[],d=yn(i),m=0,_=i.length;m<_;m++)d?(s[m]=Q(i[m]),this._bounds.extend(s[m])):s[m]=this._convertLatLngs(i[m]);return s},_project:function(){var i=new z;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),s=new B(i,i);this._rawPxBounds&&(this._pxBounds=new z([this._rawPxBounds.min.subtract(s),this._rawPxBounds.max.add(s)]))},_projectLatlngs:function(i,s,d){var m=i[0]instanceof ne,_=i.length,P,O;if(m){for(O=[],P=0;P<_;P++)O[P]=this._map.latLngToLayerPoint(i[P]),d.extend(O[P]);s.push(O)}else for(P=0;P<_;P++)this._projectLatlngs(i[P],s,d)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var s=this._parts,d,m,_,P,O,$,W;for(d=0,_=0,P=this._rings.length;d<P;d++)for(W=this._rings[d],m=0,O=W.length;m<O-1;m++)$=mg(W[m],W[m+1],i,m,!0),$&&(s[_]=s[_]||[],s[_].push($[0]),($[1]!==W[m+1]||m===O-2)&&(s[_].push($[1]),_++))}},_simplifyPoints:function(){for(var i=this._parts,s=this.options.smoothFactor,d=0,m=i.length;d<m;d++)i[d]=fg(i[d],s)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,s){var d,m,_,P,O,$,W=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(d=0,P=this._parts.length;d<P;d++)for($=this._parts[d],m=0,O=$.length,_=O-1;m<O;_=m++)if(!(!s&&m===0)&&hg(i,$[_],$[m])<=W)return!0;return!1}});function W2(i,s){return new ur(i,s)}ur._flat=gg;var Ki=ur.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return dg(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var s=ur.prototype._convertLatLngs.call(this,i),d=s.length;return d>=2&&s[0]instanceof ne&&s[0].equals(s[d-1])&&s.pop(),s},_setLatLngs:function(i){ur.prototype._setLatLngs.call(this,i),yn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return yn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,s=this.options.weight,d=new B(s,s);if(i=new z(i.min.subtract(d),i.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,_=this._rings.length,P;m<_;m++)P=cg(this._rings[m],i,!0),P.length&&this._parts.push(P)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var s=!1,d,m,_,P,O,$,W,X;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(P=0,W=this._parts.length;P<W;P++)for(d=this._parts[P],O=0,X=d.length,$=X-1;O<X;$=O++)m=d[O],_=d[$],m.y>i.y!=_.y>i.y&&i.x<(_.x-m.x)*(i.y-m.y)/(_.y-m.y)+m.x&&(s=!s);return s||ur.prototype._containsPoint.call(this,i,!0)}});function V2(i,s){return new Ki(i,s)}var cr=lr.extend({initialize:function(i,s){E(this,s),this._layers={},i&&this.addData(i)},addData:function(i){var s=S(i)?i:i.features,d,m,_;if(s){for(d=0,m=s.length;d<m;d++)_=s[d],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var P=this.options;if(P.filter&&!P.filter(i))return this;var O=dl(i,P);return O?(O.feature=pl(i),O.defaultOptions=O.options,this.resetStyle(O),P.onEachFeature&&P.onEachFeature(i,O),this.addLayer(O)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=o({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(s){this._setLayerStyle(s,i)},this)},_setLayerStyle:function(i,s){i.setStyle&&(typeof s=="function"&&(s=s(i.feature)),i.setStyle(s))}});function dl(i,s){var d=i.type==="Feature"?i.geometry:i,m=d?d.coordinates:null,_=[],P=s&&s.pointToLayer,O=s&&s.coordsToLatLng||wd,$,W,X,ue;if(!m&&!d)return null;switch(d.type){case"Point":return $=O(m),wg(P,i,$,s);case"MultiPoint":for(X=0,ue=m.length;X<ue;X++)$=O(m[X]),_.push(wg(P,i,$,s));return new lr(_);case"LineString":case"MultiLineString":return W=fl(m,d.type==="LineString"?0:1,O),new ur(W,s);case"Polygon":case"MultiPolygon":return W=fl(m,d.type==="Polygon"?1:2,O),new Ki(W,s);case"GeometryCollection":for(X=0,ue=d.geometries.length;X<ue;X++){var ye=dl({geometry:d.geometries[X],type:"Feature",properties:i.properties},s);ye&&_.push(ye)}return new lr(_);case"FeatureCollection":for(X=0,ue=d.features.length;X<ue;X++){var Ne=dl(d.features[X],s);Ne&&_.push(Ne)}return new lr(_);default:throw new Error("Invalid GeoJSON object.")}}function wg(i,s,d,m){return i?i(s,d):new ul(d,m&&m.markersInheritOptions&&m)}function wd(i){return new ne(i[1],i[0],i[2])}function fl(i,s,d){for(var m=[],_=0,P=i.length,O;_<P;_++)O=s?fl(i[_],s-1,d):(d||wd)(i[_]),m.push(O);return m}function xd(i,s){return i=Q(i),i.alt!==void 0?[p(i.lng,s),p(i.lat,s),p(i.alt,s)]:[p(i.lng,s),p(i.lat,s)]}function hl(i,s,d,m){for(var _=[],P=0,O=i.length;P<O;P++)_.push(s?hl(i[P],yn(i[P])?0:s-1,d,m):xd(i[P],m));return!s&&d&&_.length>0&&_.push(_[0].slice()),_}function qi(i,s){return i.feature?o({},i.feature,{geometry:s}):pl(s)}function pl(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var bd={toGeoJSON:function(i){return qi(this,{type:"Point",coordinates:xd(this.getLatLng(),i)})}};ul.include(bd),_d.include(bd),cl.include(bd),ur.include({toGeoJSON:function(i){var s=!yn(this._latlngs),d=hl(this._latlngs,s?1:0,!1,i);return qi(this,{type:(s?"Multi":"")+"LineString",coordinates:d})}}),Ki.include({toGeoJSON:function(i){var s=!yn(this._latlngs),d=s&&!yn(this._latlngs[0]),m=hl(this._latlngs,d?2:s?1:0,!0,i);return s||(m=[m]),qi(this,{type:(d?"Multi":"")+"Polygon",coordinates:m})}}),Wi.include({toMultiPoint:function(i){var s=[];return this.eachLayer(function(d){s.push(d.toGeoJSON(i).geometry.coordinates)}),qi(this,{type:"MultiPoint",coordinates:s})},toGeoJSON:function(i){var s=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(s==="MultiPoint")return this.toMultiPoint(i);var d=s==="GeometryCollection",m=[];return this.eachLayer(function(_){if(_.toGeoJSON){var P=_.toGeoJSON(i);if(d)m.push(P.geometry);else{var O=pl(P);O.type==="FeatureCollection"?m.push.apply(m,O.features):m.push(O)}}}),d?qi(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function xg(i,s){return new cr(i,s)}var K2=xg,ml=An.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,s,d){this._url=i,this._bounds=K(s),E(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ee(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Qe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Zi(this._image),this},bringToBack:function(){return this._map&&Gi(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=K(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",s=this._image=i?this._url:je("img");if(Ee(s,"leaflet-image-layer"),this._zoomAnimated&&Ee(s,"leaflet-zoom-animated"),this.options.className&&Ee(s,this.options.className),s.onselectstart=g,s.onmousemove=g,s.onload=l(this.fire,this,"load"),s.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=s.src;return}s.src=this._url,s.alt=this.options.alt},_animateZoom:function(i){var s=this._map.getZoomScale(i.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;li(this._image,d,s)},_reset:function(){var i=this._image,s=new z(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=s.getSize();ct(i,s.min),i.style.width=d.x+"px",i.style.height=d.y+"px"},_updateOpacity:function(){vn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),q2=function(i,s,d){return new ml(i,s,d)},bg=ml.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",s=this._image=i?this._url:je("video");if(Ee(s,"leaflet-image-layer"),this._zoomAnimated&&Ee(s,"leaflet-zoom-animated"),this.options.className&&Ee(s,this.options.className),s.onselectstart=g,s.onmousemove=g,s.onloadeddata=l(this.fire,this,"load"),i){for(var d=s.getElementsByTagName("source"),m=[],_=0;_<d.length;_++)m.push(d[_].src);this._url=d.length>0?m:[s.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(s.style,"objectFit")&&(s.style.objectFit="fill"),s.autoplay=!!this.options.autoplay,s.loop=!!this.options.loop,s.muted=!!this.options.muted,s.playsInline=!!this.options.playsInline;for(var P=0;P<this._url.length;P++){var O=je("source");O.src=this._url[P],s.appendChild(O)}}});function Y2(i,s,d){return new bg(i,s,d)}var Sg=ml.extend({_initImage:function(){var i=this._image=this._url;Ee(i,"leaflet-image-layer"),this._zoomAnimated&&Ee(i,"leaflet-zoom-animated"),this.options.className&&Ee(i,this.options.className),i.onselectstart=g,i.onmousemove=g}});function Q2(i,s,d){return new Sg(i,s,d)}var Wn=An.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,s){i&&(i instanceof ne||S(i))?(this._latlng=Q(i),E(this,s)):(E(this,i),this._source=s),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&vn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&vn(this._container,1),this.bringToFront(),this.options.interactive&&(Ee(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(vn(this._container,0),this._removeTimeout=setTimeout(l(Qe,void 0,this._container),200)):Qe(this._container),this.options.interactive&&(at(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=Q(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Zi(this._container),this},bringToBack:function(){return this._map&&Gi(this._container),this},_prepareOpen:function(i){var s=this._source;if(!s._map)return!1;if(s instanceof lr){s=null;var d=this._source._layers;for(var m in d)if(d[m]._map){s=d[m];break}if(!s)return!1;this._source=s}if(!i)if(s.getCenter)i=s.getCenter();else if(s.getLatLng)i=s.getLatLng();else if(s.getBounds)i=s.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,s=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof s=="string")i.innerHTML=s;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(s)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),s=k(this.options.offset),d=this._getAnchor();this._zoomAnimated?ct(this._container,i.add(d)):s=s.add(i).add(d);var m=this._containerBottom=-s.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+s.x;this._container.style.bottom=m+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});Ae.include({_initOverlay:function(i,s,d,m){var _=s;return _ instanceof i||(_=new i(m).setContent(s)),d&&_.setLatLng(d),_}}),An.include({_initOverlay:function(i,s,d,m){var _=d;return _ instanceof i?(E(_,m),_._source=this):(_=s&&!m?s:new i(m,this),_.setContent(d)),_}});var gl=Wn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,Wn.prototype.openOn.call(this,i)},onAdd:function(i){Wn.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Pr||this._source.on("preclick",ci))},onRemove:function(i){Wn.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Pr||this._source.off("preclick",ci))},getEvents:function(){var i=Wn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",s=this._container=je("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=je("div",i+"-content-wrapper",s);if(this._contentNode=je("div",i+"-content",d),oa(s),dd(this._contentNode),Ce(s,"contextmenu",ci),this._tipContainer=je("div",i+"-tip-container",s),this._tip=je("div",i+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=je("a",i+"-close-button",s);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',Ce(m,"click",function(_){Ct(_),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,s=i.style;s.width="",s.whiteSpace="nowrap";var d=i.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),s.width=d+1+"px",s.whiteSpace="",s.height="";var m=i.offsetHeight,_=this.options.maxHeight,P="leaflet-popup-scrolled";_&&m>_?(s.height=_+"px",Ee(i,P)):at(i,P),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var s=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),d=this._getAnchor();ct(this._container,s.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,s=parseInt(ta(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+s,m=this._containerWidth,_=new B(this._containerLeft,-d-this._containerBottom);_._add(ui(this._container));var P=i.layerPointToContainerPoint(_),O=k(this.options.autoPanPadding),$=k(this.options.autoPanPaddingTopLeft||O),W=k(this.options.autoPanPaddingBottomRight||O),X=i.getSize(),ue=0,ye=0;P.x+m+W.x>X.x&&(ue=P.x+m-X.x+W.x),P.x-ue-$.x<0&&(ue=P.x-$.x),P.y+d+W.y>X.y&&(ye=P.y+d-X.y+W.y),P.y-ye-$.y<0&&(ye=P.y-$.y),(ue||ye)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([ue,ye]))}},_getAnchor:function(){return k(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),J2=function(i,s){return new gl(i,s)};Ae.mergeOptions({closePopupOnClick:!0}),Ae.include({openPopup:function(i,s,d){return this._initOverlay(gl,i,s,d).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),An.include({bindPopup:function(i,s){return this._popup=this._initOverlay(gl,this._popup,i,s),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof lr||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){di(i);var s=i.layer||i.target;if(this._popup._source===s&&!(s instanceof Pr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=s,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var vl=Wn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){Wn.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){Wn.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=Wn.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",s=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=je("div",s),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var s,d,m=this._map,_=this._container,P=m.latLngToContainerPoint(m.getCenter()),O=m.layerPointToContainerPoint(i),$=this.options.direction,W=_.offsetWidth,X=_.offsetHeight,ue=k(this.options.offset),ye=this._getAnchor();$==="top"?(s=W/2,d=X):$==="bottom"?(s=W/2,d=0):$==="center"?(s=W/2,d=X/2):$==="right"?(s=0,d=X/2):$==="left"?(s=W,d=X/2):O.x<P.x?($="right",s=0,d=X/2):($="left",s=W+(ue.x+ye.x)*2,d=X/2),i=i.subtract(k(s,d,!0)).add(ue).add(ye),at(_,"leaflet-tooltip-right"),at(_,"leaflet-tooltip-left"),at(_,"leaflet-tooltip-top"),at(_,"leaflet-tooltip-bottom"),Ee(_,"leaflet-tooltip-"+$),ct(_,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&vn(this._container,i)},_animateZoom:function(i){var s=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(s)},_getAnchor:function(){return k(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),X2=function(i,s){return new vl(i,s)};Ae.include({openTooltip:function(i,s,d){return this._initOverlay(vl,i,s,d).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),An.include({bindTooltip:function(i,s){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(vl,this._tooltip,i,s),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var s=i?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[s](d),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof lr||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var s=typeof i.getElement=="function"&&i.getElement();s&&(Ce(s,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),Ce(s,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var s=typeof i.getElement=="function"&&i.getElement();s&&s.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var s=this;this._map.once("moveend",function(){s._openOnceFlag=!1,s._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var s=i.latlng,d,m;this._tooltip.options.sticky&&i.originalEvent&&(d=this._map.mouseEventToContainerPoint(i.originalEvent),m=this._map.containerPointToLayerPoint(d),s=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(s)}});var Cg=Vi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var s=i&&i.tagName==="DIV"?i:document.createElement("div"),d=this.options;if(d.html instanceof Element?(rl(s),s.appendChild(d.html)):s.innerHTML=d.html!==!1?d.html:"",d.bgPos){var m=k(d.bgPos);s.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(s,"icon"),s},createShadow:function(){return null}});function eS(i){return new Cg(i)}Vi.Default=la;var ua=An.extend({options:{tileSize:256,opacity:1,updateWhenIdle:le.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){E(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),Qe(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Zi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Gi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof B?i:new B(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var s=this.getPane().children,d=-i(-1/0,1/0),m=0,_=s.length,P;m<_;m++)P=s[m].style.zIndex,s[m]!==this._container&&P&&(d=i(d,+P));isFinite(d)&&(this.options.zIndex=d+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!le.ielt9){vn(this._container,this.options.opacity);var i=+new Date,s=!1,d=!1;for(var m in this._tiles){var _=this._tiles[m];if(!(!_.current||!_.loaded)){var P=Math.min(1,(i-_.loaded)/200);vn(_.el,P),P<1?s=!0:(_.active?d=!0:this._onOpaqueTile(_),_.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),s&&(V(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=je("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,s=this.options.maxZoom;if(i!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===i?(this._levels[d].el.style.zIndex=s-Math.abs(i-d),this._onUpdateLevel(d)):(Qe(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var m=this._levels[i],_=this._map;return m||(m=this._levels[i]={},m.el=je("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=s,m.origin=_.project(_.unproject(_.getPixelOrigin()),i).round(),m.zoom=i,this._setZoomTransform(m,_.getCenter(),_.getZoom()),g(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var i,s,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)s=this._tiles[i],s.retain=s.current;for(i in this._tiles)if(s=this._tiles[i],s.current&&!s.active){var m=s.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var s in this._tiles)this._tiles[s].coords.z===i&&this._removeTile(s)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)Qe(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,s,d,m){var _=Math.floor(i/2),P=Math.floor(s/2),O=d-1,$=new B(+_,+P);$.z=+O;var W=this._tileCoordsToKey($),X=this._tiles[W];return X&&X.active?(X.retain=!0,!0):(X&&X.loaded&&(X.retain=!0),O>m?this._retainParent(_,P,O,m):!1)},_retainChildren:function(i,s,d,m){for(var _=2*i;_<2*i+2;_++)for(var P=2*s;P<2*s+2;P++){var O=new B(_,P);O.z=d+1;var $=this._tileCoordsToKey(O),W=this._tiles[$];if(W&&W.active){W.retain=!0;continue}else W&&W.loaded&&(W.retain=!0);d+1<m&&this._retainChildren(_,P,d+1,m)}},_resetView:function(i){var s=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),s,s)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var s=this.options;return s.minNativeZoom!==void 0&&i<s.minNativeZoom?s.minNativeZoom:s.maxNativeZoom!==void 0&&s.maxNativeZoom<i?s.maxNativeZoom:i},_setView:function(i,s,d,m){var _=Math.round(s);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var P=this.options.updateWhenZooming&&_!==this._tileZoom;(!m||P)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(i),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(i,s)},_setZoomTransforms:function(i,s){for(var d in this._levels)this._setZoomTransform(this._levels[d],i,s)},_setZoomTransform:function(i,s,d){var m=this._map.getZoomScale(d,i.zoom),_=i.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(s,d)).round();le.any3d?li(i.el,_,m):ct(i.el,_)},_resetGrid:function(){var i=this._map,s=i.options.crs,d=this._tileSize=this.getTileSize(),m=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=s.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,s.wrapLng[0]],m).x/d.x),Math.ceil(i.project([0,s.wrapLng[1]],m).x/d.y)],this._wrapY=s.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([s.wrapLat[0],0],m).y/d.x),Math.ceil(i.project([s.wrapLat[1],0],m).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var s=this._map,d=s._animatingZoom?Math.max(s._animateToZoom,s.getZoom()):s.getZoom(),m=s.getZoomScale(d,this._tileZoom),_=s.project(i,this._tileZoom).floor(),P=s.getSize().divideBy(m*2);return new z(_.subtract(P),_.add(P))},_update:function(i){var s=this._map;if(s){var d=this._clampZoom(s.getZoom());if(i===void 0&&(i=s.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(i),_=this._pxBoundsToTileRange(m),P=_.getCenter(),O=[],$=this.options.keepBuffer,W=new z(_.getBottomLeft().subtract([$,-$]),_.getTopRight().add([$,-$]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var X in this._tiles){var ue=this._tiles[X].coords;(ue.z!==this._tileZoom||!W.contains(new B(ue.x,ue.y)))&&(this._tiles[X].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(i,d);return}for(var ye=_.min.y;ye<=_.max.y;ye++)for(var Ne=_.min.x;Ne<=_.max.x;Ne++){var zt=new B(Ne,ye);if(zt.z=this._tileZoom,!!this._isValidTile(zt)){var mt=this._tiles[this._tileCoordsToKey(zt)];mt?mt.current=!0:O.push(zt)}}if(O.sort(function(Kt,Qi){return Kt.distanceTo(P)-Qi.distanceTo(P)}),O.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var _n=document.createDocumentFragment();for(Ne=0;Ne<O.length;Ne++)this._addTile(O[Ne],_n);this._level.el.appendChild(_n)}}}},_isValidTile:function(i){var s=this._map.options.crs;if(!s.infinite){var d=this._globalTileRange;if(!s.wrapLng&&(i.x<d.min.x||i.x>d.max.x)||!s.wrapLat&&(i.y<d.min.y||i.y>d.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(i);return K(this.options.bounds).overlaps(m)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var s=this._map,d=this.getTileSize(),m=i.scaleBy(d),_=m.add(d),P=s.unproject(m,i.z),O=s.unproject(_,i.z);return[P,O]},_tileCoordsToBounds:function(i){var s=this._tileCoordsToNwSe(i),d=new H(s[0],s[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var s=i.split(":"),d=new B(+s[0],+s[1]);return d.z=+s[2],d},_removeTile:function(i){var s=this._tiles[i];s&&(Qe(s.el),delete this._tiles[i],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){Ee(i,"leaflet-tile");var s=this.getTileSize();i.style.width=s.x+"px",i.style.height=s.y+"px",i.onselectstart=g,i.onmousemove=g,le.ielt9&&this.options.opacity<1&&vn(i,this.options.opacity)},_addTile:function(i,s){var d=this._getTilePos(i),m=this._tileCoordsToKey(i),_=this.createTile(this._wrapCoords(i),l(this._tileReady,this,i));this._initTile(_),this.createTile.length<2&&R(l(this._tileReady,this,i,null,_)),ct(_,d),this._tiles[m]={el:_,coords:i,current:!0},s.appendChild(_),this.fire("tileloadstart",{tile:_,coords:i})},_tileReady:function(i,s,d){s&&this.fire("tileerror",{error:s,tile:d,coords:i});var m=this._tileCoordsToKey(i);d=this._tiles[m],d&&(d.loaded=+new Date,this._map._fadeAnimated?(vn(d.el,0),V(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),s||(Ee(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),le.ielt9||!this._map._fadeAnimated?R(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var s=new B(this._wrapX?h(i.x,this._wrapX):i.x,this._wrapY?h(i.y,this._wrapY):i.y);return s.z=i.z,s},_pxBoundsToTileRange:function(i){var s=this.getTileSize();return new z(i.min.unscaleBy(s).floor(),i.max.unscaleBy(s).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function tS(i){return new ua(i)}var Yi=ua.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,s){this._url=i,s=E(this,s),s.detectRetina&&le.retina&&s.maxZoom>0?(s.tileSize=Math.floor(s.tileSize/2),s.zoomReverse?(s.zoomOffset--,s.minZoom=Math.min(s.maxZoom,s.minZoom+1)):(s.zoomOffset++,s.maxZoom=Math.max(s.minZoom,s.maxZoom-1)),s.minZoom=Math.max(0,s.minZoom)):s.zoomReverse?s.minZoom=Math.min(s.maxZoom,s.minZoom):s.maxZoom=Math.max(s.minZoom,s.maxZoom),typeof s.subdomains=="string"&&(s.subdomains=s.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,s){return this._url===i&&s===void 0&&(s=!0),this._url=i,s||this.redraw(),this},createTile:function(i,s){var d=document.createElement("img");return Ce(d,"load",l(this._tileOnLoad,this,s,d)),Ce(d,"error",l(this._tileOnError,this,s,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(i),d},getTileUrl:function(i){var s={r:le.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-i.y;this.options.tms&&(s.y=d),s["-y"]=d}return x(this._url,o(s,this.options))},_tileOnLoad:function(i,s){le.ielt9?setTimeout(l(i,this,null,s),0):i(null,s)},_tileOnError:function(i,s,d){var m=this.options.errorTileUrl;m&&s.getAttribute("src")!==m&&(s.src=m),i(d,s)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,s=this.options.maxZoom,d=this.options.zoomReverse,m=this.options.zoomOffset;return d&&(i=s-i),i+m},_getSubdomain:function(i){var s=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[s]},_abortLoading:function(){var i,s;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(s=this._tiles[i].el,s.onload=g,s.onerror=g,!s.complete)){s.src=D;var d=this._tiles[i].coords;Qe(s),delete this._tiles[i],this.fire("tileabort",{tile:s,coords:d})}},_removeTile:function(i){var s=this._tiles[i];if(s)return s.el.setAttribute("src",D),ua.prototype._removeTile.call(this,i)},_tileReady:function(i,s,d){if(!(!this._map||d&&d.getAttribute("src")===D))return ua.prototype._tileReady.call(this,i,s,d)}});function Eg(i,s){return new Yi(i,s)}var Pg=Yi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,s){this._url=i;var d=o({},this.defaultWmsParams);for(var m in s)m in this.options||(d[m]=s[m]);s=E(this,s);var _=s.detectRetina&&le.retina?2:1,P=this.getTileSize();d.width=P.x*_,d.height=P.y*_,this.wmsParams=d},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var s=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[s]=this._crs.code,Yi.prototype.onAdd.call(this,i)},getTileUrl:function(i){var s=this._tileCoordsToNwSe(i),d=this._crs,m=G(d.project(s[0]),d.project(s[1])),_=m.min,P=m.max,O=(this._wmsVersion>=1.3&&this._crs===yg?[_.y,_.x,P.y,P.x]:[_.x,_.y,P.x,P.y]).join(","),$=Yi.prototype.getTileUrl.call(this,i);return $+N(this.wmsParams,$,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+O},setParams:function(i,s){return o(this.wmsParams,i),s||this.redraw(),this}});function nS(i,s){return new Pg(i,s)}Yi.WMS=Pg,Eg.wms=nS;var dr=An.extend({options:{padding:.1},initialize:function(i){E(this,i),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ee(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,s){var d=this._map.getZoomScale(s,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,s),P=m.multiplyBy(-d).add(_).subtract(this._map._getNewPixelOrigin(i,s));le.any3d?li(this._container,P,d):ct(this._container,P)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,s=this._map.getSize(),d=this._map.containerPointToLayerPoint(s.multiplyBy(-i)).round();this._bounds=new z(d,d.add(s.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ng=dr.extend({options:{tolerance:0},getEvents:function(){var i=dr.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){dr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");Ce(i,"mousemove",this._onMouseMove,this),Ce(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ce(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){V(this._redrawRequest),delete this._ctx,Qe(this._container),Ze(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var s in this._layers)i=this._layers[s],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){dr.prototype._update.call(this);var i=this._bounds,s=this._container,d=i.getSize(),m=le.retina?2:1;ct(s,i.min),s.width=m*d.x,s.height=m*d.y,s.style.width=d.x+"px",s.style.height=d.y+"px",le.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){dr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[c(i)]=i;var s=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=s),this._drawLast=s,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var s=i._order,d=s.next,m=s.prev;d?d.prev=m:this._drawLast=m,m?m.next=d:this._drawFirst=d,delete i._order,delete this._layers[c(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var s=i.options.dashArray.split(/[, ]+/),d=[],m,_;for(_=0;_<s.length;_++){if(m=Number(s[_]),isNaN(m))return;d.push(m)}i.options._dashArray=d}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||R(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var s=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new z,this._redrawBounds.extend(i._pxBounds.min.subtract([s,s])),this._redrawBounds.extend(i._pxBounds.max.add([s,s]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var s=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,s.x,s.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,s=this._redrawBounds;if(this._ctx.save(),s){var d=s.getSize();this._ctx.beginPath(),this._ctx.rect(s.min.x,s.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)i=m.layer,(!s||i._pxBounds&&i._pxBounds.intersects(s))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,s){if(this._drawing){var d,m,_,P,O=i._parts,$=O.length,W=this._ctx;if($){for(W.beginPath(),d=0;d<$;d++){for(m=0,_=O[d].length;m<_;m++)P=O[d][m],W[m?"lineTo":"moveTo"](P.x,P.y);s&&W.closePath()}this._fillStroke(W,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var s=i._point,d=this._ctx,m=Math.max(Math.round(i._radius),1),_=(Math.max(Math.round(i._radiusY),1)||m)/m;_!==1&&(d.save(),d.scale(1,_)),d.beginPath(),d.arc(s.x,s.y/_,m,0,Math.PI*2,!1),_!==1&&d.restore(),this._fillStroke(d,i)}},_fillStroke:function(i,s){var d=s.options;d.fill&&(i.globalAlpha=d.fillOpacity,i.fillStyle=d.fillColor||d.color,i.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(i.setLineDash&&i.setLineDash(s.options&&s.options._dashArray||[]),i.globalAlpha=d.opacity,i.lineWidth=d.weight,i.strokeStyle=d.color,i.lineCap=d.lineCap,i.lineJoin=d.lineJoin,i.stroke())},_onClick:function(i){for(var s=this._map.mouseEventToLayerPoint(i),d,m,_=this._drawFirst;_;_=_.next)d=_.layer,d.options.interactive&&d._containsPoint(s)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(d))&&(m=d);this._fireEvent(m?[m]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var s=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,s)}},_handleMouseOut:function(i){var s=this._hoveredLayer;s&&(at(this._container,"leaflet-interactive"),this._fireEvent([s],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,s){if(!this._mouseHoverThrottled){for(var d,m,_=this._drawFirst;_;_=_.next)d=_.layer,d.options.interactive&&d._containsPoint(s)&&(m=d);m!==this._hoveredLayer&&(this._handleMouseOut(i),m&&(Ee(this._container,"leaflet-interactive"),this._fireEvent([m],i,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,s,d){this._map._fireDOMEvent(s,d||s.type,i)},_bringToFront:function(i){var s=i._order;if(s){var d=s.next,m=s.prev;if(d)d.prev=m;else return;m?m.next=d:d&&(this._drawFirst=d),s.prev=this._drawLast,this._drawLast.next=s,s.next=null,this._drawLast=s,this._requestRedraw(i)}},_bringToBack:function(i){var s=i._order;if(s){var d=s.next,m=s.prev;if(m)m.next=d;else return;d?d.prev=m:m&&(this._drawLast=m),s.prev=null,s.next=this._drawFirst,this._drawFirst.prev=s,this._drawFirst=s,this._requestRedraw(i)}}});function kg(i){return le.canvas?new Ng(i):null}var ca=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),rS={_initContainer:function(){this._container=je("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(dr.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var s=i._container=ca("shape");Ee(s,"leaflet-vml-shape "+(this.options.className||"")),s.coordsize="1 1",i._path=ca("path"),s.appendChild(i._path),this._updateStyle(i),this._layers[c(i)]=i},_addPath:function(i){var s=i._container;this._container.appendChild(s),i.options.interactive&&i.addInteractiveTarget(s)},_removePath:function(i){var s=i._container;Qe(s),i.removeInteractiveTarget(s),delete this._layers[c(i)]},_updateStyle:function(i){var s=i._stroke,d=i._fill,m=i.options,_=i._container;_.stroked=!!m.stroke,_.filled=!!m.fill,m.stroke?(s||(s=i._stroke=ca("stroke")),_.appendChild(s),s.weight=m.weight+"px",s.color=m.color,s.opacity=m.opacity,m.dashArray?s.dashStyle=S(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):s.dashStyle="",s.endcap=m.lineCap.replace("butt","flat"),s.joinstyle=m.lineJoin):s&&(_.removeChild(s),i._stroke=null),m.fill?(d||(d=i._fill=ca("fill")),_.appendChild(d),d.color=m.fillColor||m.color,d.opacity=m.fillOpacity):d&&(_.removeChild(d),i._fill=null)},_updateCircle:function(i){var s=i._point.round(),d=Math.round(i._radius),m=Math.round(i._radiusY||d);this._setPath(i,i._empty()?"M0 0":"AL "+s.x+","+s.y+" "+d+","+m+" 0,"+65535*360)},_setPath:function(i,s){i._path.v=s},_bringToFront:function(i){Zi(i._container)},_bringToBack:function(i){Gi(i._container)}},yl=le.vml?ca:re,da=dr.extend({_initContainer:function(){this._container=yl("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=yl("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Qe(this._container),Ze(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){dr.prototype._update.call(this);var i=this._bounds,s=i.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(s))&&(this._svgSize=s,d.setAttribute("width",s.x),d.setAttribute("height",s.y)),ct(d,i.min),d.setAttribute("viewBox",[i.min.x,i.min.y,s.x,s.y].join(" ")),this.fire("update")}},_initPath:function(i){var s=i._path=yl("path");i.options.className&&Ee(s,i.options.className),i.options.interactive&&Ee(s,"leaflet-interactive"),this._updateStyle(i),this._layers[c(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){Qe(i._path),i.removeInteractiveTarget(i._path),delete this._layers[c(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var s=i._path,d=i.options;s&&(d.stroke?(s.setAttribute("stroke",d.color),s.setAttribute("stroke-opacity",d.opacity),s.setAttribute("stroke-width",d.weight),s.setAttribute("stroke-linecap",d.lineCap),s.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?s.setAttribute("stroke-dasharray",d.dashArray):s.removeAttribute("stroke-dasharray"),d.dashOffset?s.setAttribute("stroke-dashoffset",d.dashOffset):s.removeAttribute("stroke-dashoffset")):s.setAttribute("stroke","none"),d.fill?(s.setAttribute("fill",d.fillColor||d.color),s.setAttribute("fill-opacity",d.fillOpacity),s.setAttribute("fill-rule",d.fillRule||"evenodd")):s.setAttribute("fill","none"))},_updatePoly:function(i,s){this._setPath(i,de(i._parts,s))},_updateCircle:function(i){var s=i._point,d=Math.max(Math.round(i._radius),1),m=Math.max(Math.round(i._radiusY),1)||d,_="a"+d+","+m+" 0 1,0 ",P=i._empty()?"M0 0":"M"+(s.x-d)+","+s.y+_+d*2+",0 "+_+-d*2+",0 ";this._setPath(i,P)},_setPath:function(i,s){i._path.setAttribute("d",s)},_bringToFront:function(i){Zi(i._path)},_bringToBack:function(i){Gi(i._path)}});le.vml&&da.include(rS);function Ig(i){return le.svg||le.vml?new da(i):null}Ae.include({getRenderer:function(i){var s=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return s||(s=this._renderer=this._createRenderer()),this.hasLayer(s)||this.addLayer(s),s},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var s=this._paneRenderers[i];return s===void 0&&(s=this._createRenderer({pane:i}),this._paneRenderers[i]=s),s},_createRenderer:function(i){return this.options.preferCanvas&&kg(i)||Ig(i)}});var Tg=Ki.extend({initialize:function(i,s){Ki.prototype.initialize.call(this,this._boundsToLatLngs(i),s)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=K(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function iS(i,s){return new Tg(i,s)}da.create=yl,da.pointsToPath=de,cr.geometryToLayer=dl,cr.coordsToLatLng=wd,cr.coordsToLatLngs=fl,cr.latLngToCoords=xd,cr.latLngsToCoords=hl,cr.getFeature=qi,cr.asFeature=pl,Ae.mergeOptions({boxZoom:!0});var Dg=Gn.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){Ce(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ze(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Qe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),na(),rd(),this._startPoint=this._map.mouseEventToContainerPoint(i),Ce(document,{contextmenu:di,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=je("div","leaflet-zoom-box",this._container),Ee(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var s=new z(this._point,this._startPoint),d=s.getSize();ct(this._box,s.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(Qe(this._box),at(this._container,"leaflet-crosshair")),ra(),id(),Ze(document,{contextmenu:di,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var s=new H(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(s).fire("boxzoomend",{boxZoomBounds:s})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ae.addInitHook("addHandler","boxZoom",Dg),Ae.mergeOptions({doubleClickZoom:!0});var Lg=Gn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var s=this._map,d=s.getZoom(),m=s.options.zoomDelta,_=i.originalEvent.shiftKey?d-m:d+m;s.options.doubleClickZoom==="center"?s.setZoom(_):s.setZoomAround(i.containerPoint,_)}});Ae.addInitHook("addHandler","doubleClickZoom",Lg),Ae.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ag=Gn.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Er(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}Ee(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){at(this._map._container,"leaflet-grab"),at(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var s=K(this._map.options.maxBounds);this._offsetLimit=G(this._map.latLngToContainerPoint(s.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(s.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var s=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(s),this._prunePositions(s)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),s=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=s.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,s){return i-(i-s)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),s=this._offsetLimit;i.x<s.min.x&&(i.x=this._viscousLimit(i.x,s.min.x)),i.y<s.min.y&&(i.y=this._viscousLimit(i.y,s.min.y)),i.x>s.max.x&&(i.x=this._viscousLimit(i.x,s.max.x)),i.y>s.max.y&&(i.y=this._viscousLimit(i.y,s.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,s=Math.round(i/2),d=this._initialWorldOffset,m=this._draggable._newPos.x,_=(m-s+d)%i+s-d,P=(m+s+d)%i-s-d,O=Math.abs(_+d)<Math.abs(P+d)?_:P;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=O},_onDragEnd:function(i){var s=this._map,d=s.options,m=!d.inertia||i.noInertia||this._times.length<2;if(s.fire("dragend",i),m)s.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),P=(this._lastTime-this._times[0])/1e3,O=d.easeLinearity,$=_.multiplyBy(O/P),W=$.distanceTo([0,0]),X=Math.min(d.inertiaMaxSpeed,W),ue=$.multiplyBy(X/W),ye=X/(d.inertiaDeceleration*O),Ne=ue.multiplyBy(-ye/2).round();!Ne.x&&!Ne.y?s.fire("moveend"):(Ne=s._limitOffset(Ne,s.options.maxBounds),R(function(){s.panBy(Ne,{duration:ye,easeLinearity:O,noMoveStart:!0,animate:!0})}))}}});Ae.addInitHook("addHandler","dragging",Ag),Ae.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Mg=Gn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),Ce(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ze(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,s=document.documentElement,d=i.scrollTop||s.scrollTop,m=i.scrollLeft||s.scrollLeft;this._map._container.focus(),window.scrollTo(m,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var s=this._panKeys={},d=this.keyCodes,m,_;for(m=0,_=d.left.length;m<_;m++)s[d.left[m]]=[-1*i,0];for(m=0,_=d.right.length;m<_;m++)s[d.right[m]]=[i,0];for(m=0,_=d.down.length;m<_;m++)s[d.down[m]]=[0,i];for(m=0,_=d.up.length;m<_;m++)s[d.up[m]]=[0,-1*i]},_setZoomDelta:function(i){var s=this._zoomKeys={},d=this.keyCodes,m,_;for(m=0,_=d.zoomIn.length;m<_;m++)s[d.zoomIn[m]]=i;for(m=0,_=d.zoomOut.length;m<_;m++)s[d.zoomOut[m]]=-i},_addHooks:function(){Ce(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ze(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var s=i.keyCode,d=this._map,m;if(s in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(m=this._panKeys[s],i.shiftKey&&(m=k(m).multiplyBy(3)),d.options.maxBounds&&(m=d._limitOffset(k(m),d.options.maxBounds)),d.options.worldCopyJump){var _=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(m)));d.panTo(_)}else d.panBy(m)}else if(s in this._zoomKeys)d.setZoom(d.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[s]);else if(s===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;di(i)}}});Ae.addInitHook("addHandler","keyboard",Mg),Ae.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Rg=Gn.extend({addHooks:function(){Ce(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ze(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var s=og(i),d=this._map.options.wheelDebounceTime;this._delta+=s,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var m=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),m),di(i)},_performZoom:function(){var i=this._map,s=i.getZoom(),d=this._map.options.zoomSnap||0;i._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,P=d?Math.ceil(_/d)*d:_,O=i._limitZoom(s+(this._delta>0?P:-P))-s;this._delta=0,this._startTime=null,O&&(i.options.scrollWheelZoom==="center"?i.setZoom(s+O):i.setZoomAround(this._lastMousePos,s+O))}});Ae.addInitHook("addHandler","scrollWheelZoom",Rg);var oS=600;Ae.mergeOptions({tapHold:le.touchNative&&le.safari&&le.mobile,tapTolerance:15});var Og=Gn.extend({addHooks:function(){Ce(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ze(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var s=i.touches[0];this._startPos=this._newPos=new B(s.clientX,s.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(Ce(document,"touchend",Ct),Ce(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",s))},this),oS),Ce(document,"touchend touchcancel contextmenu",this._cancel,this),Ce(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){Ze(document,"touchend",Ct),Ze(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),Ze(document,"touchend touchcancel contextmenu",this._cancel,this),Ze(document,"touchmove",this._onMove,this)},_onMove:function(i){var s=i.touches[0];this._newPos=new B(s.clientX,s.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,s){var d=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:s.screenX,screenY:s.screenY,clientX:s.clientX,clientY:s.clientY});d._simulated=!0,s.target.dispatchEvent(d)}});Ae.addInitHook("addHandler","tapHold",Og),Ae.mergeOptions({touchZoom:le.touch,bounceAtZoomLimits:!0});var Bg=Gn.extend({addHooks:function(){Ee(this._map._container,"leaflet-touch-zoom"),Ce(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){at(this._map._container,"leaflet-touch-zoom"),Ze(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var s=this._map;if(!(!i.touches||i.touches.length!==2||s._animatingZoom||this._zooming)){var d=s.mouseEventToContainerPoint(i.touches[0]),m=s.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=s.getSize()._divideBy(2),this._startLatLng=s.containerPointToLatLng(this._centerPoint),s.options.touchZoom!=="center"&&(this._pinchStartLatLng=s.containerPointToLatLng(d.add(m)._divideBy(2))),this._startDist=d.distanceTo(m),this._startZoom=s.getZoom(),this._moved=!1,this._zooming=!0,s._stop(),Ce(document,"touchmove",this._onTouchMove,this),Ce(document,"touchend touchcancel",this._onTouchEnd,this),Ct(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var s=this._map,d=s.mouseEventToContainerPoint(i.touches[0]),m=s.mouseEventToContainerPoint(i.touches[1]),_=d.distanceTo(m)/this._startDist;if(this._zoom=s.getScaleZoom(_,this._startZoom),!s.options.bounceAtZoomLimits&&(this._zoom<s.getMinZoom()&&_<1||this._zoom>s.getMaxZoom()&&_>1)&&(this._zoom=s._limitZoom(this._zoom)),s.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var P=d._add(m)._divideBy(2)._subtract(this._centerPoint);if(_===1&&P.x===0&&P.y===0)return;this._center=s.unproject(s.project(this._pinchStartLatLng,this._zoom).subtract(P),this._zoom)}this._moved||(s._moveStart(!0,!1),this._moved=!0),V(this._animRequest);var O=l(s._move,s,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=R(O,this,!0),Ct(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,V(this._animRequest),Ze(document,"touchmove",this._onTouchMove,this),Ze(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ae.addInitHook("addHandler","touchZoom",Bg),Ae.BoxZoom=Dg,Ae.DoubleClickZoom=Lg,Ae.Drag=Ag,Ae.Keyboard=Mg,Ae.ScrollWheelZoom=Rg,Ae.TapHold=Og,Ae.TouchZoom=Bg,n.Bounds=z,n.Browser=le,n.CRS=ce,n.Canvas=Ng,n.Circle=_d,n.CircleMarker=cl,n.Class=q,n.Control=Ln,n.DivIcon=Cg,n.DivOverlay=Wn,n.DomEvent=S2,n.DomUtil=x2,n.Draggable=Er,n.Evented=te,n.FeatureGroup=lr,n.GeoJSON=cr,n.GridLayer=ua,n.Handler=Gn,n.Icon=Vi,n.ImageOverlay=ml,n.LatLng=ne,n.LatLngBounds=H,n.Layer=An,n.LayerGroup=Wi,n.LineUtil=O2,n.Map=Ae,n.Marker=ul,n.Mixin=T2,n.Path=Pr,n.Point=B,n.PolyUtil=D2,n.Polygon=Ki,n.Polyline=ur,n.Popup=gl,n.PosAnimation=ag,n.Projection=B2,n.Rectangle=Tg,n.Renderer=dr,n.SVG=da,n.SVGOverlay=Sg,n.TileLayer=Yi,n.Tooltip=vl,n.Transformation=tt,n.Util=Z,n.VideoOverlay=bg,n.bind=l,n.bounds=G,n.canvas=kg,n.circle=G2,n.circleMarker=Z2,n.control=aa,n.divIcon=eS,n.extend=o,n.featureGroup=U2,n.geoJSON=xg,n.geoJson=K2,n.gridLayer=tS,n.icon=$2,n.imageOverlay=q2,n.latLng=Q,n.latLngBounds=K,n.layerGroup=F2,n.map=C2,n.marker=H2,n.point=k,n.polygon=V2,n.polyline=W2,n.popup=J2,n.rectangle=iS,n.setOptions=E,n.stamp=c,n.svg=Ig,n.svgOverlay=Q2,n.tileLayer=Eg,n.tooltip=X2,n.transformation=nt,n.version=r,n.videoOverlay=Y2;var aS=window.L;n.noConflict=function(){return window.L=aS,this},window.L=n})})(Th,Th.exports);var TP=Th.exports;const Pt=Uo(TP),nm=({items:e,groups:t,onItemClick:n,onGroupClick:r,className:o="h-96"})=>{const a=j.useRef(null),l=j.useRef(null),u=j.useRef(null),[c,f]=j.useState(!1),h=()=>{const p=a.current;if(p)if("geolocation"in navigator){const y=Pt.popup().setLatLng(p.getCenter()).setContent("位置情報を取得中...").openOn(p);navigator.geolocation.getCurrentPosition(w=>{const{latitude:E,longitude:N}=w.coords;console.log("現在地を取得:",E,N),u.current&&u.current.remove();const b=Pt.divIcon({className:"current-location-marker",html:'<div class="ping"></div>',iconSize:[20,20],iconAnchor:[10,10]});u.current=Pt.marker([E,N],{icon:b}).bindPopup("現在地").addTo(p),p.setView([E,N],15,{animate:!0,duration:1}),y.remove()},w=>{console.error("位置情報の取得に失敗しました:",w);let E="位置情報の取得に失敗しました";switch(w.code){case w.PERMISSION_DENIED:E="位置情報の利用が許可されていません";break;case w.POSITION_UNAVAILABLE:E="位置情報を取得できませんでした";break;case w.TIMEOUT:E="位置情報の取得がタイムアウトしました";break}y.setContent(E),setTimeout(()=>y.remove(),3e3)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}else{console.error("Geolocation APIがサポートされていません");const y=Pt.popup().setLatLng(p.getCenter()).setContent("お使いのブラウザは位置情報の取得に対応していません").openOn(p);setTimeout(()=>y.remove(),3e3)}};j.useEffect(()=>{if(!c&&!a.current){Pt.Marker.prototype.options.icon=Pt.icon({iconUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),a.current=Pt.map("map",{zoomControl:!0,attributionControl:!0}).setView([35.6812,139.7671],13),Pt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19,crossOrigin:"anonymous"}).addTo(a.current),l.current=Pt.layerGroup().addTo(a.current);const p=Pt.Control.extend({onAdd:function(){const y=Pt.DomUtil.create("div","leaflet-bar leaflet-control");return y.innerHTML=`
            <a href="#" title="現在地を表示" style="
              width: 30px;
              height: 30px;
              line-height: 30px;
              display: block;
              text-align: center;
              text-decoration: none;
              color: black;
              background-color: white;
              border-radius: 4px;
              box-shadow: 0 1px 5px rgba(0,0,0,0.65);
            ">
              📍
            </a>
          `,y.onclick=w=>{w.preventDefault(),w.stopPropagation(),h()},y}});new p({position:"bottomright"}).addTo(a.current),setTimeout(h,1e3),f(!0)}},[c]),j.useEffect(()=>{if(!a.current||!l.current)return;l.current.clearLayers();const p=[];if(e.forEach(y=>{y.metadata?.location&&p.push({location:y.metadata.location,type:"item",id:y.id,title:y.ocrText.slice(0,30)+(y.ocrText.length>30?"...":"")})}),t.forEach(y=>{y.photos.forEach(w=>{w.metadata?.location&&p.push({location:w.metadata.location,type:"group",id:y.id,title:y.title})})}),p.forEach(({location:y,type:w,id:E,title:N})=>{try{if(!g(y)){console.warn("無効な位置情報をスキップ:",y);return}Pt.marker([y.lat,y.lon]).bindPopup(`<div class="p-2">
              <div class="font-bold">${w==="group"?"グループ":"写真"}</div>
              <div class="text-sm">${N||"無題"}</div>
            </div>`).on("click",()=>{w==="item"&&n?n(E):w==="group"&&r&&r(E)}).addTo(l.current)}catch(b){console.error("マーカーの作成に失敗しました:",b)}}),p.length>0){const y=p.filter(w=>g(w.location)).map(w=>Pt.latLng(w.location.lat,w.location.lon));if(y.length>0){const w=Pt.latLngBounds(y);a.current.fitBounds(w,{padding:[50,50],maxZoom:15,animate:!0,duration:1})}}},[e,t,n,r]);const g=p=>p&&typeof p.lat=="number"&&typeof p.lon=="number"&&!isNaN(p.lat)&&!isNaN(p.lon)&&p.lat>=-90&&p.lat<=90&&p.lon>=-180&&p.lon<=180;return j.useEffect(()=>()=>{a.current&&(a.current.remove(),a.current=null),u.current&&(u.current=null),f(!1)},[]),v.jsxs(v.Fragment,{children:[v.jsx("div",{id:"map",className:o}),v.jsx("style",{children:`
        .current-location-marker {
          position: relative;
        }
        .ping {
          width: 20px;
          height: 20px;
          border-radius: 50%;
          background: rgba(38, 126, 255, 0.4);
          border: 2px solid #267EFF;
          animation: ping 1.5s ease-in-out infinite;
        }
        @keyframes ping {
          0% {
            transform: scale(0.8);
            opacity: 1;
          }
          70% {
            transform: scale(1.5);
            opacity: 0.3;
          }
          100% {
            transform: scale(0.8);
            opacity: 1;
          }
        }
      `})]})},DP="modulepreload",LP=function(e){return"/"+e},d0={},AP=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");o=Promise.allSettled(n.map(c=>{if(c=LP(c),c in d0)return;d0[c]=!0;const f=c.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":DP,f||(g.as="script"),g.crossOrigin="",g.href=c,u&&g.setAttribute("nonce",u),document.head.appendChild(g),f)return new Promise((p,y)=>{g.addEventListener("load",p),g.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return o.then(l=>{for(const u of l||[])u.status==="rejected"&&a(u.reason);return t().catch(a)})};let zl=null,f0=!1;async function Ow(){if(!zl)try{typeof window<"u"&&(zl=await AP(()=>Promise.resolve().then(()=>MD),void 0))}catch(e){console.warn("WASM module not available, falling back to canvas processing:",e),zl=null}return zl}const MP=3e4;async function RP(){if(!f0)try{const e=await Ow();e&&e.default?(await e.default(),f0=!0,console.log("WebAssembly initialized successfully")):console.warn("WASM module not available, using canvas processing only")}catch(e){console.error("Failed to initialize WebAssembly:",e),console.warn("Falling back to canvas processing only")}}async function OP(e,t){const n=new Promise((r,o)=>{setTimeout(()=>o(new Error("画像処理がタイムアウトしました")),t)});return Promise.race([e,n])}function BP(e){if(!e)throw new Error("画像データが見つかりません");try{return e.includes("base64,")?e:`data:image/jpeg;base64,${e}`}catch(t){throw console.error("Image validation error:",t),new Error("画像データの形式が正しくありません")}}function jP(e){const t=e.split(",")[1],n=atob(t),r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}function zP(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return`data:image/jpeg;base64,${btoa(t)}`}async function FP(e,t,n,r){return new Promise((o,a)=>{const l=new Image;l.onload=()=>{let u=l.width,c=l.height;u>c?u>t&&(c=Math.round(c*t/u),u=t):c>n&&(u=Math.round(u*n/c),c=n);const f=document.createElement("canvas");f.width=u,f.height=c;const h=f.getContext("2d");if(!h){a(new Error("Failed to get canvas context"));return}h.drawImage(l,0,0,u,c),o(f.toDataURL("image/jpeg",r))},l.onerror=()=>a(new Error("Failed to load image")),l.src=e})}async function Bw(e,t=800,n=800,r=.8){console.log("Starting image resize...");try{const o=BP(e);await RP(),console.log(`Resizing image to ${t}x${n} with quality ${r}`);const a=await FP(o,t,n,r),l=await Ow();if(l&&l.preprocess_image_color){console.log("Applying color processing with WASM...");const u=jP(a),c=await OP(Promise.resolve(l.preprocess_image_color(u)),MP);if(!c)throw new Error("画像の処理に失敗しました");const f=zP(c);return console.log("Image resize completed successfully with WASM"),f}else return console.log("WASM not available, using canvas processing only"),a}catch(o){throw console.error("Image resize error:",o),o instanceof Error?new Error("画像の処理に失敗しました: "+o.message):new Error("画像の処理に失敗しました")}}const UP=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=function(o){t(o.target?.result)},r.onerror=function(){n(new Error("Failed to read file for orientation adjustment"))},r.readAsDataURL(e)});async function h0(e,t=800,n=800,r=.8){const o=await UP(e);return Bw(o,t,n,r)}var $P={exports:{}};(function(e){var t=function(n){var r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(F,k,z){F[k]=z.value},l,u=typeof Symbol=="function"?Symbol:{},c=u.iterator||"@@iterator",f=u.asyncIterator||"@@asyncIterator",h=u.toStringTag||"@@toStringTag";function g(F,k,z){return Object.defineProperty(F,k,{value:z,enumerable:!0,configurable:!0,writable:!0}),F[k]}try{g({},"")}catch{g=function(k,z,G){return k[z]=G}}function p(F,k,z,G){var H=k&&k.prototype instanceof S?k:S,K=Object.create(H.prototype),ne=new Y(G||[]);return a(K,"_invoke",{value:V(F,z,ne)}),K}n.wrap=p;function y(F,k,z){try{return{type:"normal",arg:F.call(k,z)}}catch(G){return{type:"throw",arg:G}}}var w="suspendedStart",E="suspendedYield",N="executing",b="completed",x={};function S(){}function C(){}function D(){}var A={};g(A,c,function(){return this});var M=Object.getPrototypeOf,U=M&&M(M(te([])));U&&U!==r&&o.call(U,c)&&(A=U);var I=D.prototype=S.prototype=Object.create(A);C.prototype=D,a(I,"constructor",{value:D,configurable:!0}),a(D,"constructor",{value:C,configurable:!0}),C.displayName=g(D,h,"GeneratorFunction");function T(F){["next","throw","return"].forEach(function(k){g(F,k,function(z){return this._invoke(k,z)})})}n.isGeneratorFunction=function(F){var k=typeof F=="function"&&F.constructor;return k?k===C||(k.displayName||k.name)==="GeneratorFunction":!1},n.mark=function(F){return Object.setPrototypeOf?Object.setPrototypeOf(F,D):(F.__proto__=D,g(F,h,"GeneratorFunction")),F.prototype=Object.create(I),F},n.awrap=function(F){return{__await:F}};function R(F,k){function z(K,ne,Q,ce){var ve=y(F[K],F,ne);if(ve.type==="throw")ce(ve.arg);else{var $e=ve.arg,Oe=$e.value;return Oe&&typeof Oe=="object"&&o.call(Oe,"__await")?k.resolve(Oe.__await).then(function(tt){z("next",tt,Q,ce)},function(tt){z("throw",tt,Q,ce)}):k.resolve(Oe).then(function(tt){$e.value=tt,Q($e)},function(tt){return z("throw",tt,Q,ce)})}}var G;function H(K,ne){function Q(){return new k(function(ce,ve){z(K,ne,ce,ve)})}return G=G?G.then(Q,Q):Q()}a(this,"_invoke",{value:H})}T(R.prototype),g(R.prototype,f,function(){return this}),n.AsyncIterator=R,n.async=function(F,k,z,G,H){H===void 0&&(H=Promise);var K=new R(p(F,k,z,G),H);return n.isGeneratorFunction(k)?K:K.next().then(function(ne){return ne.done?ne.value:K.next()})};function V(F,k,z){var G=w;return function(K,ne){if(G===N)throw new Error("Generator is already running");if(G===b){if(K==="throw")throw ne;return B()}for(z.method=K,z.arg=ne;;){var Q=z.delegate;if(Q){var ce=Z(Q,z);if(ce){if(ce===x)continue;return ce}}if(z.method==="next")z.sent=z._sent=z.arg;else if(z.method==="throw"){if(G===w)throw G=b,z.arg;z.dispatchException(z.arg)}else z.method==="return"&&z.abrupt("return",z.arg);G=N;var ve=y(F,k,z);if(ve.type==="normal"){if(G=z.done?b:E,ve.arg===x)continue;return{value:ve.arg,done:z.done}}else ve.type==="throw"&&(G=b,z.method="throw",z.arg=ve.arg)}}}function Z(F,k){var z=k.method,G=F.iterator[z];if(G===l)return k.delegate=null,z==="throw"&&F.iterator.return&&(k.method="return",k.arg=l,Z(F,k),k.method==="throw")||z!=="return"&&(k.method="throw",k.arg=new TypeError("The iterator does not provide a '"+z+"' method")),x;var H=y(G,F.iterator,k.arg);if(H.type==="throw")return k.method="throw",k.arg=H.arg,k.delegate=null,x;var K=H.arg;if(!K)return k.method="throw",k.arg=new TypeError("iterator result is not an object"),k.delegate=null,x;if(K.done)k[F.resultName]=K.value,k.next=F.nextLoc,k.method!=="return"&&(k.method="next",k.arg=l);else return K;return k.delegate=null,x}T(I),g(I,h,"Generator"),g(I,c,function(){return this}),g(I,"toString",function(){return"[object Generator]"});function q(F){var k={tryLoc:F[0]};1 in F&&(k.catchLoc=F[1]),2 in F&&(k.finallyLoc=F[2],k.afterLoc=F[3]),this.tryEntries.push(k)}function J(F){var k=F.completion||{};k.type="normal",delete k.arg,F.completion=k}function Y(F){this.tryEntries=[{tryLoc:"root"}],F.forEach(q,this),this.reset(!0)}n.keys=function(F){var k=Object(F),z=[];for(var G in k)z.push(G);return z.reverse(),function H(){for(;z.length;){var K=z.pop();if(K in k)return H.value=K,H.done=!1,H}return H.done=!0,H}};function te(F){if(F){var k=F[c];if(k)return k.call(F);if(typeof F.next=="function")return F;if(!isNaN(F.length)){var z=-1,G=function H(){for(;++z<F.length;)if(o.call(F,z))return H.value=F[z],H.done=!1,H;return H.value=l,H.done=!0,H};return G.next=G}}return{next:B}}n.values=te;function B(){return{value:l,done:!0}}return Y.prototype={constructor:Y,reset:function(F){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(J),!F)for(var k in this)k.charAt(0)==="t"&&o.call(this,k)&&!isNaN(+k.slice(1))&&(this[k]=l)},stop:function(){this.done=!0;var F=this.tryEntries[0],k=F.completion;if(k.type==="throw")throw k.arg;return this.rval},dispatchException:function(F){if(this.done)throw F;var k=this;function z(ce,ve){return K.type="throw",K.arg=F,k.next=ce,ve&&(k.method="next",k.arg=l),!!ve}for(var G=this.tryEntries.length-1;G>=0;--G){var H=this.tryEntries[G],K=H.completion;if(H.tryLoc==="root")return z("end");if(H.tryLoc<=this.prev){var ne=o.call(H,"catchLoc"),Q=o.call(H,"finallyLoc");if(ne&&Q){if(this.prev<H.catchLoc)return z(H.catchLoc,!0);if(this.prev<H.finallyLoc)return z(H.finallyLoc)}else if(ne){if(this.prev<H.catchLoc)return z(H.catchLoc,!0)}else if(Q){if(this.prev<H.finallyLoc)return z(H.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(F,k){for(var z=this.tryEntries.length-1;z>=0;--z){var G=this.tryEntries[z];if(G.tryLoc<=this.prev&&o.call(G,"finallyLoc")&&this.prev<G.finallyLoc){var H=G;break}}H&&(F==="break"||F==="continue")&&H.tryLoc<=k&&k<=H.finallyLoc&&(H=null);var K=H?H.completion:{};return K.type=F,K.arg=k,H?(this.method="next",this.next=H.finallyLoc,x):this.complete(K)},complete:function(F,k){if(F.type==="throw")throw F.arg;return F.type==="break"||F.type==="continue"?this.next=F.arg:F.type==="return"?(this.rval=this.arg=F.arg,this.method="return",this.next="end"):F.type==="normal"&&k&&(this.next=k),x},finish:function(F){for(var k=this.tryEntries.length-1;k>=0;--k){var z=this.tryEntries[k];if(z.finallyLoc===F)return this.complete(z.completion,z.afterLoc),J(z),x}},catch:function(F){for(var k=this.tryEntries.length-1;k>=0;--k){var z=this.tryEntries[k];if(z.tryLoc===F){var G=z.completion;if(G.type==="throw"){var H=G.arg;J(z)}return H}}throw new Error("illegal catch attempt")},delegateYield:function(F,k,z){return this.delegate={iterator:te(F),resultName:k,nextLoc:z},this.method==="next"&&(this.arg=l),x}},n}(e.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})($P);var rm=(e,t)=>`${e}-${t}-${Math.random().toString(16).slice(3,8)}`;const HP=rm;let p0=0;var jw=({id:e,action:t,payload:n={}})=>{let r=e;return typeof r>"u"&&(r=HP("Job",p0),p0+=1),{id:r,action:t,payload:n}},Go={};let im=!1;Go.logging=im;Go.setLogging=e=>{im=e};Go.log=(...e)=>im?console.log.apply(void 0,e):null;const ZP=jw,{log:Fl}=Go,GP=rm;let m0=0;var WP=()=>{const e=GP("Scheduler",m0),t={},n={};let r=[];m0+=1;const o=()=>r.length,a=()=>Object.keys(t).length,l=()=>{if(r.length!==0){const g=Object.keys(t);for(let p=0;p<g.length;p+=1)if(typeof n[g[p]]>"u"){r[0](t[g[p]]);break}}},u=(g,p)=>new Promise((y,w)=>{const E=ZP({action:g,payload:p});r.push(async N=>{r.shift(),n[N.id]=E;try{y(await N[g].apply(void 0,[...p,E.id]))}catch(b){w(b)}finally{delete n[N.id],l()}}),Fl(`[${e}]: Add ${E.id} to JobQueue`),Fl(`[${e}]: JobQueue length=${r.length}`),l()});return{addWorker:g=>(t[g.id]=g,Fl(`[${e}]: Add ${g.id}`),Fl(`[${e}]: Number of workers=${a()}`),l(),g.id),addJob:async(g,...p)=>{if(a()===0)throw Error(`[${e}]: You need to have at least one worker before adding jobs`);return u(g,p)},terminate:async()=>{Object.keys(t).forEach(async g=>{await t[g].terminate()}),r=[]},getQueueLen:o,getNumWorkers:a}};function VP(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var KP=e=>{const t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof VP=="function"&&(t.type="node"),typeof e>"u"?t:t[e]};const qP=KP("type")==="browser",YP=qP?e=>new URL(e,window.location.href).href:e=>e;var QP=e=>{const t={...e};return["corePath","workerPath","langPath"].forEach(n=>{e[n]&&(t[n]=YP(t[n]))}),t},zw={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const JP="6.0.1",XP={version:JP};var eN={workerBlobURL:!0,logger:()=>{}};const tN=XP.version,nN=eN;var rN={...nN,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${tN}/dist/worker.min.js`},iN=({workerPath:e,workerBlobURL:t})=>{let n;if(Blob&&URL&&t){const r=new Blob([`importScripts("${e}");`],{type:"application/javascript"});n=new Worker(URL.createObjectURL(r))}else n=new Worker(e);return n},oN=e=>{e.terminate()},aN=(e,t)=>{e.onmessage=({data:n})=>{t(n)}},sN=async(e,t)=>{e.postMessage(t)};const ef=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=({target:{error:{code:o}}})=>{n(Error(`File could not be read! Code=${o}`))},r.readAsArrayBuffer(e)}),Dh=async e=>{let t=e;if(typeof e>"u")return"undefined";if(typeof e=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)?t=atob(e.split(",")[1]).split("").map(n=>n.charCodeAt(0)):t=await(await fetch(e)).arrayBuffer();else if(typeof HTMLElement<"u"&&e instanceof HTMLElement)e.tagName==="IMG"&&(t=await Dh(e.src)),e.tagName==="VIDEO"&&(t=await Dh(e.poster)),e.tagName==="CANVAS"&&await new Promise(n=>{e.toBlob(async r=>{t=await ef(r),n()})});else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas){const n=await e.convertToBlob();t=await ef(n)}else(e instanceof File||e instanceof Blob)&&(t=await ef(e));return new Uint8Array(t)};var lN=Dh;const uN=rN,cN=iN,dN=oN,fN=aN,hN=sN,pN=lN;var mN={defaultOptions:uN,spawnWorker:cN,terminateWorker:dN,onMessage:fN,send:hN,loadImage:pN};const gN=QP,Kn=jw,{log:g0}=Go,vN=rm,hi=zw,{defaultOptions:yN,spawnWorker:_N,terminateWorker:wN,onMessage:xN,loadImage:v0,send:bN}=mN;let y0=0;var Fw=async(e="eng",t=hi.LSTM_ONLY,n={},r={})=>{const o=vN("Worker",y0),{logger:a,errorHandler:l,...u}=gN({...yN,...n}),c={},f=typeof e=="string"?e.split("+"):e;let h=t,g=r;const p=[hi.DEFAULT,hi.LSTM_ONLY].includes(t)&&!u.legacyCore;let y,w;const E=new Promise((te,B)=>{w=te,y=B}),N=te=>{y(te.message)};let b=_N(u);b.onerror=N,y0+=1;const x=({id:te,action:B,payload:F})=>new Promise((k,z)=>{g0(`[${o}]: Start ${te}, action=${B}`);const G=`${B}-${te}`;c[G]={resolve:k,reject:z},bN(b,{workerId:o,jobId:te,action:B,payload:F})}),S=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),C=te=>x(Kn({id:te,action:"load",payload:{options:{lstmOnly:p,corePath:u.corePath,logging:u.logging}}})),D=(te,B,F)=>x(Kn({id:F,action:"FS",payload:{method:"writeFile",args:[te,B]}})),A=(te,B)=>x(Kn({id:B,action:"FS",payload:{method:"readFile",args:[te,{encoding:"utf8"}]}})),M=(te,B)=>x(Kn({id:B,action:"FS",payload:{method:"unlink",args:[te]}})),U=(te,B,F)=>x(Kn({id:F,action:"FS",payload:{method:te,args:B}})),I=(te,B)=>x(Kn({id:B,action:"loadLanguage",payload:{langs:te,options:{langPath:u.langPath,dataPath:u.dataPath,cachePath:u.cachePath,cacheMethod:u.cacheMethod,gzip:u.gzip,lstmOnly:[hi.DEFAULT,hi.LSTM_ONLY].includes(h)&&!u.legacyLang}}})),T=(te,B,F,k)=>x(Kn({id:k,action:"initialize",payload:{langs:te,oem:B,config:F}})),R=(te="eng",B,F,k)=>{if(p&&[hi.TESSERACT_ONLY,hi.TESSERACT_LSTM_COMBINED].includes(B))throw Error("Legacy model requested but code missing.");const z=B||h;h=z;const G=F||g;g=G;const K=(typeof te=="string"?te.split("+"):te).filter(ne=>!f.includes(ne));return f.push(...K),K.length>0?I(K,k).then(()=>T(te,z,G,k)):T(te,z,G,k)},V=(te={},B)=>x(Kn({id:B,action:"setParameters",payload:{params:te}})),Z=async(te,B={},F={text:!0},k)=>x(Kn({id:k,action:"recognize",payload:{image:await v0(te),options:B,output:F}})),q=async(te,B)=>{if(p)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return x(Kn({id:B,action:"detect",payload:{image:await v0(te)}}))},J=async()=>(b!==null&&(wN(b),b=null),Promise.resolve());xN(b,({workerId:te,jobId:B,status:F,action:k,data:z})=>{const G=`${k}-${B}`;if(F==="resolve")g0(`[${te}]: Complete ${B}`),c[G].resolve({jobId:B,data:z}),delete c[G];else if(F==="reject")if(c[G].reject(z),delete c[G],k==="load"&&y(z),l)l(z);else throw Error(z);else F==="progress"&&a({...z,userJobId:B})});const Y={id:o,worker:b,load:S,writeText:D,readText:A,removeFile:M,FS:U,reinitialize:R,setParameters:V,recognize:Z,detect:q,terminate:J};return C().then(()=>I(e)).then(()=>T(e,t,r)).then(()=>w(Y)).catch(()=>{}),E};const Uw=Fw,SN=async(e,t,n)=>{const r=await Uw(t,1,n);return r.recognize(e).finally(async()=>{await r.terminate()})},CN=async(e,t)=>{const n=await Uw("osd",0,t);return n.detect(e).finally(async()=>{await n.terminate()})};var EN={recognize:SN,detect:CN},PN={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},NN={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const kN=WP,IN=Fw,TN=EN,DN=PN,LN=zw,AN=NN,{setLogging:MN}=Go;var RN={languages:DN,OEM:LN,PSM:AN,createScheduler:kN,createWorker:IN,setLogging:MN,...TN};const ON=Uo(RN),BN=e=>new Promise(t=>{const n=new window.Image;n.onload=()=>{const o=Math.min(1,600/n.width),a=Math.round(n.width*o),l=Math.round(n.height*o),u=document.createElement("canvas");u.width=a,u.height=l;const c=u.getContext("2d");c.drawImage(n,0,0,a,l);const f=c.getImageData(0,0,a,l);for(let g=0;g<f.data.length;g+=4){const p=(f.data[g]+f.data[g+1]+f.data[g+2])/3;f.data[g]=f.data[g+1]=f.data[g+2]=p}const h=jN(f.data);for(let g=0;g<f.data.length;g+=4){const p=f.data[g]>h?255:0;f.data[g]=f.data[g+1]=f.data[g+2]=p}c.putImageData(f,0,0),t(u.toDataURL())},n.src=e});function jN(e){let t=new Array(256).fill(0);for(let f=0;f<e.length;f+=4)t[e[f]]++;let n=e.length/4,r=0;for(let f=0;f<256;f++)r+=f*t[f];let o=0,a=0,l=0,u=0,c=0;for(let f=0;f<256;f++){if(a+=t[f],a===0)continue;if(l=n-a,l===0)break;o+=f*t[f];let h=o/a,g=(r-o)/l,p=a*l*(h-g)*(h-g);p>u&&(u=p,c=f)}return c}const zN=async(e,t=2e4)=>{const n=await $w(e),r=await BN(n),o=ON.recognize(r,"jpn",{logger:l=>console.log(l),params:{tessedit_pageseg_mode:"6"}}).then(l=>l.data.text),a=new Promise((l,u)=>setTimeout(()=>u(new Error("OCRタイムアウト")),t));return Promise.race([o,a])},$w=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=o=>t(o.target?.result),r.onerror=n,r.readAsDataURL(e)});var Rs={},FN=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Hw={},mn={};let om;const UN=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];mn.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};mn.getSymbolTotalCodewords=function(t){return UN[t]};mn.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};mn.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');om=t};mn.isKanjiModeEnabled=function(){return typeof om<"u"};mn.toSJIS=function(t){return om(t)};var wc={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+n)}}e.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},e.from=function(r,o){if(e.isValid(r))return r;try{return t(r)}catch{return o}}})(wc);function Zw(){this.buffer=[],this.length=0}Zw.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var $N=Zw;function Os(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}Os.prototype.set=function(e,t,n,r){const o=e*this.size+t;this.data[o]=n,r&&(this.reservedBit[o]=!0)};Os.prototype.get=function(e,t){return this.data[e*this.size+t]};Os.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};Os.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var HN=Os,Gw={};(function(e){const t=mn.getSymbolSize;e.getRowColCoords=function(r){if(r===1)return[];const o=Math.floor(r/7)+2,a=t(r),l=a===145?26:Math.ceil((a-13)/(2*o-2))*2,u=[a-7];for(let c=1;c<o-1;c++)u[c]=u[c-1]-l;return u.push(6),u.reverse()},e.getPositions=function(r){const o=[],a=e.getRowColCoords(r),l=a.length;for(let u=0;u<l;u++)for(let c=0;c<l;c++)u===0&&c===0||u===0&&c===l-1||u===l-1&&c===0||o.push([a[u],a[c]]);return o}})(Gw);var Ww={};const ZN=mn.getSymbolSize,_0=7;Ww.getPositions=function(t){const n=ZN(t);return[[0,0],[n-_0,0],[0,n-_0]]};var Vw={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},e.from=function(o){return e.isValid(o)?parseInt(o,10):void 0},e.getPenaltyN1=function(o){const a=o.size;let l=0,u=0,c=0,f=null,h=null;for(let g=0;g<a;g++){u=c=0,f=h=null;for(let p=0;p<a;p++){let y=o.get(g,p);y===f?u++:(u>=5&&(l+=t.N1+(u-5)),f=y,u=1),y=o.get(p,g),y===h?c++:(c>=5&&(l+=t.N1+(c-5)),h=y,c=1)}u>=5&&(l+=t.N1+(u-5)),c>=5&&(l+=t.N1+(c-5))}return l},e.getPenaltyN2=function(o){const a=o.size;let l=0;for(let u=0;u<a-1;u++)for(let c=0;c<a-1;c++){const f=o.get(u,c)+o.get(u,c+1)+o.get(u+1,c)+o.get(u+1,c+1);(f===4||f===0)&&l++}return l*t.N2},e.getPenaltyN3=function(o){const a=o.size;let l=0,u=0,c=0;for(let f=0;f<a;f++){u=c=0;for(let h=0;h<a;h++)u=u<<1&2047|o.get(f,h),h>=10&&(u===1488||u===93)&&l++,c=c<<1&2047|o.get(h,f),h>=10&&(c===1488||c===93)&&l++}return l*t.N3},e.getPenaltyN4=function(o){let a=0;const l=o.data.length;for(let c=0;c<l;c++)a+=o.data[c];return Math.abs(Math.ceil(a*100/l/5)-10)*t.N4};function n(r,o,a){switch(r){case e.Patterns.PATTERN000:return(o+a)%2===0;case e.Patterns.PATTERN001:return o%2===0;case e.Patterns.PATTERN010:return a%3===0;case e.Patterns.PATTERN011:return(o+a)%3===0;case e.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(a/3))%2===0;case e.Patterns.PATTERN101:return o*a%2+o*a%3===0;case e.Patterns.PATTERN110:return(o*a%2+o*a%3)%2===0;case e.Patterns.PATTERN111:return(o*a%3+(o+a)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}e.applyMask=function(o,a){const l=a.size;for(let u=0;u<l;u++)for(let c=0;c<l;c++)a.isReserved(c,u)||a.xor(c,u,n(o,c,u))},e.getBestMask=function(o,a){const l=Object.keys(e.Patterns).length;let u=0,c=1/0;for(let f=0;f<l;f++){a(f),e.applyMask(f,o);const h=e.getPenaltyN1(o)+e.getPenaltyN2(o)+e.getPenaltyN3(o)+e.getPenaltyN4(o);e.applyMask(f,o),h<c&&(c=h,u=f)}return u}})(Vw);var xc={};const Or=wc,Ul=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],$l=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];xc.getBlocksCount=function(t,n){switch(n){case Or.L:return Ul[(t-1)*4+0];case Or.M:return Ul[(t-1)*4+1];case Or.Q:return Ul[(t-1)*4+2];case Or.H:return Ul[(t-1)*4+3];default:return}};xc.getTotalCodewordsCount=function(t,n){switch(n){case Or.L:return $l[(t-1)*4+0];case Or.M:return $l[(t-1)*4+1];case Or.Q:return $l[(t-1)*4+2];case Or.H:return $l[(t-1)*4+3];default:return}};var Kw={},bc={};const Ua=new Uint8Array(512),$u=new Uint8Array(256);(function(){let t=1;for(let n=0;n<255;n++)Ua[n]=t,$u[t]=n,t<<=1,t&256&&(t^=285);for(let n=255;n<512;n++)Ua[n]=Ua[n-255]})();bc.log=function(t){if(t<1)throw new Error("log("+t+")");return $u[t]};bc.exp=function(t){return Ua[t]};bc.mul=function(t,n){return t===0||n===0?0:Ua[$u[t]+$u[n]]};(function(e){const t=bc;e.mul=function(r,o){const a=new Uint8Array(r.length+o.length-1);for(let l=0;l<r.length;l++)for(let u=0;u<o.length;u++)a[l+u]^=t.mul(r[l],o[u]);return a},e.mod=function(r,o){let a=new Uint8Array(r);for(;a.length-o.length>=0;){const l=a[0];for(let c=0;c<o.length;c++)a[c]^=t.mul(o[c],l);let u=0;for(;u<a.length&&a[u]===0;)u++;a=a.slice(u)}return a},e.generateECPolynomial=function(r){let o=new Uint8Array([1]);for(let a=0;a<r;a++)o=e.mul(o,new Uint8Array([1,t.exp(a)]));return o}})(Kw);const qw=Kw;function am(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}am.prototype.initialize=function(t){this.degree=t,this.genPoly=qw.generateECPolynomial(this.degree)};am.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(t.length+this.degree);n.set(t);const r=qw.mod(n,this.genPoly),o=this.degree-r.length;if(o>0){const a=new Uint8Array(this.degree);return a.set(r,o),a}return r};var GN=am,Yw={},oi={},sm={};sm.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var or={};const Qw="[0-9]+",WN="[A-Z $%*+\\-./:]+";let ms="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ms=ms.replace(/u/g,"\\u");const VN="(?:(?![A-Z0-9 $%*+\\-./:]|"+ms+`)(?:.|[\r
]))+`;or.KANJI=new RegExp(ms,"g");or.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");or.BYTE=new RegExp(VN,"g");or.NUMERIC=new RegExp(Qw,"g");or.ALPHANUMERIC=new RegExp(WN,"g");const KN=new RegExp("^"+ms+"$"),qN=new RegExp("^"+Qw+"$"),YN=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");or.testKanji=function(t){return KN.test(t)};or.testNumeric=function(t){return qN.test(t)};or.testAlphanumeric=function(t){return YN.test(t)};(function(e){const t=sm,n=or;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(a,l){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!t.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?a.ccBits[0]:l<27?a.ccBits[1]:a.ccBits[2]},e.getBestModeForData=function(a){return n.testNumeric(a)?e.NUMERIC:n.testAlphanumeric(a)?e.ALPHANUMERIC:n.testKanji(a)?e.KANJI:e.BYTE},e.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},e.isValid=function(a){return a&&a.bit&&a.ccBits};function r(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+o)}}e.from=function(a,l){if(e.isValid(a))return a;try{return r(a)}catch{return l}}})(oi);(function(e){const t=mn,n=xc,r=wc,o=oi,a=sm,l=7973,u=t.getBCHDigit(l);function c(p,y,w){for(let E=1;E<=40;E++)if(y<=e.getCapacity(E,w,p))return E}function f(p,y){return o.getCharCountIndicator(p,y)+4}function h(p,y){let w=0;return p.forEach(function(E){const N=f(E.mode,y);w+=N+E.getBitsLength()}),w}function g(p,y){for(let w=1;w<=40;w++)if(h(p,w)<=e.getCapacity(w,y,o.MIXED))return w}e.from=function(y,w){return a.isValid(y)?parseInt(y,10):w},e.getCapacity=function(y,w,E){if(!a.isValid(y))throw new Error("Invalid QR Code version");typeof E>"u"&&(E=o.BYTE);const N=t.getSymbolTotalCodewords(y),b=n.getTotalCodewordsCount(y,w),x=(N-b)*8;if(E===o.MIXED)return x;const S=x-f(E,y);switch(E){case o.NUMERIC:return Math.floor(S/10*3);case o.ALPHANUMERIC:return Math.floor(S/11*2);case o.KANJI:return Math.floor(S/13);case o.BYTE:default:return Math.floor(S/8)}},e.getBestVersionForData=function(y,w){let E;const N=r.from(w,r.M);if(Array.isArray(y)){if(y.length>1)return g(y,N);if(y.length===0)return 1;E=y[0]}else E=y;return c(E.mode,E.getLength(),N)},e.getEncodedBits=function(y){if(!a.isValid(y)||y<7)throw new Error("Invalid QR Code version");let w=y<<12;for(;t.getBCHDigit(w)-u>=0;)w^=l<<t.getBCHDigit(w)-u;return y<<12|w}})(Yw);var Jw={};const Lh=mn,Xw=1335,QN=21522,w0=Lh.getBCHDigit(Xw);Jw.getEncodedBits=function(t,n){const r=t.bit<<3|n;let o=r<<10;for(;Lh.getBCHDigit(o)-w0>=0;)o^=Xw<<Lh.getBCHDigit(o)-w0;return(r<<10|o)^QN};var ex={};const JN=oi;function Lo(e){this.mode=JN.NUMERIC,this.data=e.toString()}Lo.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};Lo.prototype.getLength=function(){return this.data.length};Lo.prototype.getBitsLength=function(){return Lo.getBitsLength(this.data.length)};Lo.prototype.write=function(t){let n,r,o;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),o=parseInt(r,10),t.put(o,10);const a=this.data.length-n;a>0&&(r=this.data.substr(n),o=parseInt(r,10),t.put(o,a*3+1))};var XN=Lo;const ek=oi,tf=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Ao(e){this.mode=ek.ALPHANUMERIC,this.data=e}Ao.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};Ao.prototype.getLength=function(){return this.data.length};Ao.prototype.getBitsLength=function(){return Ao.getBitsLength(this.data.length)};Ao.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let r=tf.indexOf(this.data[n])*45;r+=tf.indexOf(this.data[n+1]),t.put(r,11)}this.data.length%2&&t.put(tf.indexOf(this.data[n]),6)};var tk=Ao;const nk=oi;function Mo(e){this.mode=nk.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}Mo.getBitsLength=function(t){return t*8};Mo.prototype.getLength=function(){return this.data.length};Mo.prototype.getBitsLength=function(){return Mo.getBitsLength(this.data.length)};Mo.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};var rk=Mo;const ik=oi,ok=mn;function Ro(e){this.mode=ik.KANJI,this.data=e}Ro.getBitsLength=function(t){return t*13};Ro.prototype.getLength=function(){return this.data.length};Ro.prototype.getBitsLength=function(){return Ro.getBitsLength(this.data.length)};Ro.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=ok.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}};var ak=Ro,tx={exports:{}};(function(e){var t={single_source_shortest_paths:function(n,r,o){var a={},l={};l[r]=0;var u=t.PriorityQueue.make();u.push(r,0);for(var c,f,h,g,p,y,w,E,N;!u.empty();){c=u.pop(),f=c.value,g=c.cost,p=n[f]||{};for(h in p)p.hasOwnProperty(h)&&(y=p[h],w=g+y,E=l[h],N=typeof l[h]>"u",(N||E>w)&&(l[h]=w,u.push(h,w),a[h]=f))}if(typeof o<"u"&&typeof l[o]>"u"){var b=["Could not find a path from ",r," to ",o,"."].join("");throw new Error(b)}return a},extract_shortest_path_from_predecessor_list:function(n,r){for(var o=[],a=r;a;)o.push(a),n[a],a=n[a];return o.reverse(),o},find_path:function(n,r,o){var a=t.single_source_shortest_paths(n,r,o);return t.extract_shortest_path_from_predecessor_list(a,o)},PriorityQueue:{make:function(n){var r=t.PriorityQueue,o={},a;n=n||{};for(a in r)r.hasOwnProperty(a)&&(o[a]=r[a]);return o.queue=[],o.sorter=n.sorter||r.default_sorter,o},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var o={value:n,cost:r};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(tx);var sk=tx.exports;(function(e){const t=oi,n=XN,r=tk,o=rk,a=ak,l=or,u=mn,c=sk;function f(b){return unescape(encodeURIComponent(b)).length}function h(b,x,S){const C=[];let D;for(;(D=b.exec(S))!==null;)C.push({data:D[0],index:D.index,mode:x,length:D[0].length});return C}function g(b){const x=h(l.NUMERIC,t.NUMERIC,b),S=h(l.ALPHANUMERIC,t.ALPHANUMERIC,b);let C,D;return u.isKanjiModeEnabled()?(C=h(l.BYTE,t.BYTE,b),D=h(l.KANJI,t.KANJI,b)):(C=h(l.BYTE_KANJI,t.BYTE,b),D=[]),x.concat(S,C,D).sort(function(M,U){return M.index-U.index}).map(function(M){return{data:M.data,mode:M.mode,length:M.length}})}function p(b,x){switch(x){case t.NUMERIC:return n.getBitsLength(b);case t.ALPHANUMERIC:return r.getBitsLength(b);case t.KANJI:return a.getBitsLength(b);case t.BYTE:return o.getBitsLength(b)}}function y(b){return b.reduce(function(x,S){const C=x.length-1>=0?x[x.length-1]:null;return C&&C.mode===S.mode?(x[x.length-1].data+=S.data,x):(x.push(S),x)},[])}function w(b){const x=[];for(let S=0;S<b.length;S++){const C=b[S];switch(C.mode){case t.NUMERIC:x.push([C,{data:C.data,mode:t.ALPHANUMERIC,length:C.length},{data:C.data,mode:t.BYTE,length:C.length}]);break;case t.ALPHANUMERIC:x.push([C,{data:C.data,mode:t.BYTE,length:C.length}]);break;case t.KANJI:x.push([C,{data:C.data,mode:t.BYTE,length:f(C.data)}]);break;case t.BYTE:x.push([{data:C.data,mode:t.BYTE,length:f(C.data)}])}}return x}function E(b,x){const S={},C={start:{}};let D=["start"];for(let A=0;A<b.length;A++){const M=b[A],U=[];for(let I=0;I<M.length;I++){const T=M[I],R=""+A+I;U.push(R),S[R]={node:T,lastCount:0},C[R]={};for(let V=0;V<D.length;V++){const Z=D[V];S[Z]&&S[Z].node.mode===T.mode?(C[Z][R]=p(S[Z].lastCount+T.length,T.mode)-p(S[Z].lastCount,T.mode),S[Z].lastCount+=T.length):(S[Z]&&(S[Z].lastCount=T.length),C[Z][R]=p(T.length,T.mode)+4+t.getCharCountIndicator(T.mode,x))}}D=U}for(let A=0;A<D.length;A++)C[D[A]].end=0;return{map:C,table:S}}function N(b,x){let S;const C=t.getBestModeForData(b);if(S=t.from(x,C),S!==t.BYTE&&S.bit<C.bit)throw new Error('"'+b+'" cannot be encoded with mode '+t.toString(S)+`.
 Suggested mode is: `+t.toString(C));switch(S===t.KANJI&&!u.isKanjiModeEnabled()&&(S=t.BYTE),S){case t.NUMERIC:return new n(b);case t.ALPHANUMERIC:return new r(b);case t.KANJI:return new a(b);case t.BYTE:return new o(b)}}e.fromArray=function(x){return x.reduce(function(S,C){return typeof C=="string"?S.push(N(C,null)):C.data&&S.push(N(C.data,C.mode)),S},[])},e.fromString=function(x,S){const C=g(x,u.isKanjiModeEnabled()),D=w(C),A=E(D,S),M=c.find_path(A.map,"start","end"),U=[];for(let I=1;I<M.length-1;I++)U.push(A.table[M[I]].node);return e.fromArray(y(U))},e.rawSplit=function(x){return e.fromArray(g(x,u.isKanjiModeEnabled()))}})(ex);const Sc=mn,nf=wc,lk=$N,uk=HN,ck=Gw,dk=Ww,Ah=Vw,Mh=xc,fk=GN,Hu=Yw,hk=Jw,pk=oi,rf=ex;function mk(e,t){const n=e.size,r=dk.getPositions(t);for(let o=0;o<r.length;o++){const a=r[o][0],l=r[o][1];for(let u=-1;u<=7;u++)if(!(a+u<=-1||n<=a+u))for(let c=-1;c<=7;c++)l+c<=-1||n<=l+c||(u>=0&&u<=6&&(c===0||c===6)||c>=0&&c<=6&&(u===0||u===6)||u>=2&&u<=4&&c>=2&&c<=4?e.set(a+u,l+c,!0,!0):e.set(a+u,l+c,!1,!0))}}function gk(e){const t=e.size;for(let n=8;n<t-8;n++){const r=n%2===0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}function vk(e,t){const n=ck.getPositions(t);for(let r=0;r<n.length;r++){const o=n[r][0],a=n[r][1];for(let l=-2;l<=2;l++)for(let u=-2;u<=2;u++)l===-2||l===2||u===-2||u===2||l===0&&u===0?e.set(o+l,a+u,!0,!0):e.set(o+l,a+u,!1,!0)}}function yk(e,t){const n=e.size,r=Hu.getEncodedBits(t);let o,a,l;for(let u=0;u<18;u++)o=Math.floor(u/3),a=u%3+n-8-3,l=(r>>u&1)===1,e.set(o,a,l,!0),e.set(a,o,l,!0)}function of(e,t,n){const r=e.size,o=hk.getEncodedBits(t,n);let a,l;for(a=0;a<15;a++)l=(o>>a&1)===1,a<6?e.set(a,8,l,!0):a<8?e.set(a+1,8,l,!0):e.set(r-15+a,8,l,!0),a<8?e.set(8,r-a-1,l,!0):a<9?e.set(8,15-a-1+1,l,!0):e.set(8,15-a-1,l,!0);e.set(r-8,8,1,!0)}function _k(e,t){const n=e.size;let r=-1,o=n-1,a=7,l=0;for(let u=n-1;u>0;u-=2)for(u===6&&u--;;){for(let c=0;c<2;c++)if(!e.isReserved(o,u-c)){let f=!1;l<t.length&&(f=(t[l]>>>a&1)===1),e.set(o,u-c,f),a--,a===-1&&(l++,a=7)}if(o+=r,o<0||n<=o){o-=r,r=-r;break}}}function wk(e,t,n){const r=new lk;n.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),pk.getCharCountIndicator(c.mode,e)),c.write(r)});const o=Sc.getSymbolTotalCodewords(e),a=Mh.getTotalCodewordsCount(e,t),l=(o-a)*8;for(r.getLengthInBits()+4<=l&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const u=(l-r.getLengthInBits())/8;for(let c=0;c<u;c++)r.put(c%2?17:236,8);return xk(r,e,t)}function xk(e,t,n){const r=Sc.getSymbolTotalCodewords(t),o=Mh.getTotalCodewordsCount(t,n),a=r-o,l=Mh.getBlocksCount(t,n),u=r%l,c=l-u,f=Math.floor(r/l),h=Math.floor(a/l),g=h+1,p=f-h,y=new fk(p);let w=0;const E=new Array(l),N=new Array(l);let b=0;const x=new Uint8Array(e.buffer);for(let M=0;M<l;M++){const U=M<c?h:g;E[M]=x.slice(w,w+U),N[M]=y.encode(E[M]),w+=U,b=Math.max(b,U)}const S=new Uint8Array(r);let C=0,D,A;for(D=0;D<b;D++)for(A=0;A<l;A++)D<E[A].length&&(S[C++]=E[A][D]);for(D=0;D<p;D++)for(A=0;A<l;A++)S[C++]=N[A][D];return S}function bk(e,t,n,r){let o;if(Array.isArray(e))o=rf.fromArray(e);else if(typeof e=="string"){let f=t;if(!f){const h=rf.rawSplit(e);f=Hu.getBestVersionForData(h,n)}o=rf.fromString(e,f||40)}else throw new Error("Invalid data");const a=Hu.getBestVersionForData(o,n);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=a;else if(t<a)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+a+`.
`);const l=wk(t,n,o),u=Sc.getSymbolSize(t),c=new uk(u);return mk(c,t),gk(c),vk(c,t),of(c,n,0),t>=7&&yk(c,t),_k(c,l),isNaN(r)&&(r=Ah.getBestMask(c,of.bind(null,c,n))),Ah.applyMask(r,c),of(c,n,r),{modules:c,version:t,errorCorrectionLevel:n,maskPattern:r,segments:o}}Hw.create=function(t,n){if(typeof t>"u"||t==="")throw new Error("No input text");let r=nf.M,o,a;return typeof n<"u"&&(r=nf.from(n.errorCorrectionLevel,nf.M),o=Hu.from(n.version),a=Ah.from(n.maskPattern),n.toSJISFunc&&Sc.setToSJISFunction(n.toSJISFunc)),bk(t,o,r,a)};var nx={},lm={};(function(e){function t(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(a){return[a,a]}))),r.length===6&&r.push("F","F");const o=parseInt(r.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+r.slice(0,6).join("")}}e.getOptions=function(r){r||(r={}),r.color||(r.color={});const o=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,a=r.width&&r.width>=21?r.width:void 0,l=r.scale||4;return{width:a,scale:a?4:l,margin:o,color:{dark:t(r.color.dark||"#000000ff"),light:t(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},e.getScale=function(r,o){return o.width&&o.width>=r+o.margin*2?o.width/(r+o.margin*2):o.scale},e.getImageWidth=function(r,o){const a=e.getScale(r,o);return Math.floor((r+o.margin*2)*a)},e.qrToImageData=function(r,o,a){const l=o.modules.size,u=o.modules.data,c=e.getScale(l,a),f=Math.floor((l+a.margin*2)*c),h=a.margin*c,g=[a.color.light,a.color.dark];for(let p=0;p<f;p++)for(let y=0;y<f;y++){let w=(p*f+y)*4,E=a.color.light;if(p>=h&&y>=h&&p<f-h&&y<f-h){const N=Math.floor((p-h)/c),b=Math.floor((y-h)/c);E=g[u[N*l+b]?1:0]}r[w++]=E.r,r[w++]=E.g,r[w++]=E.b,r[w]=E.a}}})(lm);(function(e){const t=lm;function n(o,a,l){o.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=l,a.width=l,a.style.height=l+"px",a.style.width=l+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(a,l,u){let c=u,f=l;typeof c>"u"&&(!l||!l.getContext)&&(c=l,l=void 0),l||(f=r()),c=t.getOptions(c);const h=t.getImageWidth(a.modules.size,c),g=f.getContext("2d"),p=g.createImageData(h,h);return t.qrToImageData(p.data,a,c),n(g,f,h),g.putImageData(p,0,0),f},e.renderToDataURL=function(a,l,u){let c=u;typeof c>"u"&&(!l||!l.getContext)&&(c=l,l=void 0),c||(c={});const f=e.render(a,l,c),h=c.type||"image/png",g=c.rendererOpts||{};return f.toDataURL(h,g.quality)}})(nx);var rx={};const Sk=lm;function x0(e,t){const n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function af(e,t,n){let r=e+t;return typeof n<"u"&&(r+=" "+n),r}function Ck(e,t,n){let r="",o=0,a=!1,l=0;for(let u=0;u<e.length;u++){const c=Math.floor(u%t),f=Math.floor(u/t);!c&&!a&&(a=!0),e[u]?(l++,u>0&&c>0&&e[u-1]||(r+=a?af("M",c+n,.5+f+n):af("m",o,0),o=0,a=!1),c+1<t&&e[u+1]||(r+=af("h",l),l=0)):o++}return r}rx.render=function(t,n,r){const o=Sk.getOptions(n),a=t.modules.size,l=t.modules.data,u=a+o.margin*2,c=o.color.light.a?"<path "+x0(o.color.light,"fill")+' d="M0 0h'+u+"v"+u+'H0z"/>':"",f="<path "+x0(o.color.dark,"stroke")+' d="'+Ck(l,a,o.margin)+'"/>',h='viewBox="0 0 '+u+" "+u+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+h+' shape-rendering="crispEdges">'+c+f+`</svg>
`;return typeof r=="function"&&r(null,p),p};const Ek=FN,Rh=Hw,ix=nx,Pk=rx;function um(e,t,n,r,o){const a=[].slice.call(arguments,1),l=a.length,u=typeof a[l-1]=="function";if(!u&&!Ek())throw new Error("Callback required as last argument");if(u){if(l<2)throw new Error("Too few arguments provided");l===2?(o=n,n=t,t=r=void 0):l===3&&(t.getContext&&typeof o>"u"?(o=r,r=void 0):(o=r,r=n,n=t,t=void 0))}else{if(l<1)throw new Error("Too few arguments provided");return l===1?(n=t,t=r=void 0):l===2&&!t.getContext&&(r=n,n=t,t=void 0),new Promise(function(c,f){try{const h=Rh.create(n,r);c(e(h,t,r))}catch(h){f(h)}})}try{const c=Rh.create(n,r);o(null,e(c,t,r))}catch(c){o(c)}}Rs.create=Rh.create;Rs.toCanvas=um.bind(null,ix.render);Rs.toDataURL=um.bind(null,ix.renderToDataURL);Rs.toString=um.bind(null,function(e,t,n){return Pk.render(e,n)});/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Nk=4,b0=0,S0=1,kk=2;function Wo(e){let t=e.length;for(;--t>=0;)e[t]=0}const Ik=0,ox=1,Tk=2,Dk=3,Lk=258,cm=29,Bs=256,gs=Bs+1+cm,Co=30,dm=19,ax=2*gs+1,bi=15,sf=16,Ak=7,fm=256,sx=16,lx=17,ux=18,Oh=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),fu=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Mk=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),cx=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Rk=512,mr=new Array((gs+2)*2);Wo(mr);const $a=new Array(Co*2);Wo($a);const vs=new Array(Rk);Wo(vs);const ys=new Array(Lk-Dk+1);Wo(ys);const hm=new Array(cm);Wo(hm);const Zu=new Array(Co);Wo(Zu);function lf(e,t,n,r,o){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=o,this.has_stree=e&&e.length}let dx,fx,hx;function uf(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const px=e=>e<256?vs[e]:vs[256+(e>>>7)],_s=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},Jt=(e,t,n)=>{e.bi_valid>sf-n?(e.bi_buf|=t<<e.bi_valid&65535,_s(e,e.bi_buf),e.bi_buf=t>>sf-e.bi_valid,e.bi_valid+=n-sf):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Xn=(e,t,n)=>{Jt(e,n[t*2],n[t*2+1])},mx=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},Ok=e=>{e.bi_valid===16?(_s(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},Bk=(e,t)=>{const n=t.dyn_tree,r=t.max_code,o=t.stat_desc.static_tree,a=t.stat_desc.has_stree,l=t.stat_desc.extra_bits,u=t.stat_desc.extra_base,c=t.stat_desc.max_length;let f,h,g,p,y,w,E=0;for(p=0;p<=bi;p++)e.bl_count[p]=0;for(n[e.heap[e.heap_max]*2+1]=0,f=e.heap_max+1;f<ax;f++)h=e.heap[f],p=n[n[h*2+1]*2+1]+1,p>c&&(p=c,E++),n[h*2+1]=p,!(h>r)&&(e.bl_count[p]++,y=0,h>=u&&(y=l[h-u]),w=n[h*2],e.opt_len+=w*(p+y),a&&(e.static_len+=w*(o[h*2+1]+y)));if(E!==0){do{for(p=c-1;e.bl_count[p]===0;)p--;e.bl_count[p]--,e.bl_count[p+1]+=2,e.bl_count[c]--,E-=2}while(E>0);for(p=c;p!==0;p--)for(h=e.bl_count[p];h!==0;)g=e.heap[--f],!(g>r)&&(n[g*2+1]!==p&&(e.opt_len+=(p-n[g*2+1])*n[g*2],n[g*2+1]=p),h--)}},gx=(e,t,n)=>{const r=new Array(bi+1);let o=0,a,l;for(a=1;a<=bi;a++)o=o+n[a-1]<<1,r[a]=o;for(l=0;l<=t;l++){let u=e[l*2+1];u!==0&&(e[l*2]=mx(r[u]++,u))}},jk=()=>{let e,t,n,r,o;const a=new Array(bi+1);for(n=0,r=0;r<cm-1;r++)for(hm[r]=n,e=0;e<1<<Oh[r];e++)ys[n++]=r;for(ys[n-1]=r,o=0,r=0;r<16;r++)for(Zu[r]=o,e=0;e<1<<fu[r];e++)vs[o++]=r;for(o>>=7;r<Co;r++)for(Zu[r]=o<<7,e=0;e<1<<fu[r]-7;e++)vs[256+o++]=r;for(t=0;t<=bi;t++)a[t]=0;for(e=0;e<=143;)mr[e*2+1]=8,e++,a[8]++;for(;e<=255;)mr[e*2+1]=9,e++,a[9]++;for(;e<=279;)mr[e*2+1]=7,e++,a[7]++;for(;e<=287;)mr[e*2+1]=8,e++,a[8]++;for(gx(mr,gs+1,a),e=0;e<Co;e++)$a[e*2+1]=5,$a[e*2]=mx(e,5);dx=new lf(mr,Oh,Bs+1,gs,bi),fx=new lf($a,fu,0,Co,bi),hx=new lf(new Array(0),Mk,0,dm,Ak)},vx=e=>{let t;for(t=0;t<gs;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Co;t++)e.dyn_dtree[t*2]=0;for(t=0;t<dm;t++)e.bl_tree[t*2]=0;e.dyn_ltree[fm*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},yx=e=>{e.bi_valid>8?_s(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},C0=(e,t,n,r)=>{const o=t*2,a=n*2;return e[o]<e[a]||e[o]===e[a]&&r[t]<=r[n]},cf=(e,t,n)=>{const r=e.heap[n];let o=n<<1;for(;o<=e.heap_len&&(o<e.heap_len&&C0(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!C0(t,r,e.heap[o],e.depth));)e.heap[n]=e.heap[o],n=o,o<<=1;e.heap[n]=r},E0=(e,t,n)=>{let r,o,a=0,l,u;if(e.sym_next!==0)do r=e.pending_buf[e.sym_buf+a++]&255,r+=(e.pending_buf[e.sym_buf+a++]&255)<<8,o=e.pending_buf[e.sym_buf+a++],r===0?Xn(e,o,t):(l=ys[o],Xn(e,l+Bs+1,t),u=Oh[l],u!==0&&(o-=hm[l],Jt(e,o,u)),r--,l=px(r),Xn(e,l,n),u=fu[l],u!==0&&(r-=Zu[l],Jt(e,r,u)));while(a<e.sym_next);Xn(e,fm,t)},Bh=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,o=t.stat_desc.has_stree,a=t.stat_desc.elems;let l,u,c=-1,f;for(e.heap_len=0,e.heap_max=ax,l=0;l<a;l++)n[l*2]!==0?(e.heap[++e.heap_len]=c=l,e.depth[l]=0):n[l*2+1]=0;for(;e.heap_len<2;)f=e.heap[++e.heap_len]=c<2?++c:0,n[f*2]=1,e.depth[f]=0,e.opt_len--,o&&(e.static_len-=r[f*2+1]);for(t.max_code=c,l=e.heap_len>>1;l>=1;l--)cf(e,n,l);f=a;do l=e.heap[1],e.heap[1]=e.heap[e.heap_len--],cf(e,n,1),u=e.heap[1],e.heap[--e.heap_max]=l,e.heap[--e.heap_max]=u,n[f*2]=n[l*2]+n[u*2],e.depth[f]=(e.depth[l]>=e.depth[u]?e.depth[l]:e.depth[u])+1,n[l*2+1]=n[u*2+1]=f,e.heap[1]=f++,cf(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Bk(e,t),gx(n,c,e.bl_count)},P0=(e,t,n)=>{let r,o=-1,a,l=t[0*2+1],u=0,c=7,f=4;for(l===0&&(c=138,f=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)a=l,l=t[(r+1)*2+1],!(++u<c&&a===l)&&(u<f?e.bl_tree[a*2]+=u:a!==0?(a!==o&&e.bl_tree[a*2]++,e.bl_tree[sx*2]++):u<=10?e.bl_tree[lx*2]++:e.bl_tree[ux*2]++,u=0,o=a,l===0?(c=138,f=3):a===l?(c=6,f=3):(c=7,f=4))},N0=(e,t,n)=>{let r,o=-1,a,l=t[0*2+1],u=0,c=7,f=4;for(l===0&&(c=138,f=3),r=0;r<=n;r++)if(a=l,l=t[(r+1)*2+1],!(++u<c&&a===l)){if(u<f)do Xn(e,a,e.bl_tree);while(--u!==0);else a!==0?(a!==o&&(Xn(e,a,e.bl_tree),u--),Xn(e,sx,e.bl_tree),Jt(e,u-3,2)):u<=10?(Xn(e,lx,e.bl_tree),Jt(e,u-3,3)):(Xn(e,ux,e.bl_tree),Jt(e,u-11,7));u=0,o=a,l===0?(c=138,f=3):a===l?(c=6,f=3):(c=7,f=4)}},zk=e=>{let t;for(P0(e,e.dyn_ltree,e.l_desc.max_code),P0(e,e.dyn_dtree,e.d_desc.max_code),Bh(e,e.bl_desc),t=dm-1;t>=3&&e.bl_tree[cx[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},Fk=(e,t,n,r)=>{let o;for(Jt(e,t-257,5),Jt(e,n-1,5),Jt(e,r-4,4),o=0;o<r;o++)Jt(e,e.bl_tree[cx[o]*2+1],3);N0(e,e.dyn_ltree,t-1),N0(e,e.dyn_dtree,n-1)},Uk=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return b0;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return S0;for(n=32;n<Bs;n++)if(e.dyn_ltree[n*2]!==0)return S0;return b0};let k0=!1;const $k=e=>{k0||(jk(),k0=!0),e.l_desc=new uf(e.dyn_ltree,dx),e.d_desc=new uf(e.dyn_dtree,fx),e.bl_desc=new uf(e.bl_tree,hx),e.bi_buf=0,e.bi_valid=0,vx(e)},_x=(e,t,n,r)=>{Jt(e,(Ik<<1)+(r?1:0),3),yx(e),_s(e,n),_s(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},Hk=e=>{Jt(e,ox<<1,3),Xn(e,fm,mr),Ok(e)},Zk=(e,t,n,r)=>{let o,a,l=0;e.level>0?(e.strm.data_type===kk&&(e.strm.data_type=Uk(e)),Bh(e,e.l_desc),Bh(e,e.d_desc),l=zk(e),o=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=o&&(o=a)):o=a=n+5,n+4<=o&&t!==-1?_x(e,t,n,r):e.strategy===Nk||a===o?(Jt(e,(ox<<1)+(r?1:0),3),E0(e,mr,$a)):(Jt(e,(Tk<<1)+(r?1:0),3),Fk(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),E0(e,e.dyn_ltree,e.dyn_dtree)),vx(e),r&&yx(e)},Gk=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(ys[n]+Bs+1)*2]++,e.dyn_dtree[px(t)*2]++),e.sym_next===e.sym_end);var Wk=$k,Vk=_x,Kk=Zk,qk=Gk,Yk=Hk,Qk={_tr_init:Wk,_tr_stored_block:Vk,_tr_flush_block:Kk,_tr_tally:qk,_tr_align:Yk};const Jk=(e,t,n,r)=>{let o=e&65535|0,a=e>>>16&65535|0,l=0;for(;n!==0;){l=n>2e3?2e3:n,n-=l;do o=o+t[r++]|0,a=a+o|0;while(--l);o%=65521,a%=65521}return o|a<<16|0};var ws=Jk;const Xk=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},eI=new Uint32Array(Xk()),tI=(e,t,n,r)=>{const o=eI,a=r+n;e^=-1;for(let l=r;l<a;l++)e=e>>>8^o[(e^t[l])&255];return e^-1};var gt=tI,Ri={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},js={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:nI,_tr_stored_block:jh,_tr_flush_block:rI,_tr_tally:Wr,_tr_align:iI}=Qk,{Z_NO_FLUSH:Vr,Z_PARTIAL_FLUSH:oI,Z_FULL_FLUSH:aI,Z_FINISH:Sn,Z_BLOCK:I0,Z_OK:kt,Z_STREAM_END:T0,Z_STREAM_ERROR:rr,Z_DATA_ERROR:sI,Z_BUF_ERROR:df,Z_DEFAULT_COMPRESSION:lI,Z_FILTERED:uI,Z_HUFFMAN_ONLY:Hl,Z_RLE:cI,Z_FIXED:dI,Z_DEFAULT_STRATEGY:fI,Z_UNKNOWN:hI,Z_DEFLATED:Cc}=js,pI=9,mI=15,gI=8,vI=29,yI=256,zh=yI+1+vI,_I=30,wI=19,xI=2*zh+1,bI=15,De=3,Br=258,ir=Br+De+1,SI=32,Oo=42,pm=57,Fh=69,Uh=73,$h=91,Hh=103,Si=113,ka=666,$t=1,Vo=2,Oi=3,Ko=4,CI=3,Ci=(e,t)=>(e.msg=Ri[t],t),D0=e=>e*2-(e>4?9:0),Ar=e=>{let t=e.length;for(;--t>=0;)e[t]=0},EI=e=>{let t,n,r,o=e.w_size;t=e.hash_size,r=t;do n=e.head[--r],e.head[r]=n>=o?n-o:0;while(--t);t=o,r=t;do n=e.prev[--r],e.prev[r]=n>=o?n-o:0;while(--t)};let PI=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,Kr=PI;const rn=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},sn=(e,t)=>{rI(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,rn(e.strm)},ze=(e,t)=>{e.pending_buf[e.pending++]=t},wa=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},Zh=(e,t,n,r)=>{let o=e.avail_in;return o>r&&(o=r),o===0?0:(e.avail_in-=o,t.set(e.input.subarray(e.next_in,e.next_in+o),n),e.state.wrap===1?e.adler=ws(e.adler,t,o,n):e.state.wrap===2&&(e.adler=gt(e.adler,t,o,n)),e.next_in+=o,e.total_in+=o,o)},wx=(e,t)=>{let n=e.max_chain_length,r=e.strstart,o,a,l=e.prev_length,u=e.nice_match;const c=e.strstart>e.w_size-ir?e.strstart-(e.w_size-ir):0,f=e.window,h=e.w_mask,g=e.prev,p=e.strstart+Br;let y=f[r+l-1],w=f[r+l];e.prev_length>=e.good_match&&(n>>=2),u>e.lookahead&&(u=e.lookahead);do if(o=t,!(f[o+l]!==w||f[o+l-1]!==y||f[o]!==f[r]||f[++o]!==f[r+1])){r+=2,o++;do;while(f[++r]===f[++o]&&f[++r]===f[++o]&&f[++r]===f[++o]&&f[++r]===f[++o]&&f[++r]===f[++o]&&f[++r]===f[++o]&&f[++r]===f[++o]&&f[++r]===f[++o]&&r<p);if(a=Br-(p-r),r=p-Br,a>l){if(e.match_start=t,l=a,a>=u)break;y=f[r+l-1],w=f[r+l]}}while((t=g[t&h])>c&&--n!==0);return l<=e.lookahead?l:e.lookahead},Bo=e=>{const t=e.w_size;let n,r,o;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-ir)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),EI(e),r+=t),e.strm.avail_in===0)break;if(n=Zh(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=De)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=Kr(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=Kr(e,e.ins_h,e.window[o+De-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<De)););}while(e.lookahead<ir&&e.strm.avail_in!==0)},xx=(e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r,o,a,l=0,u=e.strm.avail_in;do{if(r=65535,a=e.bi_valid+42>>3,e.strm.avail_out<a||(a=e.strm.avail_out-a,o=e.strstart-e.block_start,r>o+e.strm.avail_in&&(r=o+e.strm.avail_in),r>a&&(r=a),r<n&&(r===0&&t!==Sn||t===Vr||r!==o+e.strm.avail_in)))break;l=t===Sn&&r===o+e.strm.avail_in?1:0,jh(e,0,0,l),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,rn(e.strm),o&&(o>r&&(o=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+o),e.strm.next_out),e.strm.next_out+=o,e.strm.avail_out-=o,e.strm.total_out+=o,e.block_start+=o,r-=o),r&&(Zh(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(l===0);return u-=e.strm.avail_in,u&&(u>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=u&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-u,e.strm.next_in),e.strstart),e.strstart+=u,e.insert+=u>e.w_size-e.insert?e.w_size-e.insert:u),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),l?Ko:t!==Vr&&t!==Sn&&e.strm.avail_in===0&&e.strstart===e.block_start?Vo:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(Zh(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,a=e.pending_buf_size-a>65535?65535:e.pending_buf_size-a,n=a>e.w_size?e.w_size:a,o=e.strstart-e.block_start,(o>=n||(o||t===Sn)&&t!==Vr&&e.strm.avail_in===0&&o<=a)&&(r=o>a?a:o,l=t===Sn&&e.strm.avail_in===0&&r===o?1:0,jh(e,e.block_start,r,l),e.block_start+=r,rn(e.strm)),l?Oi:$t)},ff=(e,t)=>{let n,r;for(;;){if(e.lookahead<ir){if(Bo(e),e.lookahead<ir&&t===Vr)return $t;if(e.lookahead===0)break}if(n=0,e.lookahead>=De&&(e.ins_h=Kr(e,e.ins_h,e.window[e.strstart+De-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-ir&&(e.match_length=wx(e,n)),e.match_length>=De)if(r=Wr(e,e.strstart-e.match_start,e.match_length-De),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=De){e.match_length--;do e.strstart++,e.ins_h=Kr(e,e.ins_h,e.window[e.strstart+De-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Kr(e,e.ins_h,e.window[e.strstart+1]);else r=Wr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(sn(e,!1),e.strm.avail_out===0))return $t}return e.insert=e.strstart<De-1?e.strstart:De-1,t===Sn?(sn(e,!0),e.strm.avail_out===0?Oi:Ko):e.sym_next&&(sn(e,!1),e.strm.avail_out===0)?$t:Vo},Xi=(e,t)=>{let n,r,o;for(;;){if(e.lookahead<ir){if(Bo(e),e.lookahead<ir&&t===Vr)return $t;if(e.lookahead===0)break}if(n=0,e.lookahead>=De&&(e.ins_h=Kr(e,e.ins_h,e.window[e.strstart+De-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=De-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ir&&(e.match_length=wx(e,n),e.match_length<=5&&(e.strategy===uI||e.match_length===De&&e.strstart-e.match_start>4096)&&(e.match_length=De-1)),e.prev_length>=De&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-De,r=Wr(e,e.strstart-1-e.prev_match,e.prev_length-De),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=o&&(e.ins_h=Kr(e,e.ins_h,e.window[e.strstart+De-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=De-1,e.strstart++,r&&(sn(e,!1),e.strm.avail_out===0))return $t}else if(e.match_available){if(r=Wr(e,0,e.window[e.strstart-1]),r&&sn(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return $t}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Wr(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<De-1?e.strstart:De-1,t===Sn?(sn(e,!0),e.strm.avail_out===0?Oi:Ko):e.sym_next&&(sn(e,!1),e.strm.avail_out===0)?$t:Vo},NI=(e,t)=>{let n,r,o,a;const l=e.window;for(;;){if(e.lookahead<=Br){if(Bo(e),e.lookahead<=Br&&t===Vr)return $t;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=De&&e.strstart>0&&(o=e.strstart-1,r=l[o],r===l[++o]&&r===l[++o]&&r===l[++o])){a=e.strstart+Br;do;while(r===l[++o]&&r===l[++o]&&r===l[++o]&&r===l[++o]&&r===l[++o]&&r===l[++o]&&r===l[++o]&&r===l[++o]&&o<a);e.match_length=Br-(a-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=De?(n=Wr(e,1,e.match_length-De),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Wr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(sn(e,!1),e.strm.avail_out===0))return $t}return e.insert=0,t===Sn?(sn(e,!0),e.strm.avail_out===0?Oi:Ko):e.sym_next&&(sn(e,!1),e.strm.avail_out===0)?$t:Vo},kI=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(Bo(e),e.lookahead===0)){if(t===Vr)return $t;break}if(e.match_length=0,n=Wr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(sn(e,!1),e.strm.avail_out===0))return $t}return e.insert=0,t===Sn?(sn(e,!0),e.strm.avail_out===0?Oi:Ko):e.sym_next&&(sn(e,!1),e.strm.avail_out===0)?$t:Vo};function qn(e,t,n,r,o){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=o}const Ia=[new qn(0,0,0,0,xx),new qn(4,4,8,4,ff),new qn(4,5,16,8,ff),new qn(4,6,32,32,ff),new qn(4,4,16,16,Xi),new qn(8,16,32,32,Xi),new qn(8,16,128,128,Xi),new qn(8,32,128,256,Xi),new qn(32,128,258,1024,Xi),new qn(32,258,258,4096,Xi)],II=e=>{e.window_size=2*e.w_size,Ar(e.head),e.max_lazy_match=Ia[e.level].max_lazy,e.good_match=Ia[e.level].good_length,e.nice_match=Ia[e.level].nice_length,e.max_chain_length=Ia[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=De-1,e.match_available=0,e.ins_h=0};function TI(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Cc,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(xI*2),this.dyn_dtree=new Uint16Array((2*_I+1)*2),this.bl_tree=new Uint16Array((2*wI+1)*2),Ar(this.dyn_ltree),Ar(this.dyn_dtree),Ar(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(bI+1),this.heap=new Uint16Array(2*zh+1),Ar(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*zh+1),Ar(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const zs=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==Oo&&t.status!==pm&&t.status!==Fh&&t.status!==Uh&&t.status!==$h&&t.status!==Hh&&t.status!==Si&&t.status!==ka?1:0},bx=e=>{if(zs(e))return Ci(e,rr);e.total_in=e.total_out=0,e.data_type=hI;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?pm:t.wrap?Oo:Si,e.adler=t.wrap===2?0:1,t.last_flush=-2,nI(t),kt},Sx=e=>{const t=bx(e);return t===kt&&II(e.state),t},DI=(e,t)=>zs(e)||e.state.wrap!==2?rr:(e.state.gzhead=t,kt),Cx=(e,t,n,r,o,a)=>{if(!e)return rr;let l=1;if(t===lI&&(t=6),r<0?(l=0,r=-r):r>15&&(l=2,r-=16),o<1||o>pI||n!==Cc||r<8||r>15||t<0||t>9||a<0||a>dI||r===8&&l!==1)return Ci(e,rr);r===8&&(r=9);const u=new TI;return e.state=u,u.strm=e,u.status=Oo,u.wrap=l,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+De-1)/De),u.window=new Uint8Array(u.w_size*2),u.head=new Uint16Array(u.hash_size),u.prev=new Uint16Array(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=u.lit_bufsize*4,u.pending_buf=new Uint8Array(u.pending_buf_size),u.sym_buf=u.lit_bufsize,u.sym_end=(u.lit_bufsize-1)*3,u.level=t,u.strategy=a,u.method=n,Sx(e)},LI=(e,t)=>Cx(e,t,Cc,mI,gI,fI),AI=(e,t)=>{if(zs(e)||t>I0||t<0)return e?Ci(e,rr):rr;const n=e.state;if(!e.output||e.avail_in!==0&&!e.input||n.status===ka&&t!==Sn)return Ci(e,e.avail_out===0?df:rr);const r=n.last_flush;if(n.last_flush=t,n.pending!==0){if(rn(e),e.avail_out===0)return n.last_flush=-1,kt}else if(e.avail_in===0&&D0(t)<=D0(r)&&t!==Sn)return Ci(e,df);if(n.status===ka&&e.avail_in!==0)return Ci(e,df);if(n.status===Oo&&n.wrap===0&&(n.status=Si),n.status===Oo){let o=Cc+(n.w_bits-8<<4)<<8,a=-1;if(n.strategy>=Hl||n.level<2?a=0:n.level<6?a=1:n.level===6?a=2:a=3,o|=a<<6,n.strstart!==0&&(o|=SI),o+=31-o%31,wa(n,o),n.strstart!==0&&(wa(n,e.adler>>>16),wa(n,e.adler&65535)),e.adler=1,n.status=Si,rn(e),n.pending!==0)return n.last_flush=-1,kt}if(n.status===pm){if(e.adler=0,ze(n,31),ze(n,139),ze(n,8),n.gzhead)ze(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),ze(n,n.gzhead.time&255),ze(n,n.gzhead.time>>8&255),ze(n,n.gzhead.time>>16&255),ze(n,n.gzhead.time>>24&255),ze(n,n.level===9?2:n.strategy>=Hl||n.level<2?4:0),ze(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(ze(n,n.gzhead.extra.length&255),ze(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=gt(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=Fh;else if(ze(n,0),ze(n,0),ze(n,0),ze(n,0),ze(n,0),ze(n,n.level===9?2:n.strategy>=Hl||n.level<2?4:0),ze(n,CI),n.status=Si,rn(e),n.pending!==0)return n.last_flush=-1,kt}if(n.status===Fh){if(n.gzhead.extra){let o=n.pending,a=(n.gzhead.extra.length&65535)-n.gzindex;for(;n.pending+a>n.pending_buf_size;){let u=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+u),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>o&&(e.adler=gt(e.adler,n.pending_buf,n.pending-o,o)),n.gzindex+=u,rn(e),n.pending!==0)return n.last_flush=-1,kt;o=0,a-=u}let l=new Uint8Array(n.gzhead.extra);n.pending_buf.set(l.subarray(n.gzindex,n.gzindex+a),n.pending),n.pending+=a,n.gzhead.hcrc&&n.pending>o&&(e.adler=gt(e.adler,n.pending_buf,n.pending-o,o)),n.gzindex=0}n.status=Uh}if(n.status===Uh){if(n.gzhead.name){let o=n.pending,a;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>o&&(e.adler=gt(e.adler,n.pending_buf,n.pending-o,o)),rn(e),n.pending!==0)return n.last_flush=-1,kt;o=0}n.gzindex<n.gzhead.name.length?a=n.gzhead.name.charCodeAt(n.gzindex++)&255:a=0,ze(n,a)}while(a!==0);n.gzhead.hcrc&&n.pending>o&&(e.adler=gt(e.adler,n.pending_buf,n.pending-o,o)),n.gzindex=0}n.status=$h}if(n.status===$h){if(n.gzhead.comment){let o=n.pending,a;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>o&&(e.adler=gt(e.adler,n.pending_buf,n.pending-o,o)),rn(e),n.pending!==0)return n.last_flush=-1,kt;o=0}n.gzindex<n.gzhead.comment.length?a=n.gzhead.comment.charCodeAt(n.gzindex++)&255:a=0,ze(n,a)}while(a!==0);n.gzhead.hcrc&&n.pending>o&&(e.adler=gt(e.adler,n.pending_buf,n.pending-o,o))}n.status=Hh}if(n.status===Hh){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(rn(e),n.pending!==0))return n.last_flush=-1,kt;ze(n,e.adler&255),ze(n,e.adler>>8&255),e.adler=0}if(n.status=Si,rn(e),n.pending!==0)return n.last_flush=-1,kt}if(e.avail_in!==0||n.lookahead!==0||t!==Vr&&n.status!==ka){let o=n.level===0?xx(n,t):n.strategy===Hl?kI(n,t):n.strategy===cI?NI(n,t):Ia[n.level].func(n,t);if((o===Oi||o===Ko)&&(n.status=ka),o===$t||o===Oi)return e.avail_out===0&&(n.last_flush=-1),kt;if(o===Vo&&(t===oI?iI(n):t!==I0&&(jh(n,0,0,!1),t===aI&&(Ar(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),rn(e),e.avail_out===0))return n.last_flush=-1,kt}return t!==Sn?kt:n.wrap<=0?T0:(n.wrap===2?(ze(n,e.adler&255),ze(n,e.adler>>8&255),ze(n,e.adler>>16&255),ze(n,e.adler>>24&255),ze(n,e.total_in&255),ze(n,e.total_in>>8&255),ze(n,e.total_in>>16&255),ze(n,e.total_in>>24&255)):(wa(n,e.adler>>>16),wa(n,e.adler&65535)),rn(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?kt:T0)},MI=e=>{if(zs(e))return rr;const t=e.state.status;return e.state=null,t===Si?Ci(e,sI):kt},RI=(e,t)=>{let n=t.length;if(zs(e))return rr;const r=e.state,o=r.wrap;if(o===2||o===1&&r.status!==Oo||r.lookahead)return rr;if(o===1&&(e.adler=ws(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){o===0&&(Ar(r.head),r.strstart=0,r.block_start=0,r.insert=0);let c=new Uint8Array(r.w_size);c.set(t.subarray(n-r.w_size,n),0),t=c,n=r.w_size}const a=e.avail_in,l=e.next_in,u=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Bo(r);r.lookahead>=De;){let c=r.strstart,f=r.lookahead-(De-1);do r.ins_h=Kr(r,r.ins_h,r.window[c+De-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++;while(--f);r.strstart=c,r.lookahead=De-1,Bo(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=De-1,r.match_available=0,e.next_in=l,e.input=u,e.avail_in=a,r.wrap=o,kt};var OI=LI,BI=Cx,jI=Sx,zI=bx,FI=DI,UI=AI,$I=MI,HI=RI,ZI="pako deflate (from Nodeca project)",Ha={deflateInit:OI,deflateInit2:BI,deflateReset:jI,deflateResetKeep:zI,deflateSetHeader:FI,deflate:UI,deflateEnd:$I,deflateSetDictionary:HI,deflateInfo:ZI};const GI=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var WI=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)GI(n,r)&&(e[r]=n[r])}}return e},VI=e=>{let t=0;for(let r=0,o=e.length;r<o;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,o=0,a=e.length;r<a;r++){let l=e[r];n.set(l,o),o+=l.length}return n},Ec={assign:WI,flattenChunks:VI};let Ex=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Ex=!1}const xs=new Uint8Array(256);for(let e=0;e<256;e++)xs[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;xs[254]=xs[254]=1;var KI=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,o,a,l=e.length,u=0;for(o=0;o<l;o++)n=e.charCodeAt(o),(n&64512)===55296&&o+1<l&&(r=e.charCodeAt(o+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),o++)),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(u),a=0,o=0;a<u;o++)n=e.charCodeAt(o),(n&64512)===55296&&o+1<l&&(r=e.charCodeAt(o+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),o++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|n&63):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|n&63):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|n&63);return t};const qI=(e,t)=>{if(t<65534&&e.subarray&&Ex)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n};var YI=(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,o;const a=new Array(n*2);for(o=0,r=0;r<n;){let l=e[r++];if(l<128){a[o++]=l;continue}let u=xs[l];if(u>4){a[o++]=65533,r+=u-1;continue}for(l&=u===2?31:u===3?15:7;u>1&&r<n;)l=l<<6|e[r++]&63,u--;if(u>1){a[o++]=65533;continue}l<65536?a[o++]=l:(l-=65536,a[o++]=55296|l>>10&1023,a[o++]=56320|l&1023)}return qI(a,o)},QI=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+xs[e[n]]>t?n:t},bs={string2buf:KI,buf2string:YI,utf8border:QI};function JI(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Px=JI;const Nx=Object.prototype.toString,{Z_NO_FLUSH:XI,Z_SYNC_FLUSH:eT,Z_FULL_FLUSH:tT,Z_FINISH:nT,Z_OK:Gu,Z_STREAM_END:rT,Z_DEFAULT_COMPRESSION:iT,Z_DEFAULT_STRATEGY:oT,Z_DEFLATED:aT}=js;function Fs(e){this.options=Ec.assign({level:iT,method:aT,chunkSize:16384,windowBits:15,memLevel:8,strategy:oT},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Px,this.strm.avail_out=0;let n=Ha.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Gu)throw new Error(Ri[n]);if(t.header&&Ha.deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(typeof t.dictionary=="string"?r=bs.string2buf(t.dictionary):Nx.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,n=Ha.deflateSetDictionary(this.strm,r),n!==Gu)throw new Error(Ri[n]);this._dict_set=!0}}Fs.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let o,a;if(this.ended)return!1;for(t===~~t?a=t:a=t===!0?nT:XI,typeof e=="string"?n.input=bs.string2buf(e):Nx.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(a===eT||a===tT)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(o=Ha.deflate(n,a),o===rT)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),o=Ha.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===Gu;if(n.avail_out===0){this.onData(n.output);continue}if(a>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};Fs.prototype.onData=function(e){this.chunks.push(e)};Fs.prototype.onEnd=function(e){e===Gu&&(this.result=Ec.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function mm(e,t){const n=new Fs(t);if(n.push(e,!0),n.err)throw n.msg||Ri[n.err];return n.result}function sT(e,t){return t=t||{},t.raw=!0,mm(e,t)}function lT(e,t){return t=t||{},t.gzip=!0,mm(e,t)}var uT=Fs,cT=mm,dT=sT,fT=lT,hT={Deflate:uT,deflate:cT,deflateRaw:dT,gzip:fT};const Zl=16209,pT=16191;var mT=function(t,n){let r,o,a,l,u,c,f,h,g,p,y,w,E,N,b,x,S,C,D,A,M,U,I,T;const R=t.state;r=t.next_in,I=t.input,o=r+(t.avail_in-5),a=t.next_out,T=t.output,l=a-(n-t.avail_out),u=a+(t.avail_out-257),c=R.dmax,f=R.wsize,h=R.whave,g=R.wnext,p=R.window,y=R.hold,w=R.bits,E=R.lencode,N=R.distcode,b=(1<<R.lenbits)-1,x=(1<<R.distbits)-1;e:do{w<15&&(y+=I[r++]<<w,w+=8,y+=I[r++]<<w,w+=8),S=E[y&b];t:for(;;){if(C=S>>>24,y>>>=C,w-=C,C=S>>>16&255,C===0)T[a++]=S&65535;else if(C&16){D=S&65535,C&=15,C&&(w<C&&(y+=I[r++]<<w,w+=8),D+=y&(1<<C)-1,y>>>=C,w-=C),w<15&&(y+=I[r++]<<w,w+=8,y+=I[r++]<<w,w+=8),S=N[y&x];n:for(;;){if(C=S>>>24,y>>>=C,w-=C,C=S>>>16&255,C&16){if(A=S&65535,C&=15,w<C&&(y+=I[r++]<<w,w+=8,w<C&&(y+=I[r++]<<w,w+=8)),A+=y&(1<<C)-1,A>c){t.msg="invalid distance too far back",R.mode=Zl;break e}if(y>>>=C,w-=C,C=a-l,A>C){if(C=A-C,C>h&&R.sane){t.msg="invalid distance too far back",R.mode=Zl;break e}if(M=0,U=p,g===0){if(M+=f-C,C<D){D-=C;do T[a++]=p[M++];while(--C);M=a-A,U=T}}else if(g<C){if(M+=f+g-C,C-=g,C<D){D-=C;do T[a++]=p[M++];while(--C);if(M=0,g<D){C=g,D-=C;do T[a++]=p[M++];while(--C);M=a-A,U=T}}}else if(M+=g-C,C<D){D-=C;do T[a++]=p[M++];while(--C);M=a-A,U=T}for(;D>2;)T[a++]=U[M++],T[a++]=U[M++],T[a++]=U[M++],D-=3;D&&(T[a++]=U[M++],D>1&&(T[a++]=U[M++]))}else{M=a-A;do T[a++]=T[M++],T[a++]=T[M++],T[a++]=T[M++],D-=3;while(D>2);D&&(T[a++]=T[M++],D>1&&(T[a++]=T[M++]))}}else if(C&64){t.msg="invalid distance code",R.mode=Zl;break e}else{S=N[(S&65535)+(y&(1<<C)-1)];continue n}break}}else if(C&64)if(C&32){R.mode=pT;break e}else{t.msg="invalid literal/length code",R.mode=Zl;break e}else{S=E[(S&65535)+(y&(1<<C)-1)];continue t}break}}while(r<o&&a<u);D=w>>3,r-=D,w-=D<<3,y&=(1<<w)-1,t.next_in=r,t.next_out=a,t.avail_in=r<o?5+(o-r):5-(r-o),t.avail_out=a<u?257+(u-a):257-(a-u),R.hold=y,R.bits=w};const eo=15,L0=852,A0=592,M0=0,hf=1,R0=2,gT=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),vT=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),yT=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),_T=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),wT=(e,t,n,r,o,a,l,u)=>{const c=u.bits;let f=0,h=0,g=0,p=0,y=0,w=0,E=0,N=0,b=0,x=0,S,C,D,A,M,U=null,I;const T=new Uint16Array(eo+1),R=new Uint16Array(eo+1);let V=null,Z,q,J;for(f=0;f<=eo;f++)T[f]=0;for(h=0;h<r;h++)T[t[n+h]]++;for(y=c,p=eo;p>=1&&T[p]===0;p--);if(y>p&&(y=p),p===0)return o[a++]=1<<24|64<<16|0,o[a++]=1<<24|64<<16|0,u.bits=1,0;for(g=1;g<p&&T[g]===0;g++);for(y<g&&(y=g),N=1,f=1;f<=eo;f++)if(N<<=1,N-=T[f],N<0)return-1;if(N>0&&(e===M0||p!==1))return-1;for(R[1]=0,f=1;f<eo;f++)R[f+1]=R[f]+T[f];for(h=0;h<r;h++)t[n+h]!==0&&(l[R[t[n+h]]++]=h);if(e===M0?(U=V=l,I=20):e===hf?(U=gT,V=vT,I=257):(U=yT,V=_T,I=0),x=0,h=0,f=g,M=a,w=y,E=0,D=-1,b=1<<y,A=b-1,e===hf&&b>L0||e===R0&&b>A0)return 1;for(;;){Z=f-E,l[h]+1<I?(q=0,J=l[h]):l[h]>=I?(q=V[l[h]-I],J=U[l[h]-I]):(q=96,J=0),S=1<<f-E,C=1<<w,g=C;do C-=S,o[M+(x>>E)+C]=Z<<24|q<<16|J|0;while(C!==0);for(S=1<<f-1;x&S;)S>>=1;if(S!==0?(x&=S-1,x+=S):x=0,h++,--T[f]===0){if(f===p)break;f=t[n+l[h]]}if(f>y&&(x&A)!==D){for(E===0&&(E=y),M+=g,w=f-E,N=1<<w;w+E<p&&(N-=T[w+E],!(N<=0));)w++,N<<=1;if(b+=1<<w,e===hf&&b>L0||e===R0&&b>A0)return 1;D=x&A,o[D]=y<<24|w<<16|M-a|0}}return x!==0&&(o[M+x]=f-E<<24|64<<16|0),u.bits=y,0};var Za=wT;const xT=0,kx=1,Ix=2,{Z_FINISH:O0,Z_BLOCK:bT,Z_TREES:Gl,Z_OK:Bi,Z_STREAM_END:ST,Z_NEED_DICT:CT,Z_STREAM_ERROR:Tn,Z_DATA_ERROR:Tx,Z_MEM_ERROR:Dx,Z_BUF_ERROR:ET,Z_DEFLATED:B0}=js,Pc=16180,j0=16181,z0=16182,F0=16183,U0=16184,$0=16185,H0=16186,Z0=16187,G0=16188,W0=16189,Wu=16190,fr=16191,pf=16192,V0=16193,mf=16194,K0=16195,q0=16196,Y0=16197,Q0=16198,Wl=16199,Vl=16200,J0=16201,X0=16202,ey=16203,ty=16204,ny=16205,gf=16206,ry=16207,iy=16208,qe=16209,Lx=16210,Ax=16211,PT=852,NT=592,kT=15,IT=kT,oy=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function TT(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ui=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Pc||t.mode>Ax?1:0},Mx=e=>{if(Ui(e))return Tn;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=Pc,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(PT),t.distcode=t.distdyn=new Int32Array(NT),t.sane=1,t.back=-1,Bi},Rx=e=>{if(Ui(e))return Tn;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Mx(e)},Ox=(e,t)=>{let n;if(Ui(e))return Tn;const r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Tn:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Rx(e))},Bx=(e,t)=>{if(!e)return Tn;const n=new TT;e.state=n,n.strm=e,n.window=null,n.mode=Pc;const r=Ox(e,t);return r!==Bi&&(e.state=null),r},DT=e=>Bx(e,IT);let ay=!0,vf,yf;const LT=e=>{if(ay){vf=new Int32Array(512),yf=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Za(kx,e.lens,0,288,vf,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Za(Ix,e.lens,0,32,yf,0,e.work,{bits:5}),ay=!1}e.lencode=vf,e.lenbits=9,e.distcode=yf,e.distbits=5},jx=(e,t,n,r)=>{let o;const a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(o=a.wsize-a.wnext,o>r&&(o=r),a.window.set(t.subarray(n-r,n-r+o),a.wnext),r-=o,r?(a.window.set(t.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0},AT=(e,t)=>{let n,r,o,a,l,u,c,f,h,g,p,y,w,E,N=0,b,x,S,C,D,A,M,U;const I=new Uint8Array(4);let T,R;const V=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ui(e)||!e.output||!e.input&&e.avail_in!==0)return Tn;n=e.state,n.mode===fr&&(n.mode=pf),l=e.next_out,o=e.output,c=e.avail_out,a=e.next_in,r=e.input,u=e.avail_in,f=n.hold,h=n.bits,g=u,p=c,U=Bi;e:for(;;)switch(n.mode){case Pc:if(n.wrap===0){n.mode=pf;break}for(;h<16;){if(u===0)break e;u--,f+=r[a++]<<h,h+=8}if(n.wrap&2&&f===35615){n.wbits===0&&(n.wbits=15),n.check=0,I[0]=f&255,I[1]=f>>>8&255,n.check=gt(n.check,I,2,0),f=0,h=0,n.mode=j0;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((f&255)<<8)+(f>>8))%31){e.msg="incorrect header check",n.mode=qe;break}if((f&15)!==B0){e.msg="unknown compression method",n.mode=qe;break}if(f>>>=4,h-=4,M=(f&15)+8,n.wbits===0&&(n.wbits=M),M>15||M>n.wbits){e.msg="invalid window size",n.mode=qe;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=f&512?W0:fr,f=0,h=0;break;case j0:for(;h<16;){if(u===0)break e;u--,f+=r[a++]<<h,h+=8}if(n.flags=f,(n.flags&255)!==B0){e.msg="unknown compression method",n.mode=qe;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=qe;break}n.head&&(n.head.text=f>>8&1),n.flags&512&&n.wrap&4&&(I[0]=f&255,I[1]=f>>>8&255,n.check=gt(n.check,I,2,0)),f=0,h=0,n.mode=z0;case z0:for(;h<32;){if(u===0)break e;u--,f+=r[a++]<<h,h+=8}n.head&&(n.head.time=f),n.flags&512&&n.wrap&4&&(I[0]=f&255,I[1]=f>>>8&255,I[2]=f>>>16&255,I[3]=f>>>24&255,n.check=gt(n.check,I,4,0)),f=0,h=0,n.mode=F0;case F0:for(;h<16;){if(u===0)break e;u--,f+=r[a++]<<h,h+=8}n.head&&(n.head.xflags=f&255,n.head.os=f>>8),n.flags&512&&n.wrap&4&&(I[0]=f&255,I[1]=f>>>8&255,n.check=gt(n.check,I,2,0)),f=0,h=0,n.mode=U0;case U0:if(n.flags&1024){for(;h<16;){if(u===0)break e;u--,f+=r[a++]<<h,h+=8}n.length=f,n.head&&(n.head.extra_len=f),n.flags&512&&n.wrap&4&&(I[0]=f&255,I[1]=f>>>8&255,n.check=gt(n.check,I,2,0)),f=0,h=0}else n.head&&(n.head.extra=null);n.mode=$0;case $0:if(n.flags&1024&&(y=n.length,y>u&&(y=u),y&&(n.head&&(M=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+y),M)),n.flags&512&&n.wrap&4&&(n.check=gt(n.check,r,y,a)),u-=y,a+=y,n.length-=y),n.length))break e;n.length=0,n.mode=H0;case H0:if(n.flags&2048){if(u===0)break e;y=0;do M=r[a+y++],n.head&&M&&n.length<65536&&(n.head.name+=String.fromCharCode(M));while(M&&y<u);if(n.flags&512&&n.wrap&4&&(n.check=gt(n.check,r,y,a)),u-=y,a+=y,M)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=Z0;case Z0:if(n.flags&4096){if(u===0)break e;y=0;do M=r[a+y++],n.head&&M&&n.length<65536&&(n.head.comment+=String.fromCharCode(M));while(M&&y<u);if(n.flags&512&&n.wrap&4&&(n.check=gt(n.check,r,y,a)),u-=y,a+=y,M)break e}else n.head&&(n.head.comment=null);n.mode=G0;case G0:if(n.flags&512){for(;h<16;){if(u===0)break e;u--,f+=r[a++]<<h,h+=8}if(n.wrap&4&&f!==(n.check&65535)){e.msg="header crc mismatch",n.mode=qe;break}f=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=fr;break;case W0:for(;h<32;){if(u===0)break e;u--,f+=r[a++]<<h,h+=8}e.adler=n.check=oy(f),f=0,h=0,n.mode=Wu;case Wu:if(n.havedict===0)return e.next_out=l,e.avail_out=c,e.next_in=a,e.avail_in=u,n.hold=f,n.bits=h,CT;e.adler=n.check=1,n.mode=fr;case fr:if(t===bT||t===Gl)break e;case pf:if(n.last){f>>>=h&7,h-=h&7,n.mode=gf;break}for(;h<3;){if(u===0)break e;u--,f+=r[a++]<<h,h+=8}switch(n.last=f&1,f>>>=1,h-=1,f&3){case 0:n.mode=V0;break;case 1:if(LT(n),n.mode=Wl,t===Gl){f>>>=2,h-=2;break e}break;case 2:n.mode=q0;break;case 3:e.msg="invalid block type",n.mode=qe}f>>>=2,h-=2;break;case V0:for(f>>>=h&7,h-=h&7;h<32;){if(u===0)break e;u--,f+=r[a++]<<h,h+=8}if((f&65535)!==(f>>>16^65535)){e.msg="invalid stored block lengths",n.mode=qe;break}if(n.length=f&65535,f=0,h=0,n.mode=mf,t===Gl)break e;case mf:n.mode=K0;case K0:if(y=n.length,y){if(y>u&&(y=u),y>c&&(y=c),y===0)break e;o.set(r.subarray(a,a+y),l),u-=y,a+=y,c-=y,l+=y,n.length-=y;break}n.mode=fr;break;case q0:for(;h<14;){if(u===0)break e;u--,f+=r[a++]<<h,h+=8}if(n.nlen=(f&31)+257,f>>>=5,h-=5,n.ndist=(f&31)+1,f>>>=5,h-=5,n.ncode=(f&15)+4,f>>>=4,h-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=qe;break}n.have=0,n.mode=Y0;case Y0:for(;n.have<n.ncode;){for(;h<3;){if(u===0)break e;u--,f+=r[a++]<<h,h+=8}n.lens[V[n.have++]]=f&7,f>>>=3,h-=3}for(;n.have<19;)n.lens[V[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,T={bits:n.lenbits},U=Za(xT,n.lens,0,19,n.lencode,0,n.work,T),n.lenbits=T.bits,U){e.msg="invalid code lengths set",n.mode=qe;break}n.have=0,n.mode=Q0;case Q0:for(;n.have<n.nlen+n.ndist;){for(;N=n.lencode[f&(1<<n.lenbits)-1],b=N>>>24,x=N>>>16&255,S=N&65535,!(b<=h);){if(u===0)break e;u--,f+=r[a++]<<h,h+=8}if(S<16)f>>>=b,h-=b,n.lens[n.have++]=S;else{if(S===16){for(R=b+2;h<R;){if(u===0)break e;u--,f+=r[a++]<<h,h+=8}if(f>>>=b,h-=b,n.have===0){e.msg="invalid bit length repeat",n.mode=qe;break}M=n.lens[n.have-1],y=3+(f&3),f>>>=2,h-=2}else if(S===17){for(R=b+3;h<R;){if(u===0)break e;u--,f+=r[a++]<<h,h+=8}f>>>=b,h-=b,M=0,y=3+(f&7),f>>>=3,h-=3}else{for(R=b+7;h<R;){if(u===0)break e;u--,f+=r[a++]<<h,h+=8}f>>>=b,h-=b,M=0,y=11+(f&127),f>>>=7,h-=7}if(n.have+y>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=qe;break}for(;y--;)n.lens[n.have++]=M}}if(n.mode===qe)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=qe;break}if(n.lenbits=9,T={bits:n.lenbits},U=Za(kx,n.lens,0,n.nlen,n.lencode,0,n.work,T),n.lenbits=T.bits,U){e.msg="invalid literal/lengths set",n.mode=qe;break}if(n.distbits=6,n.distcode=n.distdyn,T={bits:n.distbits},U=Za(Ix,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,T),n.distbits=T.bits,U){e.msg="invalid distances set",n.mode=qe;break}if(n.mode=Wl,t===Gl)break e;case Wl:n.mode=Vl;case Vl:if(u>=6&&c>=258){e.next_out=l,e.avail_out=c,e.next_in=a,e.avail_in=u,n.hold=f,n.bits=h,mT(e,p),l=e.next_out,o=e.output,c=e.avail_out,a=e.next_in,r=e.input,u=e.avail_in,f=n.hold,h=n.bits,n.mode===fr&&(n.back=-1);break}for(n.back=0;N=n.lencode[f&(1<<n.lenbits)-1],b=N>>>24,x=N>>>16&255,S=N&65535,!(b<=h);){if(u===0)break e;u--,f+=r[a++]<<h,h+=8}if(x&&!(x&240)){for(C=b,D=x,A=S;N=n.lencode[A+((f&(1<<C+D)-1)>>C)],b=N>>>24,x=N>>>16&255,S=N&65535,!(C+b<=h);){if(u===0)break e;u--,f+=r[a++]<<h,h+=8}f>>>=C,h-=C,n.back+=C}if(f>>>=b,h-=b,n.back+=b,n.length=S,x===0){n.mode=ny;break}if(x&32){n.back=-1,n.mode=fr;break}if(x&64){e.msg="invalid literal/length code",n.mode=qe;break}n.extra=x&15,n.mode=J0;case J0:if(n.extra){for(R=n.extra;h<R;){if(u===0)break e;u--,f+=r[a++]<<h,h+=8}n.length+=f&(1<<n.extra)-1,f>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=X0;case X0:for(;N=n.distcode[f&(1<<n.distbits)-1],b=N>>>24,x=N>>>16&255,S=N&65535,!(b<=h);){if(u===0)break e;u--,f+=r[a++]<<h,h+=8}if(!(x&240)){for(C=b,D=x,A=S;N=n.distcode[A+((f&(1<<C+D)-1)>>C)],b=N>>>24,x=N>>>16&255,S=N&65535,!(C+b<=h);){if(u===0)break e;u--,f+=r[a++]<<h,h+=8}f>>>=C,h-=C,n.back+=C}if(f>>>=b,h-=b,n.back+=b,x&64){e.msg="invalid distance code",n.mode=qe;break}n.offset=S,n.extra=x&15,n.mode=ey;case ey:if(n.extra){for(R=n.extra;h<R;){if(u===0)break e;u--,f+=r[a++]<<h,h+=8}n.offset+=f&(1<<n.extra)-1,f>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=qe;break}n.mode=ty;case ty:if(c===0)break e;if(y=p-c,n.offset>y){if(y=n.offset-y,y>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=qe;break}y>n.wnext?(y-=n.wnext,w=n.wsize-y):w=n.wnext-y,y>n.length&&(y=n.length),E=n.window}else E=o,w=l-n.offset,y=n.length;y>c&&(y=c),c-=y,n.length-=y;do o[l++]=E[w++];while(--y);n.length===0&&(n.mode=Vl);break;case ny:if(c===0)break e;o[l++]=n.length,c--,n.mode=Vl;break;case gf:if(n.wrap){for(;h<32;){if(u===0)break e;u--,f|=r[a++]<<h,h+=8}if(p-=c,e.total_out+=p,n.total+=p,n.wrap&4&&p&&(e.adler=n.check=n.flags?gt(n.check,o,p,l-p):ws(n.check,o,p,l-p)),p=c,n.wrap&4&&(n.flags?f:oy(f))!==n.check){e.msg="incorrect data check",n.mode=qe;break}f=0,h=0}n.mode=ry;case ry:if(n.wrap&&n.flags){for(;h<32;){if(u===0)break e;u--,f+=r[a++]<<h,h+=8}if(n.wrap&4&&f!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=qe;break}f=0,h=0}n.mode=iy;case iy:U=ST;break e;case qe:U=Tx;break e;case Lx:return Dx;case Ax:default:return Tn}return e.next_out=l,e.avail_out=c,e.next_in=a,e.avail_in=u,n.hold=f,n.bits=h,(n.wsize||p!==e.avail_out&&n.mode<qe&&(n.mode<gf||t!==O0))&&jx(e,e.output,e.next_out,p-e.avail_out),g-=e.avail_in,p-=e.avail_out,e.total_in+=g,e.total_out+=p,n.total+=p,n.wrap&4&&p&&(e.adler=n.check=n.flags?gt(n.check,o,p,e.next_out-p):ws(n.check,o,p,e.next_out-p)),e.data_type=n.bits+(n.last?64:0)+(n.mode===fr?128:0)+(n.mode===Wl||n.mode===mf?256:0),(g===0&&p===0||t===O0)&&U===Bi&&(U=ET),U},MT=e=>{if(Ui(e))return Tn;let t=e.state;return t.window&&(t.window=null),e.state=null,Bi},RT=(e,t)=>{if(Ui(e))return Tn;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,Bi):Tn},OT=(e,t)=>{const n=t.length;let r,o,a;return Ui(e)||(r=e.state,r.wrap!==0&&r.mode!==Wu)?Tn:r.mode===Wu&&(o=1,o=ws(o,t,n,0),o!==r.check)?Tx:(a=jx(e,t,n,n),a?(r.mode=Lx,Dx):(r.havedict=1,Bi))};var BT=Rx,jT=Ox,zT=Mx,FT=DT,UT=Bx,$T=AT,HT=MT,ZT=RT,GT=OT,WT="pako inflate (from Nodeca project)",gr={inflateReset:BT,inflateReset2:jT,inflateResetKeep:zT,inflateInit:FT,inflateInit2:UT,inflate:$T,inflateEnd:HT,inflateGetHeader:ZT,inflateSetDictionary:GT,inflateInfo:WT};function VT(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var KT=VT;const zx=Object.prototype.toString,{Z_NO_FLUSH:qT,Z_FINISH:YT,Z_OK:Ss,Z_STREAM_END:_f,Z_NEED_DICT:wf,Z_STREAM_ERROR:QT,Z_DATA_ERROR:sy,Z_MEM_ERROR:JT}=js;function Us(e){this.options=Ec.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Px,this.strm.avail_out=0;let n=gr.inflateInit2(this.strm,t.windowBits);if(n!==Ss)throw new Error(Ri[n]);if(this.header=new KT,gr.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=bs.string2buf(t.dictionary):zx.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=gr.inflateSetDictionary(this.strm,t.dictionary),n!==Ss)))throw new Error(Ri[n])}Us.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,o=this.options.dictionary;let a,l,u;if(this.ended)return!1;for(t===~~t?l=t:l=t===!0?YT:qT,zx.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=gr.inflate(n,l),a===wf&&o&&(a=gr.inflateSetDictionary(n,o),a===Ss?a=gr.inflate(n,l):a===sy&&(a=wf));n.avail_in>0&&a===_f&&n.state.wrap>0&&e[n.next_in]!==0;)gr.inflateReset(n),a=gr.inflate(n,l);switch(a){case QT:case sy:case wf:case JT:return this.onEnd(a),this.ended=!0,!1}if(u=n.avail_out,n.next_out&&(n.avail_out===0||a===_f))if(this.options.to==="string"){let c=bs.utf8border(n.output,n.next_out),f=n.next_out-c,h=bs.buf2string(n.output,c);n.next_out=f,n.avail_out=r-f,f&&n.output.set(n.output.subarray(c,c+f),0),this.onData(h)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(a===Ss&&u===0)){if(a===_f)return a=gr.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Us.prototype.onData=function(e){this.chunks.push(e)};Us.prototype.onEnd=function(e){e===Ss&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ec.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function gm(e,t){const n=new Us(t);if(n.push(e),n.err)throw n.msg||Ri[n.err];return n.result}function XT(e,t){return t=t||{},t.raw=!0,gm(e,t)}var eD=Us,tD=gm,nD=XT,rD=gm,iD={Inflate:eD,inflate:tD,inflateRaw:nD,ungzip:rD};const{Deflate:oD,deflate:aD,deflateRaw:sD,gzip:lD}=hT,{Inflate:uD,inflate:cD,inflateRaw:dD,ungzip:fD}=iD;var hD=oD,pD=aD,mD=sD,gD=lD,vD=uD,yD=cD,_D=dD,wD=fD,xD=js,ly={Deflate:hD,deflate:pD,deflateRaw:mD,gzip:gD,Inflate:vD,inflate:yD,inflateRaw:_D,ungzip:wD,constants:xD};class Fx{constructor(){this.MAX_QR_SIZE=300,this.CHUNK_HEADER_SIZE=30,this.MAX_QR_CHUNKS=8,this.compressionInfo=null,this.deviceId=this.getOrCreateDeviceId(),this.deviceName=this.getDeviceName()}getOrCreateDeviceId(){let t=localStorage.getItem("device_id");return t||(t="device_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),localStorage.setItem("device_id",t)),t}getDeviceName(){const t=localStorage.getItem("device_name");if(t)return t;const n=`${navigator.platform} - ${new Date().toLocaleDateString()}`;return localStorage.setItem("device_name",n),n}async prepareSyncData(t,n,r){const o={items:t.map(l=>({id:l.id,tags:l.tags||[],memo:l.memo||"",createdAt:l.createdAt instanceof Date?l.createdAt.getTime():new Date(l.createdAt).getTime(),updatedAt:l.updatedAt instanceof Date?l.updatedAt.getTime():new Date(l.updatedAt).getTime()})),groups:n.map(l=>({id:l.id,title:l.title||"",tags:l.tags||[],memo:l.memo||"",createdAt:l.createdAt instanceof Date?l.createdAt.getTime():new Date(l.createdAt).getTime(),updatedAt:l.updatedAt instanceof Date?l.updatedAt.getTime():new Date(l.updatedAt).getTime(),photos:l.photos.map(u=>({id:u.id,tags:u.tags||[],memo:u.memo||""}))})),tags:r},a=await this.calculateChecksum(JSON.stringify(o));return{version:"1.0",timestamp:Date.now(),deviceId:this.deviceId,data:o,checksum:a}}async compressDataAdvanced(t){try{if(!t||!t.data)throw new Error("同期データがありません");const n={v:t.version,t:t.timestamp,d:t.deviceId,i:t.data.items.map(u=>[u.id,u.tags||[],u.memo||"",this.normalizeTimestamp(u.createdAt),this.normalizeTimestamp(u.updatedAt)]),g:t.data.groups.map(u=>[u.id,u.title||"",u.tags||[],u.memo||"",this.normalizeTimestamp(u.createdAt),this.normalizeTimestamp(u.updatedAt),(u.photos||[]).map(c=>[c.id,c.tags||[],c.memo||""])]),tg:t.data.tags||[]},r=JSON.stringify(n).replace(/\s+/g,""),o=new TextEncoder().encode(r),a=ly.deflate(o),l=btoa(String.fromCharCode.apply(null,a));return this.compressionInfo={originalSize:r.length,compressedSize:l.length,format:"deflate-base64"},l}catch(n){throw console.error("データ圧縮エラー:",n),new Error(`データの圧縮に失敗しました: ${n.message}`)}}arrayBufferToBase64(t){const n=new Uint8Array(t);let r="";for(let o=0;o<n.byteLength;o++)r+=String.fromCharCode(n[o]);return btoa(r)}base64ToArrayBuffer(t){const n=atob(t),r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r.buffer}lzStringCompress(t){const n={};let r=256,o="";const a=[];for(let l=0;l<t.length;l++){const u=t[l],c=o+u;n[c]!==void 0?o=c:(o!==""&&a.push(String.fromCharCode(n[o]!==void 0?n[o]:o.charCodeAt(0))),n[c]=r++,o=u)}return o!==""&&a.push(String.fromCharCode(n[o]!==void 0?n[o]:o.charCodeAt(0))),a.join("")}lzStringDecompress(t){const n=[];let r=256,o=t[0],a=o;for(let l=1;l<t.length;l++){const u=t.charCodeAt(l);let c;u<r?c=String.fromCharCode(u):c=o+o[0],a+=c,n[r++]=o+c[0],o=c}return a}normalizeTimestamp(t){if(!t)return Date.now();if(t instanceof Date)return t.getTime();if(typeof t=="number")return t;try{return new Date(t).getTime()}catch{return Date.now()}}splitDataIntoChunks(t){const n=this.MAX_QR_SIZE,r=Math.ceil(t.length/n),o=[];for(let a=0;a<r;a++){const l=a*n,u=Math.min(l+n,t.length),c=t.substring(l,u);o.push({i:a,n:r,d:c,h:this.calculateSimpleChecksum(c)})}return o}async generateQRCode(t){try{const n=await this.compressDataAdvanced(t),r=this.MAX_QR_SIZE-this.CHUNK_HEADER_SIZE,o=[],a=Math.ceil(n.length/r);if(a>this.MAX_QR_CHUNKS)throw new Error(`データが大きすぎます。${this.MAX_QR_CHUNKS}個以下のQRコードに収める必要があります。`);for(let f=0;f<a;f++){const h=f*r,g=Math.min(h+r,n.length),p=n.slice(h,g),y={t:"c",n:a,i:f,d:p,h:await this.calculateSimpleChecksum(p)};o.push(y)}const l={errorCorrectionLevel:"M",margin:1,width:300,color:{dark:"#000000",light:"#ffffff"}},u=o.map(async(f,h)=>{try{const g=JSON.stringify(f);return await Rs.toDataURL(g,l)}catch(g){throw console.error(`QRコード生成エラー (チャンク ${h+1}/${a}):`,g),new Error(`QRコード生成に失敗しました (チャンク ${h+1}/${a}): ${g.message}`)}}),c=await Promise.all(u);if(this.compressionInfo){const f=(this.compressionInfo.originalSize-this.compressionInfo.compressedSize)/this.compressionInfo.originalSize*100;console.log(`圧縮情報:
          元のサイズ: ${this.compressionInfo.originalSize} バイト
          圧縮後: ${this.compressionInfo.compressedSize} バイト
          圧縮率: ${f.toFixed(1)}%
          形式: ${this.compressionInfo.format}
          QRコード数: ${c.length}個`)}return c}catch(n){throw console.error("QRコード生成エラー:",n),new Error(`QRコード生成に失敗しました: ${n.message}`)}}async reconstructDataFromChunks(t){try{const n=t.sort((u,c)=>u.i-c.i);let r="";for(const u of n){if(this.calculateSimpleChecksum(u.d)!==u.h)throw new Error(`チャンク ${u.i} のデータが破損しています`);r+=u.d}const o=new Uint8Array(atob(r).split("").map(u=>u.charCodeAt(0))),a=ly.inflate(o),l=new TextDecoder().decode(a);return this.expandSyncData(JSON.parse(l))}catch(n){throw console.error("データ復元エラー:",n),n}}async decompressDataAdvanced(t){try{const n=t.replace(/-/g,"+").replace(/_/g,"/"),r=n.length%4,o=r?n+"=".repeat(4-r):n;return atob(o)}catch(n){throw console.error("解凍エラー:",n),n}}async readQRCode(t){try{const n=JSON.parse(t);if(!n||!n.d||n.t!=="c")throw new Error("無効なQRコードデータです");const r=this.base64ToArrayBuffer(n.d),o=new TextDecoder().decode(r),a=JSON.parse(o);return this.expandSyncData(a)}catch(n){throw console.error("QRコード読み取りエラー:",n),new Error(`QRコードの読み取りに失敗しました: ${n.message}`)}}expandSyncData(t){return{version:t.v,timestamp:t.t,deviceId:t.d,data:{items:t.i.map(n=>({id:n[0],tags:n[1],memo:n[2],createdAt:n[3],updatedAt:n[4]})),groups:t.g.map(n=>({id:n[0],title:n[1],tags:n[2],memo:n[3],createdAt:n[4],updatedAt:n[5],photos:n[6].map(r=>({id:r[0],tags:r[1],memo:r[2]}))})),tags:t.tg},checksum:t.h||""}}async generateEmailBackup(t){if(!t||!t.data)throw new Error("バックアップデータが無効です");const n=new Date(t.timestamp||Date.now()).toLocaleString("ja-JP"),r=this.deviceName,o=`[Snap Organizer] データバックアップ - ${r} - ${n}`,a=`
Snap Organizerのデータバックアップです。

このメールに添付されているJSONファイルをアプリのインポート機能で読み込むことで、データを復元できます。

--------------------
デバイス: ${r}
時刻: ${n}
アイテム数: ${t.data.items.length}
グループ数: ${t.data.groups.length}
タグ数: ${t.data.tags.length}
--------------------

From: Snap Organizer
`,l=new Blob([JSON.stringify(t,null,2)],{type:"application/json"});return{subject:o,body:a,attachment:l}}async compressData(t){return btoa(encodeURIComponent(t))}async decompressData(t){return decodeURIComponent(atob(t))}async calculateChecksum(t){const r=new TextEncoder().encode(t),o=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(o)).map(l=>l.toString(16).padStart(2,"0")).join("")}async validateSyncData(t){if(!t.version||!t.timestamp||!t.data)throw new Error("無効な同期データです");if(t.version!=="1.0")throw new Error("サポートされていないデータバージョンです");if(await this.calculateChecksum(JSON.stringify(t.data))!==t.checksum)throw new Error("データの整合性チェックに失敗しました")}async decodeQRCode(t){throw new Error("QRコード読み取り機能は別途実装が必要です")}updateDeviceName(t){this.deviceName=t,localStorage.setItem("device_name",t)}getDeviceInfo(){return{deviceId:this.deviceId,deviceName:this.deviceName,lastSync:parseInt(localStorage.getItem("last_sync")||"0"),dataVersion:"1.0"}}calculateSimpleChecksum(t){let n=0;for(let r=0;r<t.length;r++){const o=t.charCodeAt(r);n=(n<<5)-n+o,n=n&n}return Math.abs(n).toString(36)}}const bD=e=>{const t=[];return e.tags.length>0&&t.push(`タグ: ${e.tags.join(", ")}`),e.memo&&t.push(`メモ: ${e.memo}`),e.ocrText&&t.push(`OCRテキスト: ${e.ocrText}`),t.join(`
`)},SD=e=>{const t=[];return t.push(`グループ: ${e.title}`),e.tags.length>0&&t.push(`タグ: ${e.tags.join(", ")}`),e.memo&&t.push(`メモ: ${e.memo}`),t.join(`
`)},CD=async e=>{try{const t={title:"郵便物スナップ",text:bD(e),files:[new File([await fetch(e.image).then(n=>n.blob())],"postal-snap.jpg",{type:"image/jpeg"})]};return navigator.canShare&&navigator.canShare(t)?(await navigator.share(t),!0):(console.warn("Web Share API is not supported"),!1)}catch(t){return console.error("Error sharing:",t),!1}},ED=async e=>{try{const t={title:"郵便物スナップ - グループ",text:SD(e),files:await Promise.all(e.photos.map(async n=>{const r=await fetch(n.image).then(o=>o.blob());return new File([r],`postal-snap-${n.id}.jpg`,{type:"image/jpeg"})}))};return navigator.canShare&&navigator.canShare(t)?(await navigator.share(t),!0):(console.warn("Web Share API is not supported"),!1)}catch(t){return console.error("Error sharing group:",t),!1}},PD=async(e,t,n,r)=>{const o=new File([n],r,{type:n.type});if(navigator.share&&navigator.canShare&&navigator.canShare({files:[o]}))try{await navigator.share({title:e,text:t,files:[o]}),console.log("Successfully shared data via Web Share API")}catch(a){console.error("Error using Web Share API:",a),uy(e,t)}else uy(e,t)},uy=(e,t)=>{const n=`
${t}

---
添付ファイルについて:
お使いの環境ではファイルの共有がサポートされていません。
お手数ですが、アプリからエクスポートしたJSONファイルを添付して送信してください。
`,r=`mailto:?subject=${encodeURIComponent(e)}&body=${encodeURIComponent(n)}`;window.open(r,"_blank")},ND=()=>{const e=Cw();return{...e,handleAddTag:()=>{if(!e.newTagName.trim())return;if(e.tags.length>=u0){alert(`タグの最大数（${u0}個）に達しました。
不要なタグを削除してから追加してください。`);return}const n={name:e.newTagName.trim(),color:e.newTagColor},r=[...e.tags,n];localStorage.setItem("postal_tags",JSON.stringify(r)),e.setNewTagName(""),e.setNewTagColor("#3B82F6"),e.setShowAddTag(!1)}}},kD=({items:e,groups:t,searchQuery:n,selectedTags:r,onSearchChange:o,onTagToggle:a,onAddItem:l,onItemClick:u,onGroupClick:c,onBulkTagRename:f,onImport:h,onExport:g,getExportData:p,onBulkDelete:y,onSync:w})=>{const{tags:E,showAddTag:N,setShowAddTag:b,newTagName:x,setNewTagName:S,newTagColor:C,setNewTagColor:D,tagEditIdx:A,tagEditName:M,setTagEditName:U,tagEditColor:I,setTagEditColor:T,handleAddTag:R,startEditTag:V,handleEditTag:Z,handleCancelEdit:q,handleRemoveTag:J}=ND(),[Y,te]=j.useState(""),[B,F]=j.useState(""),[k,z]=j.useState(!1),[G,H]=j.useState(!1),[K,ne]=j.useState(""),[Q,ce]=j.useState(null),[ve,$e]=j.useState({}),[Oe,tt]=j.useState(!1),[nt,bt]=j.useState([]),[lt,re]=j.useState([]),[de,me]=j.useState(!1),[xe,be]=j.useState(nP()),Ke=j.useRef(null),[rt,ee]=j.useState(!1),se=j.useMemo(()=>new Fx,[]),{isInitialized:he,isSearching:_e,searchResults:we,error:ke,search:Be,addItemToIndex:St,addGroupToIndex:Ot}=SP(),[Bt,ar]=j.useState(!1),[Dn,sr]=j.useState("basic");j.useEffect(()=>((async()=>{const Pe={},Te=new Set,it=async le=>{if(!Te.has(le)&&!ve[le]){Te.add(le);try{const jt=await nr(le);jt&&(Pe[le]=URL.createObjectURL(jt))}catch(jt){console.error("Failed to load image:",le,jt)}}},Vt=Array.isArray(e)?e:[],ut=Array.isArray(t)?t:[];for(const le of Vt)le.image&&await it(le.image);for(const le of ut)if(Array.isArray(le.photos))for(const jt of le.photos)jt.image&&await it(jt.image);Object.keys(Pe).length>0&&$e(le=>(Object.values(le).forEach(jt=>{Object.values(Pe).includes(jt)||URL.revokeObjectURL(jt)}),{...le,...Pe}))})(),()=>{Object.values(ve).forEach(Pe=>{URL.revokeObjectURL(Pe)})}),[e,t]),j.useEffect(()=>{Oe||(bt([]),re([]))},[Oe]);const si=async oe=>{sr("advanced"),ar(!0),await Be(oe,e,t)},Hn=async oe=>{if(!oe.trim()){ar(!1),sr("basic");return}sr("basic"),ar(!0);const Pe={query:oe.trim(),fields:["ocr_text","memo","tags","location_name"],limit:50};await Be(Pe,e,t)},nn=j.useMemo(()=>{if(!Bt||!we.length)return{items:[],groups:[]};const oe=[],Pe=[];for(const Te of we){const it=e.find(ut=>ut.id===Te.id);if(it){oe.push(it);continue}const Vt=t.find(ut=>ut.id===Te.id);if(Vt){Pe.push(Vt);continue}for(const ut of t){const le=ut.photos.find(jt=>jt.id===Te.id);if(le){oe.push(le);break}}}return{items:oe,groups:Pe}},[we,e,t,Bt]);j.useEffect(()=>{if(!he)return;(async()=>{for(const Pe of e)await St(Pe);for(const Pe of t)await Ot(Pe)})()},[he,e,t,St,Ot]),j.useEffect(()=>{n?Hn(n):ar(!1)},[n]);const Jo=j.useMemo(()=>{let oe=Bt?nn.items:e;return(Y||B)&&(oe=oe.filter(Pe=>{const Te=new Date(Pe.createdAt),it=Y?new Date(Y):null,Vt=B?new Date(B):null;return!(it&&Te<it||Vt&&Te>Vt)})),r.length>0&&(oe=oe.filter(Pe=>r.some(Te=>Pe.tags.includes(Te)))),oe},[Bt,nn.items,e,Y,B,r]),Xo=j.useMemo(()=>{let oe=Bt?nn.groups:t;return(Y||B)&&(oe=oe.filter(Pe=>{const Te=new Date(Pe.createdAt),it=Y?new Date(Y):null,Vt=B?new Date(B):null;return!(it&&Te<it||Vt&&Te>Vt)})),r.length>0&&(oe=oe.filter(Pe=>r.some(Te=>Pe.tags.includes(Te)))),oe},[Bt,nn.groups,t,Y,B,r]),Xs=()=>{ee(!0)},el=()=>{g(),ee(!1)},tl=async()=>{const oe=await p(),Pe=await se.prepareSyncData(oe.items,oe.groups,oe.tags),Te=await se.generateEmailBackup(Pe);await PD(Te.subject,Te.body,Te.attachment,`snap-organizer-backup-${Date.now()}.json`),ee(!1)},Vc=()=>{ce(null);try{const oe=JSON.parse(K);if(oe.tags&&Array.isArray(oe.tags)){const Pe=localStorage.getItem("postal_tags");let Te=oe.tags;if(Pe){const it=JSON.parse(Pe),Vt=new Set(it.map(le=>le.name)),ut=oe.tags.filter(le=>!Vt.has(le.name));Te=[...it,...ut]}localStorage.setItem("postal_tags",JSON.stringify(Te))}h(oe),H(!1),ne("")}catch{ce("JSONの形式が正しくありません")}},Kc=async()=>{try{const oe=await navigator.clipboard.readText();ne(oe)}catch{ce("クリップボードからの読み取りに失敗しました")}},qc=()=>{te(""),F("")},$i=(oe,Pe)=>{Pe==="item"?bt(Te=>Te.includes(oe)?Te.filter(it=>it!==oe):[...Te,oe]):re(Te=>Te.includes(oe)?Te.filter(it=>it!==oe):[...Te,oe])},Yc=()=>{nt.length===0&&lt.length===0||window.confirm(`選択した${nt.length+lt.length}件のアイテムを削除しますか？`)&&(y(nt,lt),bt([]),re([]),tt(!1))},Qc=()=>{window.confirm("カスタムアイコンを削除しますか？")&&(rP(),be(null))};return v.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 text-gray-800",children:[v.jsxs("header",{className:"bg-white p-4 shadow-md flex items-center justify-between z-10",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx(IP,{value:"https://snap-organizer.vercel.app/",size:40,style:{height:40,width:40}}),v.jsx("h1",{className:"text-xl font-bold",children:"Snap Organizer"}),xe?v.jsxs("div",{className:"relative group",children:[v.jsx("img",{src:xe,alt:"アプリアイコン",className:"h-10 w-10 rounded-lg object-contain"}),v.jsx("div",{className:"absolute -top-2 -right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:v.jsx("button",{onClick:Qc,className:"p-1 bg-red-500 text-white rounded-full hover:bg-red-600",children:v.jsx(ei,{className:"h-3 w-3"})})})]}):v.jsx("button",{onClick:()=>Ke.current?.click(),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"アイコンを設定",children:v.jsx(ww,{className:"h-5 w-5"})})]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx("button",{onClick:()=>H(!0),className:"p-2 rounded-full hover:bg-gray-200 transition-colors",title:"インポート",children:v.jsx(i0,{className:"w-6 h-6"})}),v.jsx("button",{onClick:Xs,className:"p-2 rounded-full hover:bg-gray-200 transition-colors",title:"エクスポート/共有",children:v.jsx(hs,{className:"w-6 h-6"})})]})]}),v.jsx("div",{className:"sticky top-0 bg-white shadow-sm z-10",children:v.jsxs("div",{className:"max-w-md mx-auto px-4",children:[v.jsxs("div",{className:"flex items-center gap-2 py-4",children:[v.jsx("div",{className:"flex-1",children:v.jsx(_P,{value:n,onChange:o,onAdvancedSearch:si,placeholder:"テキストやタグで検索...",showAdvancedSearch:!0,isSearching:_e})}),v.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[v.jsx("button",{onClick:()=>me(!de),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"地図表示",children:v.jsx(cP,{className:"h-5 w-5"})}),v.jsx("button",{onClick:()=>l("unified"),className:"p-3 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-colors shadow-md",title:"写真を追加",children:v.jsx(Fa,{className:"h-6 w-6"})})]})]}),de&&v.jsx("div",{className:"mb-4 bg-white rounded-xl shadow-sm overflow-hidden",children:v.jsx(nm,{items:Jo,groups:Xo,onItemClick:u,onGroupClick:c})}),v.jsxs("div",{className:"flex items-center gap-2 pb-4",children:[v.jsx("input",{type:"date",value:Y,onChange:oe=>te(oe.target.value),className:"flex-1 px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),v.jsx("span",{className:"text-gray-400 flex-shrink-0",children:"～"}),v.jsx("input",{type:"date",value:B,onChange:oe=>F(oe.target.value),min:Y,className:"flex-1 px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),(Y||B)&&v.jsx("button",{onClick:qc,className:"text-sm text-blue-500 hover:text-blue-600 px-2 flex-shrink-0",children:"クリア"})]}),Bt&&v.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(Fu,{className:"h-4 w-4 text-blue-600"}),v.jsxs("span",{className:"text-sm font-medium text-blue-900",children:["検索結果 (",we.length,"件)"]})]}),v.jsx("button",{onClick:()=>{ar(!1),o("")},className:"text-xs text-blue-600 hover:text-blue-800",children:"クリア"})]}),ke&&v.jsx("p",{className:"text-xs text-red-600 mb-2",children:ke}),v.jsxs("p",{className:"text-xs text-blue-700",children:[Dn==="advanced"?"高度な検索":"基本検索","で「",n,"」を検索"]})]})]})}),v.jsxs("div",{className:"max-w-md mx-auto px-4 py-4",children:[v.jsx("div",{className:"flex items-center justify-between mb-2",children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("h2",{className:"text-base font-semibold",children:"タグフィルター"}),v.jsx("button",{onClick:()=>z(!k),className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:v.jsx(_w,{className:"h-4 w-4"})})]})}),v.jsx("div",{className:"flex flex-wrap gap-2",children:E.map((oe,Pe)=>v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx(Ai,{tag:oe.name,selected:r.includes(oe.name),onClick:()=>a(oe.name),style:{backgroundColor:oe.color+"22",color:oe.color}}),v.jsx("button",{onClick:()=>V(Pe),className:"p-1 hover:bg-gray-100 rounded",children:v.jsx(bw,{className:"h-4 w-4"})}),v.jsx("button",{onClick:()=>J(Pe),className:"p-1 hover:bg-red-100 rounded",children:v.jsx(fs,{className:"h-4 w-4 text-red-500"})})]},oe.name))}),A!==null&&v.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[v.jsx("input",{value:M,onChange:oe=>U(oe.target.value),className:"border p-1 rounded w-24"}),v.jsx("input",{type:"color",value:I,onChange:oe=>T(oe.target.value),className:"w-8 h-8 p-0 border-none"}),v.jsx("button",{onClick:()=>{Z(),f(E[A].name,M.trim())},className:"px-2 py-1 bg-blue-500 text-white rounded",children:"保存"}),v.jsx("button",{onClick:q,className:"px-2 py-1 bg-gray-200 rounded",children:"キャンセル"})]}),N?v.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[v.jsx("input",{value:x,onChange:oe=>S(oe.target.value),placeholder:"新規タグ名",className:"border p-1 rounded w-24"}),v.jsx("input",{type:"color",value:C,onChange:oe=>D(oe.target.value),className:"w-8 h-8 p-0 border-none"}),v.jsx("button",{onClick:R,className:"px-2 py-1 bg-blue-500 text-white rounded",children:"追加"}),v.jsx("button",{onClick:()=>b(!1),className:"px-2 py-1 bg-gray-200 rounded",children:"キャンセル"})]}):v.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-1 px-2 py-1 bg-gray-100 rounded hover:bg-gray-200 mt-2",children:[v.jsx(Fa,{className:"h-4 w-4"})," 新規タグ"]})]}),v.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:v.jsxs("div",{className:"max-w-md mx-auto px-4 py-4",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"スナップ一覧"}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsxs("button",{onClick:()=>tt(!Oe),className:`flex items-center gap-1 px-3 py-2 rounded-lg transition-colors ${Oe?"bg-blue-100 text-blue-600":"hover:bg-gray-100"}`,children:[v.jsx(Jd,{className:"h-5 w-5"}),v.jsx("span",{className:"text-sm",children:Oe?"選択モード中":"一括選択"})]}),Oe&&(nt.length>0||lt.length>0)&&v.jsxs("button",{onClick:Yc,className:"flex items-center gap-1 px-3 py-2 hover:bg-red-100 rounded-lg transition-colors text-red-500",children:[v.jsx(fs,{className:"h-5 w-5"}),v.jsxs("span",{className:"text-sm",children:[nt.length+lt.length,"件削除"]})]}),v.jsxs("button",{onClick:()=>l("unified"),className:"flex items-center gap-1 px-3 py-2 bg-blue-500 hover:bg-blue-600 rounded-lg transition-colors text-white",children:[v.jsx(Fa,{className:"h-5 w-5"}),v.jsx("span",{className:"text-sm",children:"新規追加"})]})]})]}),Oe&&v.jsxs("div",{className:"mt-2 text-sm text-gray-600 flex items-center gap-2",children:[v.jsxs("span",{children:[nt.length+lt.length,"件選択中"]}),nt.length+lt.length>0&&v.jsx("button",{onClick:()=>{bt([]),re([])},className:"text-blue-500 hover:underline",children:"選択解除"})]})]})}),v.jsx("div",{className:"max-w-md mx-auto px-4",children:Jo.length===0&&Xo.length===0?v.jsxs("div",{className:"text-center py-12",children:[v.jsx(pP,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),v.jsx("p",{className:"text-gray-500",children:"まだアイテムがありません"}),v.jsx("p",{className:"text-gray-400 text-sm",children:"写真を撮影してアイテムを追加しましょう"})]}):v.jsxs("div",{className:"space-y-4",children:[Jo.map(oe=>v.jsxs("div",{className:"relative",children:[Oe&&v.jsx("button",{onClick:()=>$i(oe.id,"item"),className:`absolute top-2 right-2 z-10 p-2 rounded-full ${nt.includes(oe.id)?"bg-blue-500 text-white":"bg-white text-gray-500"}`,children:v.jsx(Jd,{className:"h-5 w-5"})}),v.jsx(s0,{item:oe,onClick:Oe?()=>$i(oe.id,"item"):()=>u(oe.id),imageUrl:ve[oe.image]})]},oe.id)),Xo.map(oe=>v.jsxs("div",{className:"relative",children:[Oe&&v.jsx("button",{onClick:()=>$i(oe.id,"group"),className:`absolute top-2 right-2 z-10 p-2 rounded-full ${lt.includes(oe.id)?"bg-blue-500 text-white":"bg-white text-gray-500"}`,children:v.jsx(Jd,{className:"h-5 w-5"})}),v.jsx(s0,{group:oe,onClick:Oe?()=>$i(oe.id,"group"):()=>c(oe.id),imageUrl:oe.photos[0]?ve[oe.photos[0].image]:void 0})]},oe.id))]})}),G&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:v.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:v.jsxs("div",{className:"p-6",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h3",{className:"text-lg font-semibold",children:"データのインポート"}),v.jsx("button",{onClick:()=>H(!1),className:"text-gray-400 hover:text-gray-600",children:v.jsx(ei,{className:"h-5 w-5"})})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("label",{className:"block p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-colors cursor-pointer",children:[v.jsxs("div",{className:"flex items-center justify-center gap-2",children:[v.jsx(ds,{className:"h-6 w-6 text-gray-400"}),v.jsx("span",{className:"text-gray-600",children:"ファイルを選択"})]}),v.jsx("input",{type:"file",accept:"application/json",className:"hidden",onChange:oe=>{const Pe=oe.target.files?.[0];if(Pe){const Te=new FileReader;Te.onload=it=>{ne(it.target?.result)},Te.readAsText(Pe)}}})]}),v.jsxs("div",{className:"relative",children:[v.jsx("textarea",{value:K,onChange:oe=>ne(oe.target.value),placeholder:"JSONデータを直接入力またはペースト",className:"w-full h-48 p-3 border border-gray-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),v.jsx("button",{onClick:Kc,className:"absolute top-2 right-2 p-2 text-gray-400 hover:text-gray-600",title:"クリップボードから貼り付け",children:v.jsx(sP,{className:"h-5 w-5"})})]}),Q&&v.jsx("div",{className:"text-red-500 text-sm",children:Q}),v.jsxs("div",{className:"flex justify-end gap-2",children:[v.jsx("button",{onClick:()=>H(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"キャンセル"}),v.jsx("button",{onClick:Vc,disabled:!K.trim(),className:`px-4 py-2 rounded-lg ${K.trim()?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:"インポート"})]})]})]})})}),rt&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-sm",children:[v.jsx("h2",{className:"text-xl font-bold mb-4",children:"エクスポート/共有"}),v.jsx("p",{className:"mb-6",children:"データのエクスポート方法を選択してください。"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("button",{onClick:el,className:"w-full flex items-center justify-center p-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[v.jsx(i0,{className:"w-5 h-5 mr-2"}),"JSONファイルとしてダウンロード"]}),v.jsxs("button",{onClick:tl,className:"w-full flex items-center justify-center p-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[v.jsx(Xp,{className:"w-5 h-5 mr-2"}),"Eメールで共有"]})]}),v.jsx("button",{onClick:()=>ee(!1),className:"mt-6 w-full p-2 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors",children:"キャンセル"})]})})]})};function ID(e){let t=e.replace(/[\u3000]/g," ");return t=t.replace(/[\r\n\t\v\f\u200B-\u200D\uFEFF]/g," "),t=t.replace(/[０-９]/g,n=>String.fromCharCode(n.charCodeAt(0)-65296+48)),t=t.replace(/―/g,"ー"),t=t.replace(/ +/g," "),t=t.trim(),t=t.replace(/([\p{Script=Hiragana}\p{Script=Katakana}\p{Script=Han}0-9]) ([\p{Script=Hiragana}\p{Script=Katakana}\p{Script=Han}0-9])/gu,"$1$2"),t}let Zt,Ta=null;function Ux(){return(Ta===null||Ta.byteLength===0)&&(Ta=new Uint8Array(Zt.memory.buffer)),Ta}let vm=0;function $x(e,t){const n=t(e.length*1,1)>>>0;return Ux().set(e,n/1),vm=e.length,n}function Hx(e,t){return e=e>>>0,Ux().subarray(e/1,e/1+t)}function TD(e){const t=$x(e,Zt.__wbindgen_malloc),n=vm,r=Zt.preprocess_image(t,n);var o=Hx(r[0],r[1]).slice();return Zt.__wbindgen_free(r[0],r[1]*1,1),o}function DD(e){const t=$x(e,Zt.__wbindgen_malloc),n=vm,r=Zt.preprocess_image_color(t,n);var o=Hx(r[0],r[1]).slice();return Zt.__wbindgen_free(r[0],r[1]*1,1),o}async function LD(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(r){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function Zx(){const e={};return e.wbg={},e.wbg.__wbindgen_init_externref_table=function(){const t=Zt.__wbindgen_export_0,n=t.grow(4);t.set(0,void 0),t.set(n+0,void 0),t.set(n+1,null),t.set(n+2,!0),t.set(n+3,!1)},e}function Gx(e,t){return Zt=e.exports,Nc.__wbindgen_wasm_module=t,Ta=null,Zt.__wbindgen_start(),Zt}function AD(e){if(Zt!==void 0)return Zt;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module:e}=e:console.warn("using deprecated parameters for `initSync()`; pass a single object instead"));const t=Zx();e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e));const n=new WebAssembly.Instance(e,t);return Gx(n,e)}async function Nc(e){if(Zt!==void 0)return Zt;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof e>"u"&&(e=new URL("/assets/your_wasm_pkg_bg-8Lt4Qz1d.wasm",import.meta.url));const t=Zx();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:r}=await LD(await e,t);return Gx(n,r)}const MD=Object.freeze(Object.defineProperty({__proto__:null,default:Nc,initSync:AD,preprocess_image:TD,preprocess_image_color:DD},Symbol.toStringTag,{value:"Module"}));var Gh={exports:{}};(function(e,t){(function(){var n=function(I){if(I instanceof n)return I;if(!(this instanceof n))return new n(I);this.EXIFwrapped=I};e.exports&&(t=e.exports=n),t.EXIF=n;var r=n.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},o=n.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},a=n.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},l=n.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},u=n.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function c(I){return!!I.exifdata}function f(I,T){T=T||I.match(/^data\:([^\;]+)\;base64,/mi)[1]||"",I=I.replace(/^data\:([^\;]+)\;base64,/gmi,"");for(var R=atob(I),V=R.length,Z=new ArrayBuffer(V),q=new Uint8Array(Z),J=0;J<V;J++)q[J]=R.charCodeAt(J);return Z}function h(I,T){var R=new XMLHttpRequest;R.open("GET",I,!0),R.responseType="blob",R.onload=function(V){(this.status==200||this.status===0)&&T(this.response)},R.send()}function g(I,T){function R(J){var Y=p(J);I.exifdata=Y||{};var te=y(J);if(I.iptcdata=te||{},n.isXmpEnabled){var B=A(J);I.xmpdata=B||{}}T&&T.call(I)}if(I.src)if(/^data\:/i.test(I.src)){var V=f(I.src);R(V)}else if(/^blob\:/i.test(I.src)){var Z=new FileReader;Z.onload=function(J){R(J.target.result)},h(I.src,function(J){Z.readAsArrayBuffer(J)})}else{var q=new XMLHttpRequest;q.onload=function(){if(this.status==200||this.status===0)R(q.response);else throw"Could not load image";q=null},q.open("GET",I.src,!0),q.responseType="arraybuffer",q.send(null)}else if(self.FileReader&&(I instanceof self.Blob||I instanceof self.File)){var Z=new FileReader;Z.onload=function(Y){R(Y.target.result)},Z.readAsArrayBuffer(I)}}function p(I){var T=new DataView(I);if(T.getUint8(0)!=255||T.getUint8(1)!=216)return!1;for(var R=2,V=I.byteLength,Z;R<V;){if(T.getUint8(R)!=255)return!1;if(Z=T.getUint8(R+1),Z==225)return D(T,R+4,T.getUint16(R+2)-2);R+=2+T.getUint16(R+2)}}function y(I){var T=new DataView(I);if(T.getUint8(0)!=255||T.getUint8(1)!=216)return!1;for(var R=2,V=I.byteLength,Z=function(te,B){return te.getUint8(B)===56&&te.getUint8(B+1)===66&&te.getUint8(B+2)===73&&te.getUint8(B+3)===77&&te.getUint8(B+4)===4&&te.getUint8(B+5)===4};R<V;){if(Z(T,R)){var q=T.getUint8(R+7);q%2!==0&&(q+=1),q===0&&(q=4);var J=R+8+q,Y=T.getUint16(R+6+q);return E(I,J,Y)}R++}}var w={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function E(I,T,R){for(var V=new DataView(I),Z={},q,J,Y,te,B=T;B<T+R;)V.getUint8(B)===28&&V.getUint8(B+1)===2&&(te=V.getUint8(B+2),te in w&&(Y=V.getInt16(B+3),J=w[te],q=C(V,B+5,Y),Z.hasOwnProperty(J)?Z[J]instanceof Array?Z[J].push(q):Z[J]=[Z[J],q]:Z[J]=q)),B++;return Z}function N(I,T,R,V,Z){var q=I.getUint16(R,!Z),J={},Y,te,B;for(B=0;B<q;B++)Y=R+B*12+2,te=V[I.getUint16(Y,!Z)],J[te]=b(I,Y,T,R,Z);return J}function b(I,T,R,V,Z){var q=I.getUint16(T+2,!Z),J=I.getUint32(T+4,!Z),Y=I.getUint32(T+8,!Z)+R,te,B,F,k,z,G;switch(q){case 1:case 7:if(J==1)return I.getUint8(T+8,!Z);for(te=J>4?Y:T+8,B=[],k=0;k<J;k++)B[k]=I.getUint8(te+k);return B;case 2:return te=J>4?Y:T+8,C(I,te,J-1);case 3:if(J==1)return I.getUint16(T+8,!Z);for(te=J>2?Y:T+8,B=[],k=0;k<J;k++)B[k]=I.getUint16(te+2*k,!Z);return B;case 4:if(J==1)return I.getUint32(T+8,!Z);for(B=[],k=0;k<J;k++)B[k]=I.getUint32(Y+4*k,!Z);return B;case 5:if(J==1)return z=I.getUint32(Y,!Z),G=I.getUint32(Y+4,!Z),F=new Number(z/G),F.numerator=z,F.denominator=G,F;for(B=[],k=0;k<J;k++)z=I.getUint32(Y+8*k,!Z),G=I.getUint32(Y+4+8*k,!Z),B[k]=new Number(z/G),B[k].numerator=z,B[k].denominator=G;return B;case 9:if(J==1)return I.getInt32(T+8,!Z);for(B=[],k=0;k<J;k++)B[k]=I.getInt32(Y+4*k,!Z);return B;case 10:if(J==1)return I.getInt32(Y,!Z)/I.getInt32(Y+4,!Z);for(B=[],k=0;k<J;k++)B[k]=I.getInt32(Y+8*k,!Z)/I.getInt32(Y+4+8*k,!Z);return B}}function x(I,T,R){var V=I.getUint16(T,!R);return I.getUint32(T+2+V*12,!R)}function S(I,T,R,V){var Z=x(I,T+R,V);if(Z){if(Z>I.byteLength)return{}}else return{};var q=N(I,T,T+Z,l,V);if(q.Compression)switch(q.Compression){case 6:if(q.JpegIFOffset&&q.JpegIFByteCount){var J=T+q.JpegIFOffset,Y=q.JpegIFByteCount;q.blob=new Blob([new Uint8Array(I.buffer,J,Y)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",q.Compression)}else q.PhotometricInterpretation==2&&console.log("Thumbnail image format is RGB, which is not implemented.");return q}function C(I,T,R){var V="";for(let Z=T;Z<T+R;Z++)V+=String.fromCharCode(I.getUint8(Z));return V}function D(I,T){if(C(I,T,4)!="Exif")return!1;var R,V,Z,q,J,Y=T+6;if(I.getUint16(Y)==18761)R=!1;else if(I.getUint16(Y)==19789)R=!0;else return!1;if(I.getUint16(Y+2,!R)!=42)return!1;var te=I.getUint32(Y+4,!R);if(te<8)return!1;if(V=N(I,Y,Y+te,o,R),V.ExifIFDPointer){q=N(I,Y,Y+V.ExifIFDPointer,r,R);for(Z in q){switch(Z){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":q[Z]=u[Z][q[Z]];break;case"ExifVersion":case"FlashpixVersion":q[Z]=String.fromCharCode(q[Z][0],q[Z][1],q[Z][2],q[Z][3]);break;case"ComponentsConfiguration":q[Z]=u.Components[q[Z][0]]+u.Components[q[Z][1]]+u.Components[q[Z][2]]+u.Components[q[Z][3]];break}V[Z]=q[Z]}}if(V.GPSInfoIFDPointer){J=N(I,Y,Y+V.GPSInfoIFDPointer,a,R);for(Z in J){switch(Z){case"GPSVersionID":J[Z]=J[Z][0]+"."+J[Z][1]+"."+J[Z][2]+"."+J[Z][3];break}V[Z]=J[Z]}}return V.thumbnail=S(I,Y,te,R),V}function A(I){if("DOMParser"in self){var T=new DataView(I);if(T.getUint8(0)!=255||T.getUint8(1)!=216)return!1;for(var R=2,V=I.byteLength,Z=new DOMParser;R<V-4;)if(C(T,R,4)=="http"){var q=R-1,J=T.getUint16(R-2)-1,Y=C(T,q,J),te=Y.indexOf("xmpmeta>")+8;Y=Y.substring(Y.indexOf("<x:xmpmeta"),te);var B=Y.indexOf("x:xmpmeta")+10;Y=Y.slice(0,B)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+Y.slice(B);var F=Z.parseFromString(Y,"text/xml");return U(F)}else R++}}function M(I){var T={};if(I.nodeType==1){if(I.attributes.length>0){T["@attributes"]={};for(var R=0;R<I.attributes.length;R++){var V=I.attributes.item(R);T["@attributes"][V.nodeName]=V.nodeValue}}}else if(I.nodeType==3)return I.nodeValue;if(I.hasChildNodes())for(var Z=0;Z<I.childNodes.length;Z++){var q=I.childNodes.item(Z),J=q.nodeName;if(T[J]==null)T[J]=M(q);else{if(T[J].push==null){var Y=T[J];T[J]=[],T[J].push(Y)}T[J].push(M(q))}}return T}function U(I){try{var T={};if(I.children.length>0)for(var R=0;R<I.children.length;R++){var V=I.children.item(R),Z=V.attributes;for(var q in Z){var J=Z[q],Y=J.nodeName,te=J.nodeValue;Y!==void 0&&(T[Y]=te)}var B=V.nodeName;if(typeof T[B]>"u")T[B]=M(V);else{if(typeof T[B].push>"u"){var F=T[B];T[B]=[],T[B].push(F)}T[B].push(M(V))}}else T=I.textContent;return T}catch(k){console.log(k.message)}}n.enableXmp=function(){n.isXmpEnabled=!0},n.disableXmp=function(){n.isXmpEnabled=!1},n.getData=function(I,T){return(self.Image&&I instanceof self.Image||self.HTMLImageElement&&I instanceof self.HTMLImageElement)&&!I.complete?!1:(c(I)?T&&T.call(I):g(I,T),!0)},n.getTag=function(I,T){if(c(I))return I.exifdata[T]},n.getIptcTag=function(I,T){if(c(I))return I.iptcdata[T]},n.getAllTags=function(I){if(!c(I))return{};var T,R=I.exifdata,V={};for(T in R)R.hasOwnProperty(T)&&(V[T]=R[T]);return V},n.getAllIptcTags=function(I){if(!c(I))return{};var T,R=I.iptcdata,V={};for(T in R)R.hasOwnProperty(T)&&(V[T]=R[T]);return V},n.pretty=function(I){if(!c(I))return"";var T,R=I.exifdata,V="";for(T in R)R.hasOwnProperty(T)&&(typeof R[T]=="object"?R[T]instanceof Number?V+=T+" : "+R[T]+" ["+R[T].numerator+"/"+R[T].denominator+`]\r
`:V+=T+" : ["+R[T].length+` values]\r
`:V+=T+" : "+R[T]+`\r
`);return V},n.readFromBinaryFile=function(I){return p(I)}}).call(e_)})(Gh,Gh.exports);var RD=Gh.exports;const pi=Uo(RD),OD=({onSave:e,onBack:t})=>{const{tags:n,showAddTag:r,setShowAddTag:o,newTagName:a,setNewTagName:l,newTagColor:u,setNewTagColor:c,handleAddTag:f}=Cw(),[h,g]=j.useState([]),[p,y]=j.useState(""),[w,E]=j.useState([]),[N,b]=j.useState(""),[x,S]=j.useState(!1),[C,D]=j.useState(!1),[A,M]=j.useState(!1),[U,I]=j.useState(null),[T,R]=j.useState(!1),[V,Z]=j.useState("disabled"),[q,J]=j.useState(!1),[Y,te]=j.useState({}),[B,F]=j.useState({}),[k,z]=j.useState(!1),[G,H]=j.useState(null),[K,ne]=j.useState(!1),Q=j.useRef(new Set),ce=j.useRef(null),ve=j.useRef(null);j.useEffect(()=>{Nc().then(()=>{D(!0),console.log("WASM initialized successfully")}).catch(ee=>{console.error("WASM initialization failed:",ee),I(`WASM初期化に失敗しました: ${ee.message}`)})},[]),j.useEffect(()=>{(async()=>{const ee={};for(const se of h)if(se.image&&!Y[se.image]){const he=await nr(se.image);he&&(ee[se.image]=URL.createObjectURL(he))}te(se=>({...se,...ee}))})()},[h]);const $e=(ee,se)=>{g(he=>he.map(_e=>{if(_e.id!==ee)return _e;let we=(_e.rotation||0)+(se==="right"?90:-90);return we=(we%360+360)%360,{..._e,rotation:we}}))},Oe=async(ee,se)=>!se||se%360===0?ee:new Promise((he,_e)=>{const we=new window.Image;we.onload=()=>{const ke=document.createElement("canvas"),Be=ke.getContext("2d");if(!Be)return _e("No ctx");switch(se%180===0?(ke.width=we.width,ke.height=we.height):(ke.width=we.height,ke.height=we.width),Be.save(),se){case 90:Be.translate(ke.width,0),Be.rotate(Math.PI/2);break;case 180:Be.translate(ke.width,ke.height),Be.rotate(Math.PI);break;case 270:Be.translate(0,ke.height),Be.rotate(-Math.PI/2);break}Be.drawImage(we,0,0),Be.restore(),he(ke.toDataURL("image/jpeg"))},we.onerror=_e,we.src=ee}),tt=()=>{if(!navigator.geolocation){alert("お使いのブラウザは位置情報の取得に対応していません");return}z(!0),navigator.geolocation.getCurrentPosition(ee=>{H({lat:ee.coords.latitude,lon:ee.coords.longitude}),z(!1)},ee=>{console.error("位置情報の取得に失敗しました:",ee),alert("位置情報の取得に失敗しました"),z(!1)},{enableHighAccuracy:!0})};j.useEffect(()=>{const ee=ve.current,se=ce.current,he=async we=>{const ke={target:we.target};if(K){console.log("処理中のため、新しい撮影をスキップします");return}await nt(ke)},_e=async we=>{const ke={target:we.target};if(K){console.log("処理中のため、新しいファイル選択をスキップします");return}await bt(ke)};return ee&&(ee.onchange=he),se&&(se.onchange=_e),()=>{ee&&(ee.onchange=null,ee.value=""),se&&(se.onchange=null,se.value=""),Q.current.clear()}},[G,K]);const nt=async ee=>{if(!ee.target.files?.length)return;const se=ee.target.files[0],he=`${se.name}-${se.size}-${se.lastModified}`;if(Q.current.has(he)){console.log("既に処理済みのファイルです:",he);return}ne(!0),S(!0),I(null);try{console.log("カメラ撮影開始:",he),Q.current.add(he);let _e=G;if(_e===null)try{_e=await new Promise((Dn,sr)=>{const si=setTimeout(()=>sr(new Error("位置情報の取得がタイムアウトしました")),1e4);navigator.geolocation.getCurrentPosition(Hn=>{clearTimeout(si);const nn={lat:Hn.coords.latitude,lon:Hn.coords.longitude};console.log("カメラ撮影: 位置情報を取得しました",{location:nn,accuracy:Hn.coords.accuracy,timestamp:new Date(Hn.timestamp).toISOString()}),Dn(nn)},Hn=>{clearTimeout(si),console.warn("位置情報の取得に失敗しました:",Hn),Dn(null)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})})}catch(Dn){console.warn("位置情報の取得に失敗しました:",Dn),_e=null}else console.log("カメラ撮影: 既存の位置情報を使用します",_e);const we=du();console.log("画像処理開始:",he,we);const ke=await h0(se),St=await(await fetch(ke)).blob();await So(we,St);const Ot=await re(se);console.log("カメラ撮影: EXIFの位置情報",{fileKey:he,exifLocation:Ot,deviceLocation:_e});const Bt={filename:se.name,source:"camera",dateTaken:await lt(se),location:_e||Ot};console.log("カメラ撮影: メタデータを設定",{fileKey:he,metadata:Bt});const ar={id:we,image:we,ocrText:"",createdAt:new Date,updatedAt:new Date,metadata:Bt,tags:[],memo:"",rotation:0};console.log("画像処理完了:",he,we),g(Dn=>[...Dn,ar])}catch(_e){console.error("カメラ撮影エラー:",_e),I(_e instanceof Error?_e.message:"写真の処理に失敗しました"),Q.current.delete(he)}finally{S(!1),ne(!1),ee.target&&(ee.target.value="")}},bt=async ee=>{if(ee.target.files?.length){ne(!0),S(!0),I(null);try{const se=[];for(const he of Array.from(ee.target.files)){const _e=`${he.name}-${he.size}-${he.lastModified}`;if(Q.current.has(_e)){console.log("既に処理済みのファイルです:",_e);continue}Q.current.add(_e);const we=du();console.log("画像処理開始:",_e,we);const ke=await h0(he),St=await(await fetch(ke)).blob();await So(we,St);const Ot={filename:he.name,source:"bulk",dateTaken:await lt(he),location:await re(he)},Bt={id:we,image:we,ocrText:"",createdAt:new Date,updatedAt:new Date,metadata:Ot,tags:[],memo:"",rotation:0};console.log("画像処理完了:",_e,we),se.push(Bt)}g(he=>[...he,...se])}catch(se){console.error("ファイル処理エラー:",se),I(se instanceof Error?se.message:"写真の処理中にエラーが発生しました")}finally{S(!1),ne(!1),ee.target&&(ee.target.value="")}}},lt=async ee=>new Promise(se=>{const he=function(){const _e=pi.getTag(this,"DateTimeOriginal");if(_e){const[we,ke]=_e.split(" "),[Be,St,Ot]=we.split(":");se(`${Be}-${St}-${Ot}`)}else se(void 0)};pi.getData(ee,he)}),re=async ee=>new Promise(se=>{const he=function(){const _e=pi.getTag(this,"GPSLatitude"),we=pi.getTag(this,"GPSLongitude"),ke=pi.getTag(this,"GPSLatitudeRef"),Be=pi.getTag(this,"GPSLongitudeRef");if(_e&&we&&ke&&Be){const St=de(_e,ke),Ot=de(we,Be);!isNaN(St)&&!isNaN(Ot)?se({lat:St,lon:Ot}):se(void 0)}else se(void 0)};pi.getData(ee,he)}),de=(ee,se)=>{if(!ee||ee.length!==3)return NaN;const he=ee[0],_e=ee[1],we=ee[2];let ke=he+_e/60+we/3600;return(se==="S"||se==="W")&&(ke=-ke),ke},me=async ee=>{const se=h.find(he=>he.id===ee);if(se){if(V==="disabled"){I("OCRモードが選択されていません");return}S(!0),I(null);try{const he=await nr(se.image);if(!he)throw new Error("画像の読み込みに失敗しました");let _e="";const we=new File([he],"image.jpg",{type:he.type});if(V==="google-cloud"){const ke=await be(he),Be=await fetch("/api/vision-ocr",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageBase64:ke.split(",")[1]})});if(!Be.ok)throw new Error("Google Cloud Vision APIでの処理に失敗しました");const{text:St}=await Be.json();_e=St}else V==="tesseract"&&(_e=await zN(we));g(ke=>ke.map(Be=>Be.id===ee?{...Be,ocrText:ID(_e)}:Be))}catch(he){console.error("OCR error:",he),I(`OCR処理中にエラーが発生しました: ${he.message}`)}finally{S(!1)}}},xe=async()=>{if(h.length===0){I("少なくとも1枚の写真が必要です");return}M(!0),I(null);try{console.log("Starting save process...",{photosCount:h.length,selectedTags:w,memo:N});const ee=[];for(const se of h){console.log("Processing photo:",se.id);let he=await nr(se.image).then(St=>be(St));se.rotation&&se.rotation%360!==0&&(console.log("Applying rotation:",se.rotation),he=await Oe(he,se.rotation));const we=await(await fetch(he)).blob();await So(se.id,we);const{rotation:ke,...Be}=se;ee.push(Be),console.log("Photo processed successfully:",se.id)}if(ee.length===1){const se=ee[0];console.log("Saving single photo:",se),await e({...se,tags:w,memo:N,updatedAt:new Date})}else{const se={id:du(),title:p||`写真グループ ${new Date().toLocaleDateString()}`,photos:ee,tags:w,memo:N,createdAt:new Date,updatedAt:new Date};console.log("Saving group:",se),await e(se)}console.log("Save completed successfully"),R(!0),setTimeout(()=>{R(!1),M(!1),t()},1e3)}catch(ee){console.error("Save error:",ee),I(ee instanceof Error?ee.message:"保存中にエラーが発生しました"),M(!1)}},be=ee=>new Promise((se,he)=>{const _e=new FileReader;_e.onload=()=>se(_e.result),_e.onerror=he,_e.readAsDataURL(ee)}),Ke=ee=>{E(se=>se.includes(ee)?se.filter(he=>he!==ee):[...se,ee])},rt=ee=>{g(h.filter(se=>se.id!==ee))};return v.jsxs("div",{className:"min-h-screen max-h-screen overflow-auto bg-gray-50",children:[v.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:v.jsx("div",{className:"max-w-md mx-auto px-4 py-4",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:v.jsx(_c,{className:"h-5 w-5"})}),v.jsx("h1",{className:"text-xl font-bold text-gray-900 flex-1",children:h.length===1?"新しいアイテム":"写真グループを作成"}),v.jsxs("button",{onClick:xe,disabled:h.length===0||A,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all 
                ${h.length===0||A?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:[v.jsx(qp,{className:"h-4 w-4"}),"保存"]})]})})}),v.jsxs("div",{className:"max-w-md mx-auto px-4 py-6 space-y-6",children:[h.length>1&&v.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:v.jsx("input",{type:"text",value:p,onChange:ee=>y(ee.target.value),placeholder:"グループタイトル（任意）",className:"w-full p-2 border border-gray-200 rounded-lg"})}),v.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"写真を追加"}),h.length===1&&v.jsxs("div",{className:"flex flex-col gap-2 mb-4",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsxs("select",{value:V,onChange:ee=>Z(ee.target.value),className:"flex-1 px-3 py-2 border rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[v.jsx("option",{value:"disabled",children:"OCR無効"}),v.jsx("option",{value:"tesseract",children:"Tesseract OCR（無料）"}),v.jsx("option",{value:"google-cloud",children:"Google Cloud Vision（有料）"})]}),V!=="disabled"&&v.jsx("button",{onClick:()=>me(h[0].id),disabled:x,className:"px-4 py-2 bg-blue-500 text-white text-sm rounded-lg hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:x?"処理中...":"OCR実行"})]}),V!=="disabled"&&v.jsx("p",{className:"text-sm text-gray-500",children:V==="tesseract"?"※ Tesseract OCRは無料ですが、精度が低い場合があります。":"※ Google Cloud Visionは有料ですが、高精度な認識が可能です。"})]}),!h.length&&v.jsxs("div",{className:"space-y-3",children:[v.jsxs("button",{onClick:()=>{tt(),ve.current?.click()},disabled:x||!C||k,className:`w-full flex items-center justify-center gap-3 py-4 border-2 border-dashed rounded-lg transition-colors
                  ${x||!C||k?"border-gray-200 bg-gray-50 cursor-not-allowed":"border-gray-300 hover:border-blue-400 hover:bg-blue-50"}`,children:[v.jsx(yw,{className:`h-6 w-6 ${x||!C||k?"text-gray-300":"text-gray-400"}`}),v.jsx("span",{className:x||!C||k?"text-gray-400":"text-gray-600",children:k?"位置情報を取得中...":x?"処理中...":"カメラで撮影（位置情報付き）"})]}),v.jsxs("button",{onClick:()=>ce.current?.click(),disabled:x||!C,className:`w-full flex items-center justify-center gap-3 py-4 border-2 border-dashed rounded-lg transition-colors
                  ${x||!C?"border-gray-200 bg-gray-50 cursor-not-allowed":"border-gray-300 hover:border-blue-400 hover:bg-blue-50"}`,children:[v.jsx(hs,{className:`h-6 w-6 ${x||!C?"text-gray-300":"text-gray-400"}`}),v.jsx("span",{className:x||!C?"text-gray-400":"text-gray-600",children:x?"処理中...":"ギャラリーから選択（複数可）"})]})]}),v.jsx("input",{ref:ce,type:"file",accept:"image/*",multiple:!0,onChange:bt,className:"hidden",disabled:x||!C}),v.jsx("input",{ref:ve,type:"file",accept:"image/*",capture:"environment",onChange:nt,className:"hidden",disabled:x||!C}),h.length>0&&v.jsx("div",{className:"mt-4 grid grid-cols-2 gap-2",children:h.map(ee=>v.jsxs("div",{className:"relative group",children:[v.jsx("img",{src:Y[ee.image]||"",alt:"プレビュー",className:"w-full h-40 object-contain rounded",style:{transform:`rotate(${ee.rotation||0}deg)`}}),v.jsxs("div",{className:"absolute bottom-1 left-1 flex gap-1 opacity-80 group-hover:opacity-100",children:[v.jsx("button",{type:"button",className:"p-1 bg-gray-200 rounded-full hover:bg-gray-300",onClick:()=>$e(ee.id,"left"),children:v.jsx(Qp,{className:"h-4 w-4 text-gray-700"})}),v.jsx("button",{type:"button",className:"p-1 bg-gray-200 rounded-full hover:bg-gray-300",onClick:()=>$e(ee.id,"right"),children:v.jsx(Jp,{className:"h-4 w-4 text-gray-700"})})]}),v.jsx("button",{onClick:()=>rt(ee.id),className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",children:v.jsx(ei,{className:"h-4 w-4"})}),h.length===1&&!ee.ocrText&&v.jsx("button",{onClick:()=>me(ee.id),disabled:x,className:"absolute bottom-1 right-1 px-2 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600 disabled:bg-gray-400",children:"OCR実行"})]},ee.id))}),h.length>0&&v.jsx("button",{onClick:()=>{g([]),y(""),b("")},className:"mt-4 text-sm text-blue-500 hover:text-blue-600",children:"別の画像を選択"})]}),h.length===1&&h[0].ocrText&&v.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[v.jsxs("div",{className:"flex justify-between items-center mb-2",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"抽出されたテキスト"}),v.jsx("button",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200",onClick:()=>{const ee=document.getElementById("ocr-textarea");ee&&ee.select()},children:"全選択"})]}),v.jsx("textarea",{id:"ocr-textarea",value:h[0].ocrText,onChange:ee=>g(se=>[{...se[0],ocrText:ee.target.value}]),className:"w-full h-32 p-3 border border-gray-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"OCRで抽出されたテキストが表示されます"})]}),v.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"タグ"}),v.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:n.map(ee=>v.jsx(Ai,{tag:ee.name,selected:w.includes(ee.name),onClick:()=>Ke(ee.name),style:{backgroundColor:ee.color+"22",color:ee.color}},ee.name))}),r?v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v.jsx("input",{value:a,onChange:ee=>l(ee.target.value),placeholder:"新規タグ名",className:"border p-1 rounded w-24"}),v.jsx("input",{type:"color",value:u,onChange:ee=>c(ee.target.value),className:"w-8 h-8 p-0 border-none"}),v.jsx("button",{onClick:f,className:"px-2 py-1 bg-blue-500 text-white rounded",children:"追加"}),v.jsx("button",{onClick:()=>o(!1),className:"px-2 py-1 bg-gray-200 rounded",children:"キャンセル"})]}):v.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-1 px-2 py-1 bg-gray-100 rounded hover:bg-gray-200",children:[v.jsx(Fa,{className:"h-4 w-4"})," 新規タグ"]})]}),v.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"メモ"}),v.jsx("textarea",{value:N,onChange:ee=>b(ee.target.value),className:"w-full h-24 p-3 border border-gray-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"メモを入力..."})]})]}),T&&v.jsx("div",{className:"fixed top-1/3 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-[9999] text-lg font-bold animate-bounce",children:"保存しました"}),U&&v.jsx("div",{className:"fixed top-1/3 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-red-600 text-white px-6 py-3 rounded-lg shadow-lg z-[9999] text-lg font-bold",children:U}),x&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-white p-4 rounded-lg",children:[v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),v.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"処理中..."})]})})]})},BD=({initialLocation:e,onClose:t,onSave:n})=>{const r=j.useRef(null),o=j.useRef(null),[a,l]=j.useState(e),[u,c]=j.useState(""),[f,h]=j.useState([]),[g,p]=j.useState(!1),[y,w]=j.useState(!1);j.useEffect(()=>{const C=Pt.map("location-editor-map").setView(e?[e.lat,e.lon]:[35.6812,139.7671],e?16:13);return Pt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}).addTo(C),C.on("click",D=>{const{lat:A,lng:M}=D.latlng;E({lat:A,lon:M,name:"クリックした場所"}),w(!1)}),r.current=C,e&&E(e),()=>{C.remove()}},[]);const E=C=>{l(C),o.current?o.current.setLatLng([C.lat,C.lon]):o.current=Pt.marker([C.lat,C.lon]).addTo(r.current),o.current.bindPopup(C.name||`緯度: ${C.lat.toFixed(4)}, 経度: ${C.lon.toFixed(4)}`).openPopup(),r.current?.setView([C.lat,C.lon],16)},N=async C=>{if(C.preventDefault(),!!u.trim()){p(!0),w(!1);try{const D=new URLSearchParams({format:"json",q:u,limit:"10",addressdetails:"1",countrycodes:"jp",viewbox:"129.0,30.0,146.0,46.0",bounded:"1"}),M=await(await fetch(`https://nominatim.openstreetmap.org/search?${D}`)).json();M&&M.length>0?(h(M),w(!0)):alert("場所が見つかりませんでした。別のキーワードで検索してください。")}catch(D){console.error("検索エラー:",D),alert("検索中にエラーが発生しました。")}finally{p(!1)}}},b=C=>{const D={lat:parseFloat(C.lat),lon:parseFloat(C.lon),name:C.display_name};E(D),w(!1),c(C.display_name)},x=()=>{a&&n(a)},S=C=>{switch(C.class){case"amenity":return"🏪";case"shop":return"🛍️";case"restaurant":return"🍽️";case"cafe":return"☕";case"place":return"📍";default:return"📍"}};return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-xl w-full max-w-4xl h-5/6 flex flex-col",children:[v.jsx("h2",{className:"text-xl font-bold mb-4",children:"位置情報を編集"}),v.jsxs("form",{onSubmit:N,className:"flex mb-2 relative",children:[v.jsx("input",{type:"text",value:u,onChange:C=>c(C.target.value),placeholder:"地名や施設名で検索（例：心斎橋 ラーメン、渋谷 スターバックス）...",className:"flex-grow p-2 border rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),v.jsx("button",{type:"submit",disabled:g,className:"p-2 bg-blue-500 text-white rounded-r-md hover:bg-blue-600 disabled:bg-gray-400",children:g?"検索中...":"検索"})]}),y&&f.length>0&&v.jsx("div",{className:"mb-4 max-h-48 overflow-y-auto border rounded-lg",children:f.map((C,D)=>v.jsx("div",{onClick:()=>b(C),className:"p-3 border-b cursor-pointer hover:bg-gray-50 last:border-b-0",children:v.jsxs("div",{className:"flex items-start gap-2",children:[v.jsx("span",{className:"text-lg",children:S(C)}),v.jsxs("div",{className:"flex-1",children:[v.jsx("div",{className:"font-medium text-sm",children:C.display_name}),v.jsxs("div",{className:"text-xs text-gray-500",children:["種類: ",C.class," - ",C.type]})]})]})},D))}),v.jsx("div",{id:"location-editor-map",className:"flex-grow rounded border"}),a&&v.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:[v.jsx("h3",{className:"font-medium text-blue-900",children:"選択された場所:"}),v.jsx("p",{className:"text-sm text-blue-800",children:a.name}),v.jsxs("p",{className:"text-xs text-blue-600",children:["緯度: ",a.lat.toFixed(6),", 経度: ",a.lon.toFixed(6)]})]}),v.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[v.jsx("button",{onClick:t,className:"p-2 bg-gray-300 rounded hover:bg-gray-400",children:"キャンセル"}),v.jsx("button",{onClick:x,className:"p-2 bg-green-500 text-white rounded hover:bg-green-600",disabled:!a,children:"この場所を保存"})]})]})})},jD=()=>new Promise((e,t)=>{if(!navigator.geolocation){t(new Error("Geolocation APIがサポートされていません"));return}navigator.geolocation.getCurrentPosition(n=>{e({lat:n.coords.latitude,lon:n.coords.longitude,accuracy:n.coords.accuracy})},n=>{let r="位置情報の取得に失敗しました";switch(n.code){case n.PERMISSION_DENIED:r="位置情報の利用が許可されていません";break;case n.POSITION_UNAVAILABLE:r="位置情報を取得できませんでした";break;case n.TIMEOUT:r="位置情報の取得がタイムアウトしました";break}t(new Error(r))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),Kl=e=>{const{destination:t,mode:n="driving"}=e,r=`https://www.google.com/maps/dir/?api=1&destination=${t.lat},${t.lon}&travelmode=${n}`;window.open(r,"_blank")},zD=e=>{const{destination:t,mode:n="driving"}=e,r=`http://maps.apple.com/?daddr=${t.lat},${t.lon}&dirflg=${n==="walking"?"w":n==="transit"?"r":"d"}`;window.open(r,"_blank")},FD=e=>[{name:"Google Maps",icon:"🗺️",action:()=>Kl({destination:e})},{name:"Apple Maps",icon:"🍎",action:()=>zD({destination:e})},{name:"徒歩で",icon:"🚶",action:()=>Kl({destination:e,mode:"walking"})},{name:"公共交通機関",icon:"🚇",action:()=>Kl({destination:e,mode:"transit"})},{name:"自転車",icon:"🚲",action:()=>Kl({destination:e,mode:"bicycling"})}],UD=(e,t,n,r)=>{const a=(n-e)*Math.PI/180,l=(r-t)*Math.PI/180,u=Math.sin(a/2)*Math.sin(a/2)+Math.cos(e*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))},$D=e=>e<1?`${Math.round(e*1e3)}m`:`${e.toFixed(1)}km`,HD=({destination:e,onClose:t})=>{const[n,r]=Se.useState(null),[o,a]=Se.useState(""),[l,u]=Se.useState(!0);Se.useEffect(()=>{(async()=>{try{const g=await jD();r(g);const p=UD(g.lat,g.lon,e.lat,e.lon);a($D(p))}catch(g){console.error("現在地の取得に失敗:",g)}finally{u(!1)}})()},[e]);const c=FD(e),f=h=>{h(),t()};return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsx("h2",{className:"text-xl font-bold",children:"ここへ行く"}),v.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),v.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:[v.jsx("h3",{className:"font-medium text-blue-900",children:"目的地"}),v.jsx("p",{className:"text-sm text-blue-800",children:e.name||"指定された場所"}),o&&v.jsxs("p",{className:"text-xs text-blue-600",children:["現在地から約 ",o]})]}),v.jsx("div",{className:"space-y-2",children:c.map((h,g)=>v.jsxs("button",{onClick:()=>f(h.action),className:"w-full p-3 text-left border rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-3",children:[v.jsx("span",{className:"text-2xl",children:h.icon}),v.jsx("span",{className:"font-medium",children:h.name})]},g))}),l&&v.jsx("div",{className:"mt-4 text-center text-sm text-gray-500",children:"現在地を取得中..."}),!l&&!n&&v.jsx("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg",children:v.jsx("p",{className:"text-sm text-yellow-800",children:"現在地を取得できませんでした。位置情報の利用を許可してください。"})})]})})},ZD=e=>{const n=JSON.parse(localStorage.getItem("postal_tags")||"[]").find(r=>r.name===e);return n?n.color:"#ccc"},GD=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=n,r.readAsDataURL(e)}),WD=({item:e,onBack:t,onUpdate:n,onDelete:r})=>{const[o,a]=j.useState(!1),[l,u]=j.useState(e.ocrText),[c,f]=j.useState(e.memo),[h,g]=j.useState(e.tags),[p,y]=j.useState(e.metadata?.location||null),[w,E]=j.useState(!1),[N,b]=j.useState(!1),[x,S]=j.useState(!1),[C,D]=j.useState(!1),[A,M]=j.useState(()=>{const H=localStorage.getItem("postal_tags");return H?JSON.parse(H):[]}),[U,I]=j.useState(""),[T,R]=j.useState(0);j.useEffect(()=>{const H=localStorage.getItem("postal_tags");H&&M(JSON.parse(H))},[o]),j.useEffect(()=>{e.image&&nr(e.image).then(H=>{H&&I(URL.createObjectURL(H))})},[e.image]);const V=H=>new Intl.DateTimeFormat("ja-JP",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",weekday:"long"}).format(H),Z=async(H,K)=>!K||K%360===0?H:new Promise((ne,Q)=>{const ce=new window.Image;ce.onload=()=>{const ve=document.createElement("canvas"),$e=ve.getContext("2d");if(!$e)return Q("No ctx");switch(K%180===0?(ve.width=ce.width,ve.height=ce.height):(ve.width=ce.height,ve.height=ce.width),$e.save(),K){case 90:$e.translate(ve.width,0),$e.rotate(Math.PI/2);break;case 180:$e.translate(ve.width,ve.height),$e.rotate(Math.PI);break;case 270:$e.translate(0,ve.height),$e.rotate(-Math.PI/2);break}$e.drawImage(ce,0,0),$e.restore(),ne(ve.toDataURL("image/jpeg"))},ce.onerror=Q,ce.src=H}),q=H=>{R(K=>{let ne=K+(H==="right"?90:-90);return ne=(ne%360+360)%360,ne})},J=async()=>{let H="";if(e.image){const ne=await nr(e.image);if(H=await GD(ne),T&&T%360!==0){H=await Z(H,T);const ce=await(await fetch(H)).blob();await nr(e.image).then(()=>So(e.id,ce))}}const K={...e.metadata,location:p||void 0};n({ocrText:l,memo:c,tags:h,metadata:K}),a(!1)},Y=()=>{u(e.ocrText),f(e.memo),g(e.tags),y(e.metadata?.location||null),a(!1)},te=H=>{g(K=>K.includes(H)?K.filter(ne=>ne!==H):[...K,H])},B=async()=>{window.confirm("このアイテムを削除しますか？")&&await r?.()},F=()=>{if(!("webkitSpeechRecognition"in window||"SpeechRecognition"in window)){alert("このブラウザは音声認識に対応していません");return}const H=window.SpeechRecognition||window.webkitSpeechRecognition,K=new H;K.lang="ja-JP",K.interimResults=!1,K.maxAlternatives=1,K.onstart=()=>E(!0),K.onend=()=>E(!1),K.onerror=()=>E(!1),K.onresult=ne=>{const Q=ne.results[0][0].transcript;f(ce=>ce?ce+`
`+Q:Q)},K.start()},k=async()=>{b(!0);try{await CD(e)||alert("共有に失敗しました。")}catch(H){console.error("共有エラー:",H),alert("共有中にエラーが発生しました。")}finally{b(!1)}},z=H=>{y(H),S(!1)},G=()=>{p&&D(!0)};return v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[v.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:v.jsx("div",{className:"max-w-md mx-auto px-4 py-4",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:v.jsx(_c,{className:"h-5 w-5"})}),v.jsx("h1",{className:"text-xl font-bold text-gray-900 flex-1",children:"アイテム詳細"}),v.jsx("div",{className:"flex items-center gap-2",children:o?v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:Y,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:v.jsx(ei,{className:"h-5 w-5 text-gray-500"})}),v.jsx("button",{onClick:J,className:"p-2 hover:bg-green-100 rounded-lg transition-colors",children:v.jsx(qp,{className:"h-5 w-5 text-green-600"})})]}):v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:k,disabled:N,className:`p-2 rounded-lg transition-colors ${N?"bg-gray-200 cursor-not-allowed":"hover:bg-gray-100"}`,children:v.jsx(Xp,{className:"h-5 w-5"})}),r&&v.jsx("button",{onClick:B,className:"p-2 hover:bg-red-100 rounded-lg transition-colors",children:v.jsx(fs,{className:"h-5 w-5 text-red-500"})}),v.jsx("button",{onClick:()=>a(!0),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:v.jsx(xw,{className:"h-5 w-5"})})]})})]})})}),o&&v.jsx("div",{className:"bg-yellow-100 text-yellow-800 p-2 text-center text-sm",children:"編集中"}),v.jsxs("main",{className:"max-w-md mx-auto px-4 pb-20",children:[U&&v.jsxs("div",{className:"mb-4 relative",children:[v.jsx("img",{src:U,alt:"Postal Item",className:"rounded-lg w-full h-auto object-contain transition-transform duration-300",style:{transform:`rotate(${T}deg)`}}),o&&v.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[v.jsx("button",{onClick:()=>q("left"),className:"bg-white/80 p-2 rounded-full shadow-md hover:bg-white",children:v.jsx(Qp,{className:"h-5 w-5"})}),v.jsx("button",{onClick:()=>q("right"),className:"bg-white/80 p-2 rounded-full shadow-md hover:bg-white",children:v.jsx(Jp,{className:"h-5 w-5"})})]})]}),v.jsx("div",{className:"mb-6",children:v.jsx("div",{className:"flex flex-wrap gap-2",children:o?A.map(H=>v.jsx(Ai,{tag:H.name,color:H.color,selected:h.includes(H.name),onClick:()=>te(H.name)},H.name)):e.tags.map(H=>v.jsx(Ai,{tag:H,color:ZD(H)},H))})}),v.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-6",children:[v.jsx(zu,{className:"h-4 w-4"}),v.jsx("span",{children:V(new Date(e.createdAt))})]}),v.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(ds,{className:"h-5 w-5 text-gray-400"}),v.jsx("h3",{className:"text-lg font-semibold",children:"認識されたテキスト"})]}),o?v.jsx("textarea",{value:l,onChange:H=>u(H.target.value),className:"mt-2 w-full h-32 p-3 border border-gray-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):v.jsx("div",{className:"mt-2 whitespace-pre-wrap text-gray-900 bg-gray-50 p-3 rounded-lg",children:e.ocrText})]}),v.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(Sw,{className:"h-5 w-5 text-gray-400"}),v.jsx("h3",{className:"text-lg font-semibold",children:"メモ"}),o&&v.jsx("button",{onClick:F,className:`p-1 rounded-full ${w?"bg-red-500 text-white":"bg-gray-200"}`,children:w?v.jsx(dP,{className:"h-4 w-4"}):v.jsx(fP,{className:"h-4 w-4"})})]}),o?v.jsx("textarea",{value:c,onChange:H=>f(H.target.value),className:"mt-2 w-full h-24 p-3 border border-gray-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"メモを追加..."}):v.jsx("div",{className:"mt-2 whitespace-pre-wrap text-gray-900 bg-gray-50 p-3 rounded-lg min-h-[5rem]",children:e.memo||v.jsx("span",{className:"text-gray-400",children:"メモはありません"})})]}),(p||o)&&v.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-6",children:[v.jsxs("div",{className:"flex items-center gap-2 justify-between",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(Yp,{className:"h-5 w-5 text-gray-400"}),v.jsx("h3",{className:"text-lg font-semibold",children:"位置情報"})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[p&&!o&&v.jsxs("button",{onClick:G,className:"text-sm bg-green-500 text-white py-1 px-3 rounded-full hover:bg-green-600 transition-colors flex items-center gap-1",children:[v.jsx(hP,{className:"h-4 w-4"}),"ここへ行く"]}),o&&v.jsx("button",{onClick:()=>S(!0),className:"text-sm bg-blue-500 text-white py-1 px-3 rounded-full hover:bg-blue-600 transition-colors",children:p?"編集":"追加"})]})]}),p?v.jsxs("div",{className:"mt-4",children:[p.name&&v.jsx("p",{className:"font-bold text-gray-800",children:p.name}),v.jsxs("p",{className:"text-sm text-gray-500",children:["緯度: ",p.lat.toFixed(6),", 経度: ",p.lon.toFixed(6)]}),v.jsx("div",{className:"mt-2 h-48 rounded-lg overflow-hidden",children:v.jsx(nm,{items:[{...e,metadata:{...e.metadata,location:p}}],groups:[]})})]}):o&&v.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"このアイテムには位置情報がありません。"})]})]})]}),x&&v.jsx(BD,{initialLocation:p,onClose:()=>S(!1),onSave:z}),C&&p&&v.jsx(HD,{destination:p,onClose:()=>D(!1)})]})};function Wh(e,t){return Wh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Wh(e,t)}function Wx(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Wh(e,t)}function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ge.apply(null,arguments)}function Cs(e){"@babel/helpers - typeof";return Cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cs(e)}function VD(e,t){if(Cs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Cs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KD(e){var t=VD(e,"string");return Cs(t)=="symbol"?t:t+""}function qD(e,t,n){return(t=KD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function dy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cy(Object(n),!0).forEach(function(r){qD(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qt(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var fy=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),hy=function(){return Math.random().toString(36).substring(7).split("").join(".")},py={INIT:"@@redux/INIT"+hy(),REPLACE:"@@redux/REPLACE"+hy()};function YD(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Vx(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(qt(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(qt(1));return n(Vx)(e,t)}if(typeof e!="function")throw new Error(qt(2));var o=e,a=t,l=[],u=l,c=!1;function f(){u===l&&(u=l.slice())}function h(){if(c)throw new Error(qt(3));return a}function g(E){if(typeof E!="function")throw new Error(qt(4));if(c)throw new Error(qt(5));var N=!0;return f(),u.push(E),function(){if(N){if(c)throw new Error(qt(6));N=!1,f();var x=u.indexOf(E);u.splice(x,1),l=null}}}function p(E){if(!YD(E))throw new Error(qt(7));if(typeof E.type>"u")throw new Error(qt(8));if(c)throw new Error(qt(9));try{c=!0,a=o(a,E)}finally{c=!1}for(var N=l=u,b=0;b<N.length;b++){var x=N[b];x()}return E}function y(E){if(typeof E!="function")throw new Error(qt(10));o=E,p({type:py.REPLACE})}function w(){var E,N=g;return E={subscribe:function(x){if(typeof x!="object"||x===null)throw new Error(qt(11));function S(){x.next&&x.next(h())}S();var C=N(S);return{unsubscribe:C}}},E[fy]=function(){return this},E}return p({type:py.INIT}),r={dispatch:p,subscribe:g,getState:h,replaceReducer:y},r[fy]=w,r}function my(e,t){return function(){return t(e.apply(this,arguments))}}function gy(e,t){if(typeof e=="function")return my(e,t);if(typeof e!="object"||e===null)throw new Error(qt(16));var n={};for(var r in e){var o=e[r];typeof o=="function"&&(n[r]=my(o,t))}return n}function Kx(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,o){return function(){return r(o.apply(void 0,arguments))}})}function QD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var o=r.apply(void 0,arguments),a=function(){throw new Error(qt(15))},l={getState:o.getState,dispatch:function(){return a.apply(void 0,arguments)}},u=t.map(function(c){return c(l)});return a=Kx.apply(void 0,u)(o.dispatch),dy(dy({},o),{},{dispatch:a})}}}var qx=Se.createContext(null);function JD(e){e()}var Yx=JD,XD=function(t){return Yx=t},eL=function(){return Yx};function tL(){var e=eL(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e(function(){for(var o=t;o;)o.callback(),o=o.next})},get:function(){for(var o=[],a=t;a;)o.push(a),a=a.next;return o},subscribe:function(o){var a=!0,l=n={callback:o,next:null,prev:n};return l.prev?l.prev.next=l:t=l,function(){!a||t===null||(a=!1,l.next?l.next.prev=l.prev:n=l.prev,l.prev?l.prev.next=l.next:t=l.next)}}}}var vy={notify:function(){},get:function(){return[]}};function Qx(e,t){var n,r=vy;function o(g){return c(),r.subscribe(g)}function a(){r.notify()}function l(){h.onStateChange&&h.onStateChange()}function u(){return!!n}function c(){n||(n=t?t.addNestedSub(l):e.subscribe(l),r=tL())}function f(){n&&(n(),n=void 0,r.clear(),r=vy)}var h={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:u,trySubscribe:c,tryUnsubscribe:f,getListeners:function(){return r}};return h}var Jx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?j.useLayoutEffect:j.useEffect;function nL(e){var t=e.store,n=e.context,r=e.children,o=j.useMemo(function(){var u=Qx(t);return{store:t,subscription:u}},[t]),a=j.useMemo(function(){return t.getState()},[t]);Jx(function(){var u=o.subscription;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),a!==t.getState()&&u.notifyNestedSubs(),function(){u.tryUnsubscribe(),u.onStateChange=null}},[o,a]);var l=n||qx;return Se.createElement(l.Provider,{value:o},r)}function Vu(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Xx={exports:{}},Ue={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xt=typeof Symbol=="function"&&Symbol.for,ym=xt?Symbol.for("react.element"):60103,_m=xt?Symbol.for("react.portal"):60106,kc=xt?Symbol.for("react.fragment"):60107,Ic=xt?Symbol.for("react.strict_mode"):60108,Tc=xt?Symbol.for("react.profiler"):60114,Dc=xt?Symbol.for("react.provider"):60109,Lc=xt?Symbol.for("react.context"):60110,wm=xt?Symbol.for("react.async_mode"):60111,Ac=xt?Symbol.for("react.concurrent_mode"):60111,Mc=xt?Symbol.for("react.forward_ref"):60112,Rc=xt?Symbol.for("react.suspense"):60113,rL=xt?Symbol.for("react.suspense_list"):60120,Oc=xt?Symbol.for("react.memo"):60115,Bc=xt?Symbol.for("react.lazy"):60116,iL=xt?Symbol.for("react.block"):60121,oL=xt?Symbol.for("react.fundamental"):60117,aL=xt?Symbol.for("react.responder"):60118,sL=xt?Symbol.for("react.scope"):60119;function gn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case ym:switch(e=e.type,e){case wm:case Ac:case kc:case Tc:case Ic:case Rc:return e;default:switch(e=e&&e.$$typeof,e){case Lc:case Mc:case Bc:case Oc:case Dc:return e;default:return t}}case _m:return t}}}function eb(e){return gn(e)===Ac}Ue.AsyncMode=wm;Ue.ConcurrentMode=Ac;Ue.ContextConsumer=Lc;Ue.ContextProvider=Dc;Ue.Element=ym;Ue.ForwardRef=Mc;Ue.Fragment=kc;Ue.Lazy=Bc;Ue.Memo=Oc;Ue.Portal=_m;Ue.Profiler=Tc;Ue.StrictMode=Ic;Ue.Suspense=Rc;Ue.isAsyncMode=function(e){return eb(e)||gn(e)===wm};Ue.isConcurrentMode=eb;Ue.isContextConsumer=function(e){return gn(e)===Lc};Ue.isContextProvider=function(e){return gn(e)===Dc};Ue.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===ym};Ue.isForwardRef=function(e){return gn(e)===Mc};Ue.isFragment=function(e){return gn(e)===kc};Ue.isLazy=function(e){return gn(e)===Bc};Ue.isMemo=function(e){return gn(e)===Oc};Ue.isPortal=function(e){return gn(e)===_m};Ue.isProfiler=function(e){return gn(e)===Tc};Ue.isStrictMode=function(e){return gn(e)===Ic};Ue.isSuspense=function(e){return gn(e)===Rc};Ue.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===kc||e===Ac||e===Tc||e===Ic||e===Rc||e===rL||typeof e=="object"&&e!==null&&(e.$$typeof===Bc||e.$$typeof===Oc||e.$$typeof===Dc||e.$$typeof===Lc||e.$$typeof===Mc||e.$$typeof===oL||e.$$typeof===aL||e.$$typeof===sL||e.$$typeof===iL)};Ue.typeOf=gn;Xx.exports=Ue;var lL=Xx.exports,xm=lL,uL={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},cL={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},dL={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},tb={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},bm={};bm[xm.ForwardRef]=dL;bm[xm.Memo]=tb;function yy(e){return xm.isMemo(e)?tb:bm[e.$$typeof]||uL}var fL=Object.defineProperty,hL=Object.getOwnPropertyNames,_y=Object.getOwnPropertySymbols,pL=Object.getOwnPropertyDescriptor,mL=Object.getPrototypeOf,wy=Object.prototype;function nb(e,t,n){if(typeof t!="string"){if(wy){var r=mL(t);r&&r!==wy&&nb(e,r,n)}var o=hL(t);_y&&(o=o.concat(_y(t)));for(var a=yy(e),l=yy(t),u=0;u<o.length;++u){var c=o[u];if(!cL[c]&&!(n&&n[c])&&!(l&&l[c])&&!(a&&a[c])){var f=pL(t,c);try{fL(e,c,f)}catch{}}}}return e}var gL=nb;const xy=Uo(gL);var rb={exports:{}},He={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jc=60103,zc=60106,$s=60107,Hs=60108,Zs=60114,Gs=60109,Ws=60110,Vs=60112,Ks=60113,Sm=60120,qs=60115,Ys=60116,ib=60121,ob=60122,ab=60117,sb=60129,lb=60131;if(typeof Symbol=="function"&&Symbol.for){var Et=Symbol.for;jc=Et("react.element"),zc=Et("react.portal"),$s=Et("react.fragment"),Hs=Et("react.strict_mode"),Zs=Et("react.profiler"),Gs=Et("react.provider"),Ws=Et("react.context"),Vs=Et("react.forward_ref"),Ks=Et("react.suspense"),Sm=Et("react.suspense_list"),qs=Et("react.memo"),Ys=Et("react.lazy"),ib=Et("react.block"),ob=Et("react.server.block"),ab=Et("react.fundamental"),sb=Et("react.debug_trace_mode"),lb=Et("react.legacy_hidden")}function $n(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case jc:switch(e=e.type,e){case $s:case Zs:case Hs:case Ks:case Sm:return e;default:switch(e=e&&e.$$typeof,e){case Ws:case Vs:case Ys:case qs:case Gs:return e;default:return t}}case zc:return t}}}var vL=Gs,yL=jc,_L=Vs,wL=$s,xL=Ys,bL=qs,SL=zc,CL=Zs,EL=Hs,PL=Ks;He.ContextConsumer=Ws;He.ContextProvider=vL;He.Element=yL;He.ForwardRef=_L;He.Fragment=wL;He.Lazy=xL;He.Memo=bL;He.Portal=SL;He.Profiler=CL;He.StrictMode=EL;He.Suspense=PL;He.isAsyncMode=function(){return!1};He.isConcurrentMode=function(){return!1};He.isContextConsumer=function(e){return $n(e)===Ws};He.isContextProvider=function(e){return $n(e)===Gs};He.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===jc};He.isForwardRef=function(e){return $n(e)===Vs};He.isFragment=function(e){return $n(e)===$s};He.isLazy=function(e){return $n(e)===Ys};He.isMemo=function(e){return $n(e)===qs};He.isPortal=function(e){return $n(e)===zc};He.isProfiler=function(e){return $n(e)===Zs};He.isStrictMode=function(e){return $n(e)===Hs};He.isSuspense=function(e){return $n(e)===Ks};He.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===$s||e===Zs||e===sb||e===Hs||e===Ks||e===Sm||e===lb||typeof e=="object"&&e!==null&&(e.$$typeof===Ys||e.$$typeof===qs||e.$$typeof===Gs||e.$$typeof===Ws||e.$$typeof===Vs||e.$$typeof===ab||e.$$typeof===ib||e[0]===ob)};He.typeOf=$n;rb.exports=He;var NL=rb.exports,kL=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],IL=["reactReduxForwardedRef"],TL=[],DL=[null,null];function LL(e,t){var n=e[1];return[t.payload,n+1]}function by(e,t,n){Jx(function(){return e.apply(void 0,t)},n)}function AL(e,t,n,r,o,a,l){e.current=r,t.current=o,n.current=!1,a.current&&(a.current=null,l())}function ML(e,t,n,r,o,a,l,u,c,f){if(e){var h=!1,g=null,p=function(){if(!h){var E=t.getState(),N,b;try{N=r(E,o.current)}catch(x){b=x,g=x}b||(g=null),N===a.current?l.current||c():(a.current=N,u.current=N,l.current=!0,f({type:"STORE_UPDATED",payload:{error:b}}))}};n.onStateChange=p,n.trySubscribe(),p();var y=function(){if(h=!0,n.tryUnsubscribe(),n.onStateChange=null,g)throw g};return y}}var RL=function(){return[null,0]};function OL(e,t){t===void 0&&(t={});var n=t,r=n.getDisplayName,o=r===void 0?function(S){return"ConnectAdvanced("+S+")"}:r,a=n.methodName,l=a===void 0?"connectAdvanced":a,u=n.renderCountProp,c=u===void 0?void 0:u,f=n.shouldHandleStateChanges,h=f===void 0?!0:f,g=n.storeKey,p=g===void 0?"store":g;n.withRef;var y=n.forwardRef,w=y===void 0?!1:y,E=n.context,N=E===void 0?qx:E,b=Vu(n,kL),x=N;return function(C){var D=C.displayName||C.name||"Component",A=o(D),M=ge({},b,{getDisplayName:o,methodName:l,renderCountProp:c,shouldHandleStateChanges:h,storeKey:p,displayName:A,wrappedComponentName:D,WrappedComponent:C}),U=b.pure;function I(q){return e(q.dispatch,M)}var T=U?j.useMemo:function(q){return q()};function R(q){var J=j.useMemo(function(){var be=q.reactReduxForwardedRef,Ke=Vu(q,IL);return[q.context,be,Ke]},[q]),Y=J[0],te=J[1],B=J[2],F=j.useMemo(function(){return Y&&Y.Consumer&&NL.isContextConsumer(Se.createElement(Y.Consumer,null))?Y:x},[Y,x]),k=j.useContext(F),z=!!q.store&&!!q.store.getState&&!!q.store.dispatch;k&&k.store;var G=z?q.store:k.store,H=j.useMemo(function(){return I(G)},[G]),K=j.useMemo(function(){if(!h)return DL;var be=Qx(G,z?null:k.subscription),Ke=be.notifyNestedSubs.bind(be);return[be,Ke]},[G,z,k]),ne=K[0],Q=K[1],ce=j.useMemo(function(){return z?k:ge({},k,{subscription:ne})},[z,k,ne]),ve=j.useReducer(LL,TL,RL),$e=ve[0],Oe=$e[0],tt=ve[1];if(Oe&&Oe.error)throw Oe.error;var nt=j.useRef(),bt=j.useRef(B),lt=j.useRef(),re=j.useRef(!1),de=T(function(){return lt.current&&B===bt.current?lt.current:H(G.getState(),B)},[G,Oe,B]);by(AL,[bt,nt,re,B,de,lt,Q]),by(ML,[h,G,ne,H,bt,nt,re,lt,Q,tt],[G,ne,H]);var me=j.useMemo(function(){return Se.createElement(C,ge({},de,{ref:te}))},[te,C,de]),xe=j.useMemo(function(){return h?Se.createElement(F.Provider,{value:ce},me):me},[F,me,ce]);return xe}var V=U?Se.memo(R):R;if(V.WrappedComponent=C,V.displayName=R.displayName=A,w){var Z=Se.forwardRef(function(J,Y){return Se.createElement(V,ge({},J,{reactReduxForwardedRef:Y}))});return Z.displayName=A,Z.WrappedComponent=C,xy(Z,C)}return xy(V,C)}}function Sy(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function xf(e,t){if(Sy(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!Sy(e[n[o]],t[n[o]]))return!1;return!0}function BL(e,t){var n={},r=function(l){var u=e[l];typeof u=="function"&&(n[l]=function(){return t(u.apply(void 0,arguments))})};for(var o in e)r(o);return n}function Cm(e){return function(n,r){var o=e(n,r);function a(){return o}return a.dependsOnOwnProps=!1,a}}function Cy(e){return e.dependsOnOwnProps!==null&&e.dependsOnOwnProps!==void 0?!!e.dependsOnOwnProps:e.length!==1}function ub(e,t){return function(r,o){o.displayName;var a=function(u,c){return a.dependsOnOwnProps?a.mapToProps(u,c):a.mapToProps(u)};return a.dependsOnOwnProps=!0,a.mapToProps=function(u,c){a.mapToProps=e,a.dependsOnOwnProps=Cy(e);var f=a(u,c);return typeof f=="function"&&(a.mapToProps=f,a.dependsOnOwnProps=Cy(f),f=a(u,c)),f},a}}function jL(e){return typeof e=="function"?ub(e):void 0}function zL(e){return e?void 0:Cm(function(t){return{dispatch:t}})}function FL(e){return e&&typeof e=="object"?Cm(function(t){return BL(e,t)}):void 0}const UL=[jL,zL,FL];function $L(e){return typeof e=="function"?ub(e):void 0}function HL(e){return e?void 0:Cm(function(){return{}})}const ZL=[$L,HL];function GL(e,t,n){return ge({},n,e,t)}function WL(e){return function(n,r){r.displayName;var o=r.pure,a=r.areMergedPropsEqual,l=!1,u;return function(f,h,g){var p=e(f,h,g);return l?(!o||!a(p,u))&&(u=p):(l=!0,u=p),u}}}function VL(e){return typeof e=="function"?WL(e):void 0}function KL(e){return e?void 0:function(){return GL}}const qL=[VL,KL];var YL=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function QL(e,t,n,r){return function(a,l){return n(e(a,l),t(r,l),l)}}function JL(e,t,n,r,o){var a=o.areStatesEqual,l=o.areOwnPropsEqual,u=o.areStatePropsEqual,c=!1,f,h,g,p,y;function w(S,C){return f=S,h=C,g=e(f,h),p=t(r,h),y=n(g,p,h),c=!0,y}function E(){return g=e(f,h),t.dependsOnOwnProps&&(p=t(r,h)),y=n(g,p,h),y}function N(){return e.dependsOnOwnProps&&(g=e(f,h)),t.dependsOnOwnProps&&(p=t(r,h)),y=n(g,p,h),y}function b(){var S=e(f,h),C=!u(S,g);return g=S,C&&(y=n(g,p,h)),y}function x(S,C){var D=!l(C,h),A=!a(S,f,C,h);return f=S,h=C,D&&A?E():D?N():A?b():y}return function(C,D){return c?x(C,D):w(C,D)}}function XL(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,o=t.initMergeProps,a=Vu(t,YL),l=n(e,a),u=r(e,a),c=o(e,a),f=a.pure?JL:QL;return f(l,u,c,e,a)}var eA=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function bf(e,t,n){for(var r=t.length-1;r>=0;r--){var o=t[r](e);if(o)return o}return function(a,l){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+l.wrappedComponentName+".")}}function tA(e,t){return e===t}function nA(e){var t=e===void 0?{}:e,n=t.connectHOC,r=n===void 0?OL:n,o=t.mapStateToPropsFactories,a=o===void 0?ZL:o,l=t.mapDispatchToPropsFactories,u=l===void 0?UL:l,c=t.mergePropsFactories,f=c===void 0?qL:c,h=t.selectorFactory,g=h===void 0?XL:h;return function(y,w,E,N){N===void 0&&(N={});var b=N,x=b.pure,S=x===void 0?!0:x,C=b.areStatesEqual,D=C===void 0?tA:C,A=b.areOwnPropsEqual,M=A===void 0?xf:A,U=b.areStatePropsEqual,I=U===void 0?xf:U,T=b.areMergedPropsEqual,R=T===void 0?xf:T,V=Vu(b,eA),Z=bf(y,a,"mapStateToProps"),q=bf(w,u,"mapDispatchToProps"),J=bf(E,f,"mergeProps");return r(g,ge({methodName:"connect",getDisplayName:function(te){return"Connect("+te+")"},shouldHandleStateChanges:!!y,initMapStateToProps:Z,initMapDispatchToProps:q,initMergeProps:J,pure:S,areStatesEqual:D,areOwnPropsEqual:M,areStatePropsEqual:I,areMergedPropsEqual:R},V))}}const cb=nA();XD(Vp.unstable_batchedUpdates);function rA(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function db(e,t){var n=j.useState(function(){return{inputs:t,result:e()}})[0],r=j.useRef(!0),o=j.useRef(n),a=r.current||!!(t&&o.current.inputs&&rA(t,o.current.inputs)),l=a?o.current:{inputs:t,result:e()};return j.useEffect(function(){r.current=!1,o.current=l},[l]),l.result}function iA(e,t){return db(function(){return e},t)}var Me=db,pe=iA,oA="Invariant failed";function aA(e,t){throw new Error(oA)}var jn=function(t){var n=t.top,r=t.right,o=t.bottom,a=t.left,l=r-a,u=o-n,c={top:n,right:r,bottom:o,left:a,width:l,height:u,x:a,y:n,center:{x:(r+a)/2,y:(o+n)/2}};return c},Em=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},Ey=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},sA=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},Sf={top:0,right:0,bottom:0,left:0},Pm=function(t){var n=t.borderBox,r=t.margin,o=r===void 0?Sf:r,a=t.border,l=a===void 0?Sf:a,u=t.padding,c=u===void 0?Sf:u,f=jn(Em(n,o)),h=jn(Ey(n,l)),g=jn(Ey(h,c));return{marginBox:f,borderBox:jn(n),paddingBox:h,contentBox:g,margin:o,border:l,padding:c}},wn=function(t){var n=t.slice(0,-2),r=t.slice(-2);if(r!=="px")return 0;var o=Number(n);return isNaN(o)&&aA(),o},lA=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Ku=function(t,n){var r=t.borderBox,o=t.border,a=t.margin,l=t.padding,u=sA(r,n);return Pm({borderBox:u,border:o,margin:a,padding:l})},qu=function(t,n){return n===void 0&&(n=lA()),Ku(t,n)},fb=function(t,n){var r={top:wn(n.marginTop),right:wn(n.marginRight),bottom:wn(n.marginBottom),left:wn(n.marginLeft)},o={top:wn(n.paddingTop),right:wn(n.paddingRight),bottom:wn(n.paddingBottom),left:wn(n.paddingLeft)},a={top:wn(n.borderTopWidth),right:wn(n.borderRightWidth),bottom:wn(n.borderBottomWidth),left:wn(n.borderLeftWidth)};return Pm({borderBox:t,margin:r,padding:o,border:a})},hb=function(t){var n=t.getBoundingClientRect(),r=window.getComputedStyle(t);return fb(n,r)},Py=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function uA(e,t){return!!(e===t||Py(e)&&Py(t))}function cA(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!uA(e[n],t[n]))return!1;return!0}function _t(e,t){t===void 0&&(t=cA);var n,r=[],o,a=!1;function l(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];return a&&n===this&&t(u,r)||(o=e.apply(this,u),a=!0,n=this,r=u),o}return l}var Es=function(t){var n=[],r=null,o=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];n=u,!r&&(r=requestAnimationFrame(function(){r=null,t.apply(void 0,n)}))};return o.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},o};function pb(e,t){}pb.bind(null,"warn");pb.bind(null,"error");function qr(){}function dA(e,t){return ge({},e,{},t)}function En(e,t,n){var r=t.map(function(o){var a=dA(n,o.options);return e.addEventListener(o.eventName,o.fn,a),function(){e.removeEventListener(o.eventName,o.fn,a)}});return function(){r.forEach(function(a){a()})}}var fA="Invariant failed";function Yu(e){this.message=e}Yu.prototype.toString=function(){return this.message};function ae(e,t){throw new Yu(fA)}var hA=function(e){Wx(t,e);function t(){for(var r,o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return r=e.call.apply(e,[this].concat(a))||this,r.callbacks=null,r.unbind=qr,r.onWindowError=function(u){var c=r.getCallbacks();c.isDragging()&&c.tryAbort();var f=u.error;f instanceof Yu&&u.preventDefault()},r.getCallbacks=function(){if(!r.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return r.callbacks},r.setCallbacks=function(u){r.callbacks=u},r}var n=t.prototype;return n.componentDidMount=function(){this.unbind=En(window,[{eventName:"error",fn:this.onWindowError}])},n.componentDidCatch=function(o){if(o instanceof Yu){this.setState({});return}throw o},n.componentWillUnmount=function(){this.unbind()},n.render=function(){return this.props.children(this.setCallbacks)},t}(Se.Component),pA=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Qu=function(t){return t+1},mA=function(t){return`
  You have lifted an item in position `+Qu(t.source.index)+`
`},mb=function(t,n){var r=t.droppableId===n.droppableId,o=Qu(t.index),a=Qu(n.index);return r?`
      You have moved the item from position `+o+`
      to position `+a+`
    `:`
    You have moved the item from position `+o+`
    in list `+t.droppableId+`
    to list `+n.droppableId+`
    in position `+a+`
  `},gb=function(t,n,r){var o=n.droppableId===r.droppableId;return o?`
      The item `+t+`
      has been combined with `+r.draggableId:`
      The item `+t+`
      in list `+n.droppableId+`
      has been combined with `+r.draggableId+`
      in list `+r.droppableId+`
    `},gA=function(t){var n=t.destination;if(n)return mb(t.source,n);var r=t.combine;return r?gb(t.draggableId,t.source,r):"You are over an area that cannot be dropped on"},Ny=function(t){return`
  The item has returned to its starting position
  of `+Qu(t.index)+`
`},vA=function(t){if(t.reason==="CANCEL")return`
      Movement cancelled.
      `+Ny(t.source)+`
    `;var n=t.destination,r=t.combine;return n?`
      You have dropped the item.
      `+mb(t.source,n)+`
    `:r?`
      You have dropped the item.
      `+gb(t.draggableId,t.source,r)+`
    `:`
    The item has been dropped while not over a drop area.
    `+Ny(t.source)+`
  `},hu={dragHandleUsageInstructions:pA,onDragStart:mA,onDragUpdate:gA,onDragEnd:vA},wt={x:0,y:0},It=function(t,n){return{x:t.x+n.x,y:t.y+n.y}},ln=function(t,n){return{x:t.x-n.x,y:t.y-n.y}},Yr=function(t,n){return t.x===n.x&&t.y===n.y},qo=function(t){return{x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}},ji=function(t,n,r){var o;return r===void 0&&(r=0),o={},o[t]=n,o[t==="x"?"y":"x"]=r,o},Ps=function(t,n){return Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))},ky=function(t,n){return Math.min.apply(Math,n.map(function(r){return Ps(t,r)}))},vb=function(t){return function(n){return{x:t(n.x),y:t(n.y)}}},yA=function(e,t){var n=jn({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n},Qs=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},Iy=function(t){return[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}]},_A={top:0,right:0,bottom:0,left:0},wA=function(t,n){return n?Qs(t,n.scroll.diff.displacement):t},xA=function(t,n,r){if(r&&r.increasedBy){var o;return ge({},t,(o={},o[n.end]=t[n.end]+r.increasedBy[n.line],o))}return t},bA=function(t,n){return n&&n.shouldClipSubject?yA(n.pageMarginBox,t):jn(t)},jo=function(e){var t=e.page,n=e.withPlaceholder,r=e.axis,o=e.frame,a=wA(t.marginBox,o),l=xA(a,r,n),u=bA(l,o);return{page:t,withPlaceholder:n,active:u}},Nm=function(e,t){e.frame||ae();var n=e.frame,r=ln(t,n.scroll.initial),o=qo(r),a=ge({},n,{scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:o},max:n.scroll.max}}),l=jo({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a}),u=ge({},e,{frame:a,subject:l});return u};function Ju(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function km(e,t){if(e.findIndex)return e.findIndex(t);for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function ai(e,t){if(e.find)return e.find(t);var n=km(e,t);if(n!==-1)return e[n]}function yb(e){return Array.prototype.slice.call(e)}var _b=_t(function(e){return e.reduce(function(t,n){return t[n.descriptor.id]=n,t},{})}),wb=_t(function(e){return e.reduce(function(t,n){return t[n.descriptor.id]=n,t},{})}),Fc=_t(function(e){return Ju(e)}),SA=_t(function(e){return Ju(e)}),Yo=_t(function(e,t){var n=SA(t).filter(function(r){return e===r.descriptor.droppableId}).sort(function(r,o){return r.descriptor.index-o.descriptor.index});return n});function Im(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function Uc(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var $c=_t(function(e,t){return t.filter(function(n){return n.descriptor.id!==e.descriptor.id})}),CA=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,o=e.insideDestination,a=e.previousImpact;if(!r.isCombineEnabled)return null;var l=Im(a);if(!l)return null;function u(E){var N={type:"COMBINE",combine:{draggableId:E,droppableId:r.descriptor.id}};return ge({},a,{at:N})}var c=a.displaced.all,f=c.length?c[0]:null;if(t)return f?u(f):null;var h=$c(n,o);if(!f){if(!h.length)return null;var g=h[h.length-1];return u(g.descriptor.id)}var p=km(h,function(E){return E.descriptor.id===f});p===-1&&ae();var y=p-1;if(y<0)return null;var w=h[y];return u(w.descriptor.id)},Qo=function(e,t){return e.descriptor.droppableId===t.descriptor.id},xb={point:wt,value:0},Ns={invisible:{},visible:{},all:[]},EA={displaced:Ns,displacedBy:xb,at:null},Nn=function(e,t){return function(n){return e<=n&&n<=t}},bb=function(e){var t=Nn(e.top,e.bottom),n=Nn(e.left,e.right);return function(r){var o=t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right);if(o)return!0;var a=t(r.top)||t(r.bottom),l=n(r.left)||n(r.right),u=a&&l;if(u)return!0;var c=r.top<e.top&&r.bottom>e.bottom,f=r.left<e.left&&r.right>e.right,h=c&&f;if(h)return!0;var g=c&&l||f&&a;return g}},PA=function(e){var t=Nn(e.top,e.bottom),n=Nn(e.left,e.right);return function(r){var o=t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right);return o}},Tm={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},Sb={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},NA=function(e){return function(t){var n=Nn(t.top,t.bottom),r=Nn(t.left,t.right);return function(o){return e===Tm?n(o.top)&&n(o.bottom):r(o.left)&&r(o.right)}}},kA=function(t,n){var r=n.frame?n.frame.scroll.diff.displacement:wt;return Qs(t,r)},IA=function(t,n,r){return n.subject.active?r(n.subject.active)(t):!1},TA=function(t,n,r){return r(n)(t)},Dm=function(t){var n=t.target,r=t.destination,o=t.viewport,a=t.withDroppableDisplacement,l=t.isVisibleThroughFrameFn,u=a?kA(n,r):n;return IA(u,r,l)&&TA(u,o,l)},DA=function(t){return Dm(ge({},t,{isVisibleThroughFrameFn:bb}))},Cb=function(t){return Dm(ge({},t,{isVisibleThroughFrameFn:PA}))},LA=function(t){return Dm(ge({},t,{isVisibleThroughFrameFn:NA(t.destination.axis)}))},AA=function(t,n,r){if(typeof r=="boolean")return r;if(!n)return!0;var o=n.invisible,a=n.visible;if(o[t])return!1;var l=a[t];return l?l.shouldAnimate:!0};function MA(e,t){var n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return jn(Em(n,r))}function ks(e){var t=e.afterDragging,n=e.destination,r=e.displacedBy,o=e.viewport,a=e.forceShouldAnimate,l=e.last;return t.reduce(function(c,f){var h=MA(f,r),g=f.descriptor.id;c.all.push(g);var p=DA({target:h,destination:n,viewport:o,withDroppableDisplacement:!0});if(!p)return c.invisible[f.descriptor.id]=!0,c;var y=AA(g,l,a),w={draggableId:g,shouldAnimate:y};return c.visible[g]=w,c},{all:[],visible:{},invisible:{}})}function RA(e,t){if(!e.length)return 0;var n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function Ty(e){var t=e.insideDestination,n=e.inHomeList,r=e.displacedBy,o=e.destination,a=RA(t,{inHomeList:n});return{displaced:Ns,displacedBy:r,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:a}}}}function Xu(e){var t=e.draggable,n=e.insideDestination,r=e.destination,o=e.viewport,a=e.displacedBy,l=e.last,u=e.index,c=e.forceShouldAnimate,f=Qo(t,r);if(u==null)return Ty({insideDestination:n,inHomeList:f,displacedBy:a,destination:r});var h=ai(n,function(E){return E.descriptor.index===u});if(!h)return Ty({insideDestination:n,inHomeList:f,displacedBy:a,destination:r});var g=$c(t,n),p=n.indexOf(h),y=g.slice(p),w=ks({afterDragging:y,destination:r,displacedBy:a,last:l,viewport:o.frame,forceShouldAnimate:c});return{displaced:w,displacedBy:a,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:u}}}}function ti(e,t){return!!t.effected[e]}var OA=function(e){var t=e.isMovingForward,n=e.destination,r=e.draggables,o=e.combine,a=e.afterCritical;if(!n.isCombineEnabled)return null;var l=o.draggableId,u=r[l],c=u.descriptor.index,f=ti(l,a);return f?t?c:c-1:t?c+1:c},BA=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.insideDestination,o=e.location;if(!r.length)return null;var a=o.index,l=t?a+1:a-1,u=r[0].descriptor.index,c=r[r.length-1].descriptor.index,f=n?c:c+1;return l<u||l>f?null:l},jA=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.draggable,o=e.draggables,a=e.destination,l=e.insideDestination,u=e.previousImpact,c=e.viewport,f=e.afterCritical,h=u.at;if(h||ae(),h.type==="REORDER"){var g=BA({isMovingForward:t,isInHomeList:n,location:h.destination,insideDestination:l});return g==null?null:Xu({draggable:r,insideDestination:l,destination:a,viewport:c,last:u.displaced,displacedBy:u.displacedBy,index:g})}var p=OA({isMovingForward:t,destination:a,displaced:u.displaced,draggables:o,combine:h.combine,afterCritical:f});return p==null?null:Xu({draggable:r,insideDestination:l,destination:a,viewport:c,last:u.displaced,displacedBy:u.displacedBy,index:p})},zA=function(e){var t=e.displaced,n=e.afterCritical,r=e.combineWith,o=e.displacedBy,a=!!(t.visible[r]||t.invisible[r]);return ti(r,n)?a?wt:qo(o.point):a?o.point:wt},FA=function(e){var t=e.afterCritical,n=e.impact,r=e.draggables,o=Uc(n);o||ae();var a=o.draggableId,l=r[a].page.borderBox.center,u=zA({displaced:n.displaced,afterCritical:t,combineWith:a,displacedBy:n.displacedBy});return It(l,u)},Eb=function(t,n){return n.margin[t.start]+n.borderBox[t.size]/2},UA=function(t,n){return n.margin[t.end]+n.borderBox[t.size]/2},Lm=function(t,n,r){return n[t.crossAxisStart]+r.margin[t.crossAxisStart]+r.borderBox[t.crossAxisSize]/2},Dy=function(t){var n=t.axis,r=t.moveRelativeTo,o=t.isMoving;return ji(n.line,r.marginBox[n.end]+Eb(n,o),Lm(n,r.marginBox,o))},Ly=function(t){var n=t.axis,r=t.moveRelativeTo,o=t.isMoving;return ji(n.line,r.marginBox[n.start]-UA(n,o),Lm(n,r.marginBox,o))},$A=function(t){var n=t.axis,r=t.moveInto,o=t.isMoving;return ji(n.line,r.contentBox[n.start]+Eb(n,o),Lm(n,r.contentBox,o))},HA=function(e){var t=e.impact,n=e.draggable,r=e.draggables,o=e.droppable,a=e.afterCritical,l=Yo(o.descriptor.id,r),u=n.page,c=o.axis;if(!l.length)return $A({axis:c,moveInto:o.page,isMoving:u});var f=t.displaced,h=t.displacedBy,g=f.all[0];if(g){var p=r[g];if(ti(g,a))return Ly({axis:c,moveRelativeTo:p.page,isMoving:u});var y=Ku(p.page,h.point);return Ly({axis:c,moveRelativeTo:y,isMoving:u})}var w=l[l.length-1];if(w.descriptor.id===n.descriptor.id)return u.borderBox.center;if(ti(w.descriptor.id,a)){var E=Ku(w.page,qo(a.displacedBy.point));return Dy({axis:c,moveRelativeTo:E,isMoving:u})}return Dy({axis:c,moveRelativeTo:w.page,isMoving:u})},Vh=function(e,t){var n=e.frame;return n?It(t,n.scroll.diff.displacement):t},ZA=function(t){var n=t.impact,r=t.draggable,o=t.droppable,a=t.draggables,l=t.afterCritical,u=r.page.borderBox.center,c=n.at;return!o||!c?u:c.type==="REORDER"?HA({impact:n,draggable:r,draggables:a,droppable:o,afterCritical:l}):FA({impact:n,draggables:a,afterCritical:l})},Hc=function(e){var t=ZA(e),n=e.droppable,r=n?Vh(n,t):t;return r},Pb=function(e,t){var n=ln(t,e.scroll.initial),r=qo(n),o=jn({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),a={frame:o,scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}};return a};function Ay(e,t){return e.map(function(n){return t[n]})}function GA(e,t){for(var n=0;n<t.length;n++){var r=t[n].visible[e];if(r)return r}return null}var WA=function(e){var t=e.impact,n=e.viewport,r=e.destination,o=e.draggables,a=e.maxScrollChange,l=Pb(n,It(n.scroll.current,a)),u=r.frame?Nm(r,It(r.frame.scroll.current,a)):r,c=t.displaced,f=ks({afterDragging:Ay(c.all,o),destination:r,displacedBy:t.displacedBy,viewport:l.frame,last:c,forceShouldAnimate:!1}),h=ks({afterDragging:Ay(c.all,o),destination:u,displacedBy:t.displacedBy,viewport:n.frame,last:c,forceShouldAnimate:!1}),g={},p={},y=[c,f,h];c.all.forEach(function(E){var N=GA(E,y);if(N){p[E]=N;return}g[E]=!0});var w=ge({},t,{displaced:{all:c.all,invisible:g,visible:p}});return w},VA=function(e,t){return It(e.scroll.diff.displacement,t)},Am=function(e){var t=e.pageBorderBoxCenter,n=e.draggable,r=e.viewport,o=VA(r,t),a=ln(o,n.page.borderBox.center);return It(n.client.borderBox.center,a)},Nb=function(e){var t=e.draggable,n=e.destination,r=e.newPageBorderBoxCenter,o=e.viewport,a=e.withDroppableDisplacement,l=e.onlyOnMainAxis,u=l===void 0?!1:l,c=ln(r,t.page.borderBox.center),f=Qs(t.page.borderBox,c),h={target:f,destination:n,withDroppableDisplacement:a,viewport:o};return u?LA(h):Cb(h)},KA=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,o=e.draggables,a=e.previousImpact,l=e.viewport,u=e.previousPageBorderBoxCenter,c=e.previousClientSelection,f=e.afterCritical;if(!r.isEnabled)return null;var h=Yo(r.descriptor.id,o),g=Qo(n,r),p=CA({isMovingForward:t,draggable:n,destination:r,insideDestination:h,previousImpact:a})||jA({isMovingForward:t,isInHomeList:g,draggable:n,draggables:o,destination:r,insideDestination:h,previousImpact:a,viewport:l,afterCritical:f});if(!p)return null;var y=Hc({impact:p,draggable:n,droppable:r,draggables:o,afterCritical:f}),w=Nb({draggable:n,destination:r,newPageBorderBoxCenter:y,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(w){var E=Am({pageBorderBoxCenter:y,draggable:n,viewport:l});return{clientSelection:E,impact:p,scrollJumpRequest:null}}var N=ln(y,u),b=WA({impact:p,viewport:l,destination:r,draggables:o,maxScrollChange:N});return{clientSelection:c,impact:b,scrollJumpRequest:N}},Ft=function(t){var n=t.subject.active;return n||ae(),n},qA=function(e){var t=e.isMovingForward,n=e.pageBorderBoxCenter,r=e.source,o=e.droppables,a=e.viewport,l=r.subject.active;if(!l)return null;var u=r.axis,c=Nn(l[u.start],l[u.end]),f=Fc(o).filter(function(g){return g!==r}).filter(function(g){return g.isEnabled}).filter(function(g){return!!g.subject.active}).filter(function(g){return bb(a.frame)(Ft(g))}).filter(function(g){var p=Ft(g);return t?l[u.crossAxisEnd]<p[u.crossAxisEnd]:p[u.crossAxisStart]<l[u.crossAxisStart]}).filter(function(g){var p=Ft(g),y=Nn(p[u.start],p[u.end]);return c(p[u.start])||c(p[u.end])||y(l[u.start])||y(l[u.end])}).sort(function(g,p){var y=Ft(g)[u.crossAxisStart],w=Ft(p)[u.crossAxisStart];return t?y-w:w-y}).filter(function(g,p,y){return Ft(g)[u.crossAxisStart]===Ft(y[0])[u.crossAxisStart]});if(!f.length)return null;if(f.length===1)return f[0];var h=f.filter(function(g){var p=Nn(Ft(g)[u.start],Ft(g)[u.end]);return p(n[u.line])});return h.length===1?h[0]:h.length>1?h.sort(function(g,p){return Ft(g)[u.start]-Ft(p)[u.start]})[0]:f.sort(function(g,p){var y=ky(n,Iy(Ft(g))),w=ky(n,Iy(Ft(p)));return y!==w?y-w:Ft(g)[u.start]-Ft(p)[u.start]})[0]},My=function(t,n){var r=t.page.borderBox.center;return ti(t.descriptor.id,n)?ln(r,n.displacedBy.point):r},YA=function(t,n){var r=t.page.borderBox;return ti(t.descriptor.id,n)?Qs(r,qo(n.displacedBy.point)):r},QA=function(e){var t=e.pageBorderBoxCenter,n=e.viewport,r=e.destination,o=e.insideDestination,a=e.afterCritical,l=o.filter(function(u){return Cb({target:YA(u,a),destination:r,viewport:n.frame,withDroppableDisplacement:!0})}).sort(function(u,c){var f=Ps(t,Vh(r,My(u,a))),h=Ps(t,Vh(r,My(c,a)));return f<h?-1:h<f?1:u.descriptor.index-c.descriptor.index});return l[0]||null},Js=_t(function(t,n){var r=n[t.line];return{value:r,point:ji(t.line,r)}}),JA=function(t,n,r){var o=t.axis;if(t.descriptor.mode==="virtual")return ji(o.line,n[o.line]);var a=t.subject.page.contentBox[o.size],l=Yo(t.descriptor.id,r),u=l.reduce(function(h,g){return h+g.client.marginBox[o.size]},0),c=u+n[o.line],f=c-a;return f<=0?null:ji(o.line,f)},kb=function(t,n){return ge({},t,{scroll:ge({},t.scroll,{max:n})})},Ib=function(t,n,r){var o=t.frame;Qo(n,t)&&ae(),t.subject.withPlaceholder&&ae();var a=Js(t.axis,n.displaceBy).point,l=JA(t,a,r),u={placeholderSize:a,increasedBy:l,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!o){var c=jo({page:t.subject.page,withPlaceholder:u,axis:t.axis,frame:t.frame});return ge({},t,{subject:c})}var f=l?It(o.scroll.max,l):o.scroll.max,h=kb(o,f),g=jo({page:t.subject.page,withPlaceholder:u,axis:t.axis,frame:h});return ge({},t,{subject:g,frame:h})},XA=function(t){var n=t.subject.withPlaceholder;n||ae();var r=t.frame;if(!r){var o=jo({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return ge({},t,{subject:o})}var a=n.oldFrameMaxScroll;a||ae();var l=kb(r,a),u=jo({page:t.subject.page,axis:t.axis,frame:l,withPlaceholder:null});return ge({},t,{subject:u,frame:l})},e3=function(e){var t=e.previousPageBorderBoxCenter,n=e.moveRelativeTo,r=e.insideDestination,o=e.draggable,a=e.draggables,l=e.destination,u=e.viewport,c=e.afterCritical;if(!n){if(r.length)return null;var f={displaced:Ns,displacedBy:xb,at:{type:"REORDER",destination:{droppableId:l.descriptor.id,index:0}}},h=Hc({impact:f,draggable:o,droppable:l,draggables:a,afterCritical:c}),g=Qo(o,l)?l:Ib(l,o,a),p=Nb({draggable:o,destination:g,newPageBorderBoxCenter:h,viewport:u.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return p?f:null}var y=t[l.axis.line]<=n.page.borderBox.center[l.axis.line],w=function(){var N=n.descriptor.index;return n.descriptor.id===o.descriptor.id||y?N:N+1}(),E=Js(l.axis,o.displaceBy);return Xu({draggable:o,insideDestination:r,destination:l,viewport:u,displacedBy:E,last:Ns,index:w})},t3=function(e){var t=e.isMovingForward,n=e.previousPageBorderBoxCenter,r=e.draggable,o=e.isOver,a=e.draggables,l=e.droppables,u=e.viewport,c=e.afterCritical,f=qA({isMovingForward:t,pageBorderBoxCenter:n,source:o,droppables:l,viewport:u});if(!f)return null;var h=Yo(f.descriptor.id,a),g=QA({pageBorderBoxCenter:n,viewport:u,destination:f,insideDestination:h,afterCritical:c}),p=e3({previousPageBorderBoxCenter:n,destination:f,draggable:r,draggables:a,moveRelativeTo:g,insideDestination:h,viewport:u,afterCritical:c});if(!p)return null;var y=Hc({impact:p,draggable:r,droppable:f,draggables:a,afterCritical:c}),w=Am({pageBorderBoxCenter:y,draggable:r,viewport:u});return{clientSelection:w,impact:p,scrollJumpRequest:null}},cn=function(e){var t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null},n3=function(t,n){var r=cn(t);return r?n[r]:null},r3=function(e){var t=e.state,n=e.type,r=n3(t.impact,t.dimensions.droppables),o=!!r,a=t.dimensions.droppables[t.critical.droppable.id],l=r||a,u=l.axis.direction,c=u==="vertical"&&(n==="MOVE_UP"||n==="MOVE_DOWN")||u==="horizontal"&&(n==="MOVE_LEFT"||n==="MOVE_RIGHT");if(c&&!o)return null;var f=n==="MOVE_DOWN"||n==="MOVE_RIGHT",h=t.dimensions.draggables[t.critical.draggable.id],g=t.current.page.borderBoxCenter,p=t.dimensions,y=p.draggables,w=p.droppables;return c?KA({isMovingForward:f,previousPageBorderBoxCenter:g,draggable:h,destination:l,draggables:y,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):t3({isMovingForward:f,previousPageBorderBoxCenter:g,draggable:h,isOver:l,draggables:y,droppables:w,viewport:t.viewport,afterCritical:t.afterCritical})};function yi(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Tb(e){var t=Nn(e.top,e.bottom),n=Nn(e.left,e.right);return function(o){return t(o.y)&&n(o.x)}}function i3(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function o3(e){var t=e.pageBorderBox,n=e.draggable,r=e.candidates,o=n.page.borderBox.center,a=r.map(function(l){var u=l.axis,c=ji(l.axis.line,t.center[u.line],l.page.borderBox.center[u.crossAxisLine]);return{id:l.descriptor.id,distance:Ps(o,c)}}).sort(function(l,u){return u.distance-l.distance});return a[0]?a[0].id:null}function a3(e){var t=e.pageBorderBox,n=e.draggable,r=e.droppables,o=Fc(r).filter(function(a){if(!a.isEnabled)return!1;var l=a.subject.active;if(!l||!i3(t,l))return!1;if(Tb(l)(t.center))return!0;var u=a.axis,c=l.center[u.crossAxisLine],f=t[u.crossAxisStart],h=t[u.crossAxisEnd],g=Nn(l[u.crossAxisStart],l[u.crossAxisEnd]),p=g(f),y=g(h);return!p&&!y?!0:p?f<c:h>c});return o.length?o.length===1?o[0].descriptor.id:o3({pageBorderBox:t,draggable:n,candidates:o}):null}var Db=function(t,n){return jn(Qs(t,n))},s3=function(e,t){var n=e.frame;return n?Db(t,n.scroll.diff.value):t};function Lb(e){var t=e.displaced,n=e.id;return!!(t.visible[n]||t.invisible[n])}function l3(e){var t=e.draggable,n=e.closest,r=e.inHomeList;return n?r&&n.descriptor.index>t.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}var u3=function(e){var t=e.pageBorderBoxWithDroppableScroll,n=e.draggable,r=e.destination,o=e.insideDestination,a=e.last,l=e.viewport,u=e.afterCritical,c=r.axis,f=Js(r.axis,n.displaceBy),h=f.value,g=t[c.start],p=t[c.end],y=$c(n,o),w=ai(y,function(N){var b=N.descriptor.id,x=N.page.borderBox.center[c.line],S=ti(b,u),C=Lb({displaced:a,id:b});return S?C?p<=x:g<x-h:C?p<=x+h:g<x}),E=l3({draggable:n,closest:w,inHomeList:Qo(n,r)});return Xu({draggable:n,insideDestination:o,destination:r,viewport:l,last:a,displacedBy:f,index:E})},c3=4,d3=function(e){var t=e.draggable,n=e.pageBorderBoxWithDroppableScroll,r=e.previousImpact,o=e.destination,a=e.insideDestination,l=e.afterCritical;if(!o.isCombineEnabled)return null;var u=o.axis,c=Js(o.axis,t.displaceBy),f=c.value,h=n[u.start],g=n[u.end],p=$c(t,a),y=ai(p,function(E){var N=E.descriptor.id,b=E.page.borderBox,x=b[u.size],S=x/c3,C=ti(N,l),D=Lb({displaced:r.displaced,id:N});return C?D?g>b[u.start]+S&&g<b[u.end]-S:h>b[u.start]-f+S&&h<b[u.end]-f-S:D?g>b[u.start]+f+S&&g<b[u.end]+f-S:h>b[u.start]+S&&h<b[u.end]-S});if(!y)return null;var w={displacedBy:c,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:y.descriptor.id,droppableId:o.descriptor.id}}};return w},Ab=function(e){var t=e.pageOffset,n=e.draggable,r=e.draggables,o=e.droppables,a=e.previousImpact,l=e.viewport,u=e.afterCritical,c=Db(n.page.borderBox,t),f=a3({pageBorderBox:c,draggable:n,droppables:o});if(!f)return EA;var h=o[f],g=Yo(h.descriptor.id,r),p=s3(h,c);return d3({pageBorderBoxWithDroppableScroll:p,draggable:n,previousImpact:a,destination:h,insideDestination:g,afterCritical:u})||u3({pageBorderBoxWithDroppableScroll:p,draggable:n,destination:h,insideDestination:g,last:a.displaced,viewport:l,afterCritical:u})},Mm=function(e,t){var n;return ge({},e,(n={},n[t.descriptor.id]=t,n))},f3=function(t){var n=t.previousImpact,r=t.impact,o=t.droppables,a=cn(n),l=cn(r);if(!a||a===l)return o;var u=o[a];if(!u.subject.withPlaceholder)return o;var c=XA(u);return Mm(o,c)},h3=function(e){var t=e.draggable,n=e.draggables,r=e.droppables,o=e.previousImpact,a=e.impact,l=f3({previousImpact:o,impact:a,droppables:r}),u=cn(a);if(!u)return l;var c=r[u];if(Qo(t,c)||c.subject.withPlaceholder)return l;var f=Ib(c,t,n);return Mm(l,f)},Ga=function(e){var t=e.state,n=e.clientSelection,r=e.dimensions,o=e.viewport,a=e.impact,l=e.scrollJumpRequest,u=o||t.viewport,c=r||t.dimensions,f=n||t.current.client.selection,h=ln(f,t.initial.client.selection),g={offset:h,selection:f,borderBoxCenter:It(t.initial.client.borderBoxCenter,h)},p={selection:It(g.selection,u.scroll.current),borderBoxCenter:It(g.borderBoxCenter,u.scroll.current),offset:It(g.offset,u.scroll.diff.value)},y={client:g,page:p};if(t.phase==="COLLECTING")return ge({phase:"COLLECTING"},t,{dimensions:c,viewport:u,current:y});var w=c.draggables[t.critical.draggable.id],E=a||Ab({pageOffset:p.offset,draggable:w,draggables:c.draggables,droppables:c.droppables,previousImpact:t.impact,viewport:u,afterCritical:t.afterCritical}),N=h3({draggable:w,impact:E,previousImpact:t.impact,draggables:c.draggables,droppables:c.droppables}),b=ge({},t,{current:y,dimensions:{draggables:c.draggables,droppables:N},impact:E,viewport:u,scrollJumpRequest:l||null,forceShouldAnimate:l?!1:null});return b};function p3(e,t){return e.map(function(n){return t[n]})}var Mb=function(e){var t=e.impact,n=e.viewport,r=e.draggables,o=e.destination,a=e.forceShouldAnimate,l=t.displaced,u=p3(l.all,r),c=ks({afterDragging:u,destination:o,displacedBy:t.displacedBy,viewport:n.frame,forceShouldAnimate:a,last:l});return ge({},t,{displaced:c})},Rb=function(e){var t=e.impact,n=e.draggable,r=e.droppable,o=e.draggables,a=e.viewport,l=e.afterCritical,u=Hc({impact:t,draggable:n,draggables:o,droppable:r,afterCritical:l});return Am({pageBorderBoxCenter:u,draggable:n,viewport:a})},Ob=function(e){var t=e.state,n=e.dimensions,r=e.viewport;t.movementMode!=="SNAP"&&ae();var o=t.impact,a=r||t.viewport,l=n||t.dimensions,u=l.draggables,c=l.droppables,f=u[t.critical.draggable.id],h=cn(o);h||ae();var g=c[h],p=Mb({impact:o,viewport:a,destination:g,draggables:u}),y=Rb({impact:p,draggable:f,droppable:g,draggables:u,viewport:a,afterCritical:t.afterCritical});return Ga({impact:p,clientSelection:y,state:t,dimensions:l,viewport:a})},m3=function(e){return{index:e.index,droppableId:e.droppableId}},Bb=function(e){var t=e.draggable,n=e.home,r=e.draggables,o=e.viewport,a=Js(n.axis,t.displaceBy),l=Yo(n.descriptor.id,r),u=l.indexOf(t);u===-1&&ae();var c=l.slice(u+1),f=c.reduce(function(y,w){return y[w.descriptor.id]=!0,y},{}),h={inVirtualList:n.descriptor.mode==="virtual",displacedBy:a,effected:f},g=ks({afterDragging:c,destination:n,displacedBy:a,last:null,viewport:o.frame,forceShouldAnimate:!1}),p={displaced:g,displacedBy:a,at:{type:"REORDER",destination:m3(t.descriptor)}};return{impact:p,afterCritical:h}},g3=function(e,t){return{draggables:e.draggables,droppables:Mm(e.droppables,t)}},v3=function(e){var t=e.draggable,n=e.offset,r=e.initialWindowScroll,o=Ku(t.client,n),a=qu(o,r),l=ge({},t,{placeholder:ge({},t.placeholder,{client:o}),client:o,page:a});return l},y3=function(e){var t=e.frame;return t||ae(),t},_3=function(e){var t=e.additions,n=e.updatedDroppables,r=e.viewport,o=r.scroll.diff.value;return t.map(function(a){var l=a.descriptor.droppableId,u=n[l],c=y3(u),f=c.scroll.diff.value,h=It(o,f),g=v3({draggable:a,offset:h,initialWindowScroll:r.scroll.initial});return g})},w3=function(e){var t=e.state,n=e.published,r=n.modified.map(function(S){var C=t.dimensions.droppables[S.droppableId],D=Nm(C,S.scroll);return D}),o=ge({},t.dimensions.droppables,{},_b(r)),a=wb(_3({additions:n.additions,updatedDroppables:o,viewport:t.viewport})),l=ge({},t.dimensions.draggables,{},a);n.removals.forEach(function(S){delete l[S]});var u={droppables:o,draggables:l},c=cn(t.impact),f=c?u.droppables[c]:null,h=u.draggables[t.critical.draggable.id],g=u.droppables[t.critical.droppable.id],p=Bb({draggable:h,home:g,draggables:l,viewport:t.viewport}),y=p.impact,w=p.afterCritical,E=f&&f.isCombineEnabled?t.impact:y,N=Ab({pageOffset:t.current.page.offset,draggable:u.draggables[t.critical.draggable.id],draggables:u.draggables,droppables:u.droppables,previousImpact:E,viewport:t.viewport,afterCritical:w}),b=ge({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:N,onLiftImpact:y,dimensions:u,afterCritical:w,forceShouldAnimate:!1});if(t.phase==="COLLECTING")return b;var x=ge({phase:"DROP_PENDING"},b,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1});return x},Kh=function(t){return t.movementMode==="SNAP"},Cf=function(t,n,r){var o=g3(t.dimensions,n);return!Kh(t)||r?Ga({state:t,dimensions:o}):Ob({state:t,dimensions:o})};function Ef(e){return e.isDragging&&e.movementMode==="SNAP"?ge({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var Ry={phase:"IDLE",completed:null,shouldFlush:!1},x3=function(e,t){if(e===void 0&&(e=Ry),t.type==="FLUSH")return ge({},Ry,{shouldFlush:!0});if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&ae();var n=t.payload,r=n.critical,o=n.clientSelection,a=n.viewport,l=n.dimensions,u=n.movementMode,c=l.draggables[r.draggable.id],f=l.droppables[r.droppable.id],h={selection:o,borderBoxCenter:c.client.borderBox.center,offset:wt},g={client:h,page:{selection:It(h.selection,a.scroll.initial),borderBoxCenter:It(h.selection,a.scroll.initial),offset:It(h.selection,a.scroll.diff.value)}},p=Fc(l.droppables).every(function(tt){return!tt.isFixedOnPage}),y=Bb({draggable:c,home:f,draggables:l.draggables,viewport:a}),w=y.impact,E=y.afterCritical,N={phase:"DRAGGING",isDragging:!0,critical:r,movementMode:u,dimensions:l,initial:g,current:g,isWindowScrollAllowed:p,impact:w,afterCritical:E,onLiftImpact:w,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null};return N}if(t.type==="COLLECTION_STARTING"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&ae();var b=ge({phase:"COLLECTING"},e,{phase:"COLLECTING"});return b}if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||ae(),w3({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;yi(e)||ae();var x=t.payload.client;return Yr(x,e.current.client.selection)?e:Ga({state:e,clientSelection:x,impact:Kh(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Ef(e);yi(e)||ae();var S=t.payload,C=S.id,D=S.newScroll,A=e.dimensions.droppables[C];if(!A)return e;var M=Nm(A,D);return Cf(e,M,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;yi(e)||ae();var U=t.payload,I=U.id,T=U.isEnabled,R=e.dimensions.droppables[I];R||ae(),R.isEnabled===T&&ae();var V=ge({},R,{isEnabled:T});return Cf(e,V,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;yi(e)||ae();var Z=t.payload,q=Z.id,J=Z.isCombineEnabled,Y=e.dimensions.droppables[q];Y||ae(),Y.isCombineEnabled===J&&ae();var te=ge({},Y,{isCombineEnabled:J});return Cf(e,te,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;yi(e)||ae(),e.isWindowScrollAllowed||ae();var B=t.payload.newScroll;if(Yr(e.viewport.scroll.current,B))return Ef(e);var F=Pb(e.viewport,B);return Kh(e)?Ob({state:e,viewport:F}):Ga({state:e,viewport:F})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!yi(e))return e;var k=t.payload.maxScroll;if(Yr(k,e.viewport.scroll.max))return e;var z=ge({},e.viewport,{scroll:ge({},e.viewport.scroll,{max:k})});return ge({phase:"DRAGGING"},e,{viewport:z})}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&ae();var G=r3({state:e,type:t.type});return G?Ga({state:e,impact:G.impact,clientSelection:G.clientSelection,scrollJumpRequest:G.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){var H=t.payload.reason;e.phase!=="COLLECTING"&&ae();var K=ge({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:H});return K}if(t.type==="DROP_ANIMATE"){var ne=t.payload,Q=ne.completed,ce=ne.dropDuration,ve=ne.newHomeClientOffset;e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||ae();var $e={phase:"DROP_ANIMATING",completed:Q,dropDuration:ce,newHomeClientOffset:ve,dimensions:e.dimensions};return $e}if(t.type==="DROP_COMPLETE"){var Oe=t.payload.completed;return{phase:"IDLE",completed:Oe,shouldFlush:!1}}return e},b3=function(t){return{type:"BEFORE_INITIAL_CAPTURE",payload:t}},S3=function(t){return{type:"LIFT",payload:t}},C3=function(t){return{type:"INITIAL_PUBLISH",payload:t}},E3=function(t){return{type:"PUBLISH_WHILE_DRAGGING",payload:t}},P3=function(){return{type:"COLLECTION_STARTING",payload:null}},N3=function(t){return{type:"UPDATE_DROPPABLE_SCROLL",payload:t}},k3=function(t){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}},I3=function(t){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}},jb=function(t){return{type:"MOVE",payload:t}},T3=function(t){return{type:"MOVE_BY_WINDOW_SCROLL",payload:t}},D3=function(t){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}},L3=function(){return{type:"MOVE_UP",payload:null}},A3=function(){return{type:"MOVE_DOWN",payload:null}},M3=function(){return{type:"MOVE_RIGHT",payload:null}},R3=function(){return{type:"MOVE_LEFT",payload:null}},Rm=function(){return{type:"FLUSH",payload:null}},O3=function(t){return{type:"DROP_ANIMATE",payload:t}},Om=function(t){return{type:"DROP_COMPLETE",payload:t}},zb=function(t){return{type:"DROP",payload:t}},B3=function(t){return{type:"DROP_PENDING",payload:t}},Fb=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},j3=function(e){return function(t){var n=t.getState,r=t.dispatch;return function(o){return function(a){if(a.type!=="LIFT"){o(a);return}var l=a.payload,u=l.id,c=l.clientSelection,f=l.movementMode,h=n();h.phase==="DROP_ANIMATING"&&r(Om({completed:h.completed})),n().phase!=="IDLE"&&ae(),r(Rm()),r(b3({draggableId:u,movementMode:f}));var g={shouldPublishImmediately:f==="SNAP"},p={draggableId:u,scrollOptions:g},y=e.startPublishing(p),w=y.critical,E=y.dimensions,N=y.viewport;r(C3({critical:w,dimensions:E,clientSelection:c,movementMode:f,viewport:N}))}}}},z3=function(e){return function(){return function(t){return function(n){n.type==="INITIAL_PUBLISH"&&e.dragging(),n.type==="DROP_ANIMATE"&&e.dropping(n.payload.completed.result.reason),(n.type==="FLUSH"||n.type==="DROP_COMPLETE")&&e.resting(),t(n)}}}},Bm={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Is={opacity:{drop:0,combining:.7},scale:{drop:.75}},jm={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},mi=jm.outOfTheWay+"s "+Bm.outOfTheWay,Wa={fluid:"opacity "+mi,snap:"transform "+mi+", opacity "+mi,drop:function(t){var n=t+"s "+Bm.drop;return"transform "+n+", opacity "+n},outOfTheWay:"transform "+mi,placeholder:"height "+mi+", width "+mi+", margin "+mi},Oy=function(t){return Yr(t,wt)?null:"translate("+t.x+"px, "+t.y+"px)"},qh={moveTo:Oy,drop:function(t,n){var r=Oy(t);return r?n?r+" scale("+Is.scale.drop+")":r:null}},Yh=jm.minDropTime,Ub=jm.maxDropTime,F3=Ub-Yh,By=1500,U3=.6,$3=function(e){var t=e.current,n=e.destination,r=e.reason,o=Ps(t,n);if(o<=0)return Yh;if(o>=By)return Ub;var a=o/By,l=Yh+F3*a,u=r==="CANCEL"?l*U3:l;return Number(u.toFixed(2))},H3=function(e){var t=e.impact,n=e.draggable,r=e.dimensions,o=e.viewport,a=e.afterCritical,l=r.draggables,u=r.droppables,c=cn(t),f=c?u[c]:null,h=u[n.descriptor.droppableId],g=Rb({impact:t,draggable:n,draggables:l,afterCritical:a,droppable:f||h,viewport:o}),p=ln(g,n.client.borderBox.center);return p},Z3=function(e){var t=e.draggables,n=e.reason,r=e.lastImpact,o=e.home,a=e.viewport,l=e.onLiftImpact;if(!r.at||n!=="DROP"){var u=Mb({draggables:t,impact:l,destination:o,viewport:a,forceShouldAnimate:!0});return{impact:u,didDropInsideDroppable:!1}}if(r.at.type==="REORDER")return{impact:r,didDropInsideDroppable:!0};var c=ge({},r,{displaced:Ns});return{impact:c,didDropInsideDroppable:!0}},G3=function(e){var t=e.getState,n=e.dispatch;return function(r){return function(o){if(o.type!=="DROP"){r(o);return}var a=t(),l=o.payload.reason;if(a.phase==="COLLECTING"){n(B3({reason:l}));return}if(a.phase!=="IDLE"){var u=a.phase==="DROP_PENDING"&&a.isWaiting;u&&ae(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||ae();var c=a.critical,f=a.dimensions,h=f.draggables[a.critical.draggable.id],g=Z3({reason:l,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),p=g.impact,y=g.didDropInsideDroppable,w=y?Im(p):null,E=y?Uc(p):null,N={index:c.draggable.index,droppableId:c.droppable.id},b={draggableId:h.descriptor.id,type:h.descriptor.type,source:N,reason:l,mode:a.movementMode,destination:w,combine:E},x=H3({impact:p,draggable:h,dimensions:f,viewport:a.viewport,afterCritical:a.afterCritical}),S={critical:a.critical,afterCritical:a.afterCritical,result:b,impact:p},C=!Yr(a.current.client.offset,x)||!!b.combine;if(!C){n(Om({completed:S}));return}var D=$3({current:a.current.client.offset,destination:x,reason:l}),A={newHomeClientOffset:x,dropDuration:D,completed:S};n(O3(A))}}}},$b=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function W3(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(n){n.target!==window&&n.target!==window.document||e()}}}function V3(e){var t=e.onWindowScroll;function n(){t($b())}var r=Es(n),o=W3(r),a=qr;function l(){return a!==qr}function u(){l()&&ae(),a=En(window,[o])}function c(){l()||ae(),r.cancel(),a(),a=qr}return{start:u,stop:c,isActive:l}}var K3=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},q3=function(e){var t=V3({onWindowScroll:function(r){e.dispatch(T3({newScroll:r}))}});return function(n){return function(r){!t.isActive()&&r.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&K3(r)&&t.stop(),n(r)}}},Y3=function(e){var t=!1,n=!1,r=setTimeout(function(){n=!0}),o=function(l){t||n||(t=!0,e(l),clearTimeout(r))};return o.wasCalled=function(){return t},o},Q3=function(){var e=[],t=function(a){var l=km(e,function(f){return f.timerId===a});l===-1&&ae();var u=e.splice(l,1),c=u[0];c.callback()},n=function(a){var l=setTimeout(function(){return t(l)}),u={timerId:l,callback:a};e.push(u)},r=function(){if(e.length){var a=[].concat(e);e.length=0,a.forEach(function(l){clearTimeout(l.timerId),l.callback()})}};return{add:n,flush:r}},J3=function(t,n){return t==null&&n==null?!0:t==null||n==null?!1:t.droppableId===n.droppableId&&t.index===n.index},X3=function(t,n){return t==null&&n==null?!0:t==null||n==null?!1:t.draggableId===n.draggableId&&t.droppableId===n.droppableId},eM=function(t,n){if(t===n)return!0;var r=t.draggable.id===n.draggable.id&&t.draggable.droppableId===n.draggable.droppableId&&t.draggable.type===n.draggable.type&&t.draggable.index===n.draggable.index,o=t.droppable.id===n.droppable.id&&t.droppable.type===n.droppable.type;return r&&o},xa=function(t,n){n()},ql=function(t,n){return{draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:n}},Pf=function(t,n,r,o){if(!t){r(o(n));return}var a=Y3(r),l={announce:a};t(n,l),a.wasCalled()||r(o(n))},tM=function(e,t){var n=Q3(),r=null,o=function(p,y){r&&ae(),xa("onBeforeCapture",function(){var w=e().onBeforeCapture;if(w){var E={draggableId:p,mode:y};w(E)}})},a=function(p,y){r&&ae(),xa("onBeforeDragStart",function(){var w=e().onBeforeDragStart;w&&w(ql(p,y))})},l=function(p,y){r&&ae();var w=ql(p,y);r={mode:y,lastCritical:p,lastLocation:w.source,lastCombine:null},n.add(function(){xa("onDragStart",function(){return Pf(e().onDragStart,w,t,hu.onDragStart)})})},u=function(p,y){var w=Im(y),E=Uc(y);r||ae();var N=!eM(p,r.lastCritical);N&&(r.lastCritical=p);var b=!J3(r.lastLocation,w);b&&(r.lastLocation=w);var x=!X3(r.lastCombine,E);if(x&&(r.lastCombine=E),!(!N&&!b&&!x)){var S=ge({},ql(p,r.mode),{combine:E,destination:w});n.add(function(){xa("onDragUpdate",function(){return Pf(e().onDragUpdate,S,t,hu.onDragUpdate)})})}},c=function(){r||ae(),n.flush()},f=function(p){r||ae(),r=null,xa("onDragEnd",function(){return Pf(e().onDragEnd,p,t,hu.onDragEnd)})},h=function(){if(r){var p=ge({},ql(r.lastCritical,r.mode),{combine:null,destination:null,reason:"CANCEL"});f(p)}};return{beforeCapture:o,beforeStart:a,start:l,update:u,flush:c,drop:f,abort:h}},nM=function(e,t){var n=tM(e,t);return function(r){return function(o){return function(a){if(a.type==="BEFORE_INITIAL_CAPTURE"){n.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(a.type==="INITIAL_PUBLISH"){var l=a.payload.critical;n.beforeStart(l,a.payload.movementMode),o(a),n.start(l,a.payload.movementMode);return}if(a.type==="DROP_COMPLETE"){var u=a.payload.completed.result;n.flush(),o(a),n.drop(u);return}if(o(a),a.type==="FLUSH"){n.abort();return}var c=r.getState();c.phase==="DRAGGING"&&n.update(c.critical,c.impact)}}}},rM=function(e){return function(t){return function(n){if(n.type!=="DROP_ANIMATION_FINISHED"){t(n);return}var r=e.getState();r.phase!=="DROP_ANIMATING"&&ae(),e.dispatch(Om({completed:r.completed}))}}},iM=function(e){var t=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return function(o){return function(a){if((a.type==="FLUSH"||a.type==="DROP_COMPLETE"||a.type==="DROP_ANIMATION_FINISHED")&&r(),o(a),a.type==="DROP_ANIMATE"){var l={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var c=e.getState();c.phase==="DROP_ANIMATING"&&e.dispatch(Fb())}};n=requestAnimationFrame(function(){n=null,t=En(window,[l])})}}}},oM=function(e){return function(){return function(t){return function(n){(n.type==="DROP_COMPLETE"||n.type==="FLUSH"||n.type==="DROP_ANIMATE")&&e.stopPublishing(),t(n)}}}},aM=function(e){var t=!1;return function(){return function(n){return function(r){if(r.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),!!t){if(r.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(r.type==="DROP_COMPLETE"){t=!1;var o=r.payload.completed.result;o.combine&&e.tryShiftRecord(o.draggableId,o.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}},sM=function(t){return t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH"},lM=function(e){return function(t){return function(n){return function(r){if(sM(r)){e.stop(),n(r);return}if(r.type==="INITIAL_PUBLISH"){n(r);var o=t.getState();o.phase!=="DRAGGING"&&ae(),e.start(o);return}n(r),e.scroll(t.getState())}}}},uM=function(e){return function(t){return function(n){if(t(n),n.type==="PUBLISH_WHILE_DRAGGING"){var r=e.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||e.dispatch(zb({reason:r.reason})))}}}},cM=Kx,dM=function(e){var t=e.dimensionMarshal,n=e.focusMarshal,r=e.styleMarshal,o=e.getResponders,a=e.announce,l=e.autoScroller;return Vx(x3,cM(QD(z3(r),oM(t),j3(t),G3,rM,iM,uM,lM(l),q3,aM(n),nM(o,a))))},Nf=function(){return{additions:{},removals:{},modified:{}}};function fM(e){var t=e.registry,n=e.callbacks,r=Nf(),o=null,a=function(){o||(n.collectionStarting(),o=requestAnimationFrame(function(){o=null;var h=r,g=h.additions,p=h.removals,y=h.modified,w=Object.keys(g).map(function(b){return t.draggable.getById(b).getDimension(wt)}).sort(function(b,x){return b.descriptor.index-x.descriptor.index}),E=Object.keys(y).map(function(b){var x=t.droppable.getById(b),S=x.callbacks.getScrollWhileDragging();return{droppableId:b,scroll:S}}),N={additions:w,removals:Object.keys(p),modified:E};r=Nf(),n.publish(N)}))},l=function(h){var g=h.descriptor.id;r.additions[g]=h,r.modified[h.descriptor.droppableId]=!0,r.removals[g]&&delete r.removals[g],a()},u=function(h){var g=h.descriptor;r.removals[g.id]=!0,r.modified[g.droppableId]=!0,r.additions[g.id]&&delete r.additions[g.id],a()},c=function(){o&&(cancelAnimationFrame(o),o=null,r=Nf())};return{add:l,remove:u,stop:c}}var Hb=function(e){var t=e.scrollHeight,n=e.scrollWidth,r=e.height,o=e.width,a=ln({x:n,y:t},{x:o,y:r}),l={x:Math.max(0,a.x),y:Math.max(0,a.y)};return l},Zb=function(){var e=document.documentElement;return e||ae(),e},Gb=function(){var e=Zb(),t=Hb({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight});return t},hM=function(){var e=$b(),t=Gb(),n=e.y,r=e.x,o=Zb(),a=o.clientWidth,l=o.clientHeight,u=r+a,c=n+l,f=jn({top:n,left:r,right:u,bottom:c}),h={frame:f,scroll:{initial:e,current:e,max:t,diff:{value:wt,displacement:wt}}};return h},pM=function(e){var t=e.critical,n=e.scrollOptions,r=e.registry,o=hM(),a=o.scroll.current,l=t.droppable,u=r.droppable.getAllByType(l.type).map(function(g){return g.callbacks.getDimensionAndWatchScroll(a,n)}),c=r.draggable.getAllByType(t.draggable.type).map(function(g){return g.getDimension(a)}),f={draggables:wb(c),droppables:_b(u)},h={dimensions:f,critical:t,viewport:o};return h};function jy(e,t,n){if(n.descriptor.id===t.id||n.descriptor.type!==t.type)return!1;var r=e.droppable.getById(n.descriptor.droppableId);return r.descriptor.mode==="virtual"}var mM=function(e,t){var n=null,r=fM({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),o=function(y,w){e.droppable.exists(y)||ae(),n&&t.updateDroppableIsEnabled({id:y,isEnabled:w})},a=function(y,w){n&&(e.droppable.exists(y)||ae(),t.updateDroppableIsCombineEnabled({id:y,isCombineEnabled:w}))},l=function(y,w){n&&(e.droppable.exists(y)||ae(),t.updateDroppableScroll({id:y,newScroll:w}))},u=function(y,w){n&&e.droppable.getById(y).callbacks.scroll(w)},c=function(){if(n){r.stop();var y=n.critical.droppable;e.droppable.getAllByType(y.type).forEach(function(w){return w.callbacks.dragStopped()}),n.unsubscribe(),n=null}},f=function(y){n||ae();var w=n.critical.draggable;y.type==="ADDITION"&&jy(e,w,y.value)&&r.add(y.value),y.type==="REMOVAL"&&jy(e,w,y.value)&&r.remove(y.value)},h=function(y){n&&ae();var w=e.draggable.getById(y.draggableId),E=e.droppable.getById(w.descriptor.droppableId),N={draggable:w.descriptor,droppable:E.descriptor},b=e.subscribe(f);return n={critical:N,unsubscribe:b},pM({critical:N,registry:e,scrollOptions:y.scrollOptions})},g={updateDroppableIsEnabled:o,updateDroppableIsCombineEnabled:a,scrollDroppable:u,updateDroppableScroll:l,startPublishing:h,stopPublishing:c};return g},Wb=function(e,t){return e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP"},gM=function(e){window.scrollBy(e.x,e.y)},vM=_t(function(e){return Fc(e).filter(function(t){return!(!t.isEnabled||!t.frame)})}),yM=function(t,n){var r=ai(vM(n),function(o){return o.frame||ae(),Tb(o.frame.pageMarginBox)(t)});return r},_M=function(e){var t=e.center,n=e.destination,r=e.droppables;if(n){var o=r[n];return o.frame?o:null}var a=yM(t,r);return a},Qr={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(t){return Math.pow(t,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},wM=function(e,t){var n=e[t.size]*Qr.startFromPercentage,r=e[t.size]*Qr.maxScrollAtPercentage,o={startScrollingFrom:n,maxScrollValueAt:r};return o},Vb=function(e){var t=e.startOfRange,n=e.endOfRange,r=e.current,o=n-t;if(o===0)return 0;var a=r-t,l=a/o;return l},zm=1,xM=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return Qr.maxPixelScroll;if(e===t.startScrollingFrom)return zm;var n=Vb({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),r=1-n,o=Qr.maxPixelScroll*Qr.ease(r);return Math.ceil(o)},zy=Qr.durationDampening.accelerateAt,Fy=Qr.durationDampening.stopDampeningAt,bM=function(e,t){var n=t,r=Fy,o=Date.now(),a=o-n;if(a>=Fy)return e;if(a<zy)return zm;var l=Vb({startOfRange:zy,endOfRange:r,current:a}),u=e*Qr.ease(l);return Math.ceil(u)},Uy=function(e){var t=e.distanceToEdge,n=e.thresholds,r=e.dragStartTime,o=e.shouldUseTimeDampening,a=xM(t,n);return a===0?0:o?Math.max(bM(a,r),zm):a},$y=function(e){var t=e.container,n=e.distanceToEdges,r=e.dragStartTime,o=e.axis,a=e.shouldUseTimeDampening,l=wM(t,o),u=n[o.end]<n[o.start];return u?Uy({distanceToEdge:n[o.end],thresholds:l,dragStartTime:r,shouldUseTimeDampening:a}):-1*Uy({distanceToEdge:n[o.start],thresholds:l,dragStartTime:r,shouldUseTimeDampening:a})},SM=function(e){var t=e.container,n=e.subject,r=e.proposedScroll,o=n.height>t.height,a=n.width>t.width;return!a&&!o?r:a&&o?null:{x:a?0:r.x,y:o?0:r.y}},CM=vb(function(e){return e===0?0:e}),Kb=function(e){var t=e.dragStartTime,n=e.container,r=e.subject,o=e.center,a=e.shouldUseTimeDampening,l={top:o.y-n.top,right:n.right-o.x,bottom:n.bottom-o.y,left:o.x-n.left},u=$y({container:n,distanceToEdges:l,dragStartTime:t,axis:Tm,shouldUseTimeDampening:a}),c=$y({container:n,distanceToEdges:l,dragStartTime:t,axis:Sb,shouldUseTimeDampening:a}),f=CM({x:c,y:u});if(Yr(f,wt))return null;var h=SM({container:n,subject:r,proposedScroll:f});return h?Yr(h,wt)?null:h:null},EM=vb(function(e){return e===0?0:e>0?1:-1}),Fm=function(){var e=function(n,r){return n<0?n:n>r?n-r:0};return function(t){var n=t.current,r=t.max,o=t.change,a=It(n,o),l={x:e(a.x,r.x),y:e(a.y,r.y)};return Yr(l,wt)?null:l}}(),qb=function(t){var n=t.max,r=t.current,o=t.change,a={x:Math.max(r.x,n.x),y:Math.max(r.y,n.y)},l=EM(o),u=Fm({max:a,current:r,change:l});return!u||l.x!==0&&u.x===0||l.y!==0&&u.y===0},Um=function(t,n){return qb({current:t.scroll.current,max:t.scroll.max,change:n})},PM=function(t,n){if(!Um(t,n))return null;var r=t.scroll.max,o=t.scroll.current;return Fm({current:o,max:r,change:n})},$m=function(t,n){var r=t.frame;return r?qb({current:r.scroll.current,max:r.scroll.max,change:n}):!1},NM=function(t,n){var r=t.frame;return!r||!$m(t,n)?null:Fm({current:r.scroll.current,max:r.scroll.max,change:n})},kM=function(e){var t=e.viewport,n=e.subject,r=e.center,o=e.dragStartTime,a=e.shouldUseTimeDampening,l=Kb({dragStartTime:o,container:t.frame,subject:n,center:r,shouldUseTimeDampening:a});return l&&Um(t,l)?l:null},IM=function(e){var t=e.droppable,n=e.subject,r=e.center,o=e.dragStartTime,a=e.shouldUseTimeDampening,l=t.frame;if(!l)return null;var u=Kb({dragStartTime:o,container:l.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:a});return u&&$m(t,u)?u:null},Hy=function(e){var t=e.state,n=e.dragStartTime,r=e.shouldUseTimeDampening,o=e.scrollWindow,a=e.scrollDroppable,l=t.current.page.borderBoxCenter,u=t.dimensions.draggables[t.critical.draggable.id],c=u.page.marginBox;if(t.isWindowScrollAllowed){var f=t.viewport,h=kM({dragStartTime:n,viewport:f,subject:c,center:l,shouldUseTimeDampening:r});if(h){o(h);return}}var g=_M({center:l,destination:cn(t.impact),droppables:t.dimensions.droppables});if(g){var p=IM({dragStartTime:n,droppable:g,subject:c,center:l,shouldUseTimeDampening:r});p&&a(g.descriptor.id,p)}},TM=function(e){var t=e.scrollWindow,n=e.scrollDroppable,r=Es(t),o=Es(n),a=null,l=function(h){a||ae();var g=a,p=g.shouldUseTimeDampening,y=g.dragStartTime;Hy({state:h,scrollWindow:r,scrollDroppable:o,dragStartTime:y,shouldUseTimeDampening:p})},u=function(h){a&&ae();var g=Date.now(),p=!1,y=function(){p=!0};Hy({state:h,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:y,scrollDroppable:y}),a={dragStartTime:g,shouldUseTimeDampening:p},p&&l(h)},c=function(){a&&(r.cancel(),o.cancel(),a=null)};return{start:u,stop:c,scroll:l}},DM=function(e){var t=e.move,n=e.scrollDroppable,r=e.scrollWindow,o=function(f,h){var g=It(f.current.client.selection,h);t({client:g})},a=function(f,h){if(!$m(f,h))return h;var g=NM(f,h);if(!g)return n(f.descriptor.id,h),null;var p=ln(h,g);n(f.descriptor.id,p);var y=ln(h,p);return y},l=function(f,h,g){if(!f||!Um(h,g))return g;var p=PM(h,g);if(!p)return r(g),null;var y=ln(g,p);r(y);var w=ln(g,y);return w},u=function(f){var h=f.scrollJumpRequest;if(h){var g=cn(f.impact);g||ae();var p=a(f.dimensions.droppables[g],h);if(p){var y=f.viewport,w=l(f.isWindowScrollAllowed,y,p);w&&o(f,w)}}};return u},LM=function(e){var t=e.scrollDroppable,n=e.scrollWindow,r=e.move,o=TM({scrollWindow:n,scrollDroppable:t}),a=DM({move:r,scrollWindow:n,scrollDroppable:t}),l=function(f){if(f.phase==="DRAGGING"){if(f.movementMode==="FLUID"){o.scroll(f);return}f.scrollJumpRequest&&a(f)}},u={scroll:l,start:o.start,stop:o.stop};return u},zo="data-rbd",Fo=function(){var e=zo+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),Qh=function(){var e=zo+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),AM=function(){var e=zo+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Zy={contextId:zo+"-scroll-container-context-id"},MM=function(t){return function(n){return"["+n+'="'+t+'"]'}},ba=function(t,n){return t.map(function(r){var o=r.styles[n];return o?r.selector+" { "+o+" }":""}).join(" ")},RM="pointer-events: none;",OM=function(e){var t=MM(e),n=function(){var u=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Fo.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:u,dragging:RM,dropAnimating:u}}}(),r=function(){var u=`
      transition: `+Wa.outOfTheWay+`;
    `;return{selector:t(Qh.contextId),styles:{dragging:u,dropAnimating:u,userCancel:u}}}(),o={selector:t(AM.contextId),styles:{always:"overflow-anchor: none;"}},a={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},l=[r,n,o,a];return{always:ba(l,"always"),resting:ba(l,"resting"),dragging:ba(l,"dragging"),dropAnimating:ba(l,"dropAnimating"),userCancel:ba(l,"userCancel")}},dn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?j.useLayoutEffect:j.useEffect,kf=function(){var t=document.querySelector("head");return t||ae(),t},Gy=function(t){var n=document.createElement("style");return t&&n.setAttribute("nonce",t),n.type="text/css",n};function BM(e,t){var n=Me(function(){return OM(e)},[e]),r=j.useRef(null),o=j.useRef(null),a=pe(_t(function(g){var p=o.current;p||ae(),p.textContent=g}),[]),l=pe(function(g){var p=r.current;p||ae(),p.textContent=g},[]);dn(function(){!r.current&&!o.current||ae();var g=Gy(t),p=Gy(t);return r.current=g,o.current=p,g.setAttribute(zo+"-always",e),p.setAttribute(zo+"-dynamic",e),kf().appendChild(g),kf().appendChild(p),l(n.always),a(n.resting),function(){var y=function(E){var N=E.current;N||ae(),kf().removeChild(N),E.current=null};y(r),y(o)}},[t,l,a,n.always,n.resting,e]);var u=pe(function(){return a(n.dragging)},[a,n.dragging]),c=pe(function(g){if(g==="DROP"){a(n.dropAnimating);return}a(n.userCancel)},[a,n.dropAnimating,n.userCancel]),f=pe(function(){o.current&&a(n.resting)},[a,n.resting]),h=Me(function(){return{dragging:u,dropping:c,resting:f}},[u,c,f]);return h}var Yb=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function Zc(e){return e instanceof Yb(e).HTMLElement}function jM(e,t){var n="["+Fo.contextId+'="'+e+'"]',r=yb(document.querySelectorAll(n));if(!r.length)return null;var o=ai(r,function(a){return a.getAttribute(Fo.draggableId)===t});return!o||!Zc(o)?null:o}function zM(e){var t=j.useRef({}),n=j.useRef(null),r=j.useRef(null),o=j.useRef(!1),a=pe(function(p,y){var w={id:p,focus:y};return t.current[p]=w,function(){var N=t.current,b=N[p];b!==w&&delete N[p]}},[]),l=pe(function(p){var y=jM(e,p);y&&y!==document.activeElement&&y.focus()},[e]),u=pe(function(p,y){n.current===p&&(n.current=y)},[]),c=pe(function(){r.current||o.current&&(r.current=requestAnimationFrame(function(){r.current=null;var p=n.current;p&&l(p)}))},[l]),f=pe(function(p){n.current=null;var y=document.activeElement;y&&y.getAttribute(Fo.draggableId)===p&&(n.current=p)},[]);dn(function(){return o.current=!0,function(){o.current=!1;var p=r.current;p&&cancelAnimationFrame(p)}},[]);var h=Me(function(){return{register:a,tryRecordFocus:f,tryRestoreFocusRecorded:c,tryShiftRecord:u}},[a,f,c,u]);return h}function FM(){var e={draggables:{},droppables:{}},t=[];function n(g){return t.push(g),function(){var y=t.indexOf(g);y!==-1&&t.splice(y,1)}}function r(g){t.length&&t.forEach(function(p){return p(g)})}function o(g){return e.draggables[g]||null}function a(g){var p=o(g);return p||ae(),p}var l={register:function(p){e.draggables[p.descriptor.id]=p,r({type:"ADDITION",value:p})},update:function(p,y){var w=e.draggables[y.descriptor.id];w&&w.uniqueId===p.uniqueId&&(delete e.draggables[y.descriptor.id],e.draggables[p.descriptor.id]=p)},unregister:function(p){var y=p.descriptor.id,w=o(y);w&&p.uniqueId===w.uniqueId&&(delete e.draggables[y],r({type:"REMOVAL",value:p}))},getById:a,findById:o,exists:function(p){return!!o(p)},getAllByType:function(p){return Ju(e.draggables).filter(function(y){return y.descriptor.type===p})}};function u(g){return e.droppables[g]||null}function c(g){var p=u(g);return p||ae(),p}var f={register:function(p){e.droppables[p.descriptor.id]=p},unregister:function(p){var y=u(p.descriptor.id);y&&p.uniqueId===y.uniqueId&&delete e.droppables[p.descriptor.id]},getById:c,findById:u,exists:function(p){return!!u(p)},getAllByType:function(p){return Ju(e.droppables).filter(function(y){return y.descriptor.type===p})}};function h(){e.draggables={},e.droppables={},t.length=0}return{draggable:l,droppable:f,subscribe:n,clean:h}}function UM(){var e=Me(FM,[]);return j.useEffect(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}var Hm=Se.createContext(null),ec=function(){var e=document.body;return e||ae(),e},$M={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},HM=function(t){return"rbd-announcement-"+t};function ZM(e){var t=Me(function(){return HM(e)},[e]),n=j.useRef(null);j.useEffect(function(){var a=document.createElement("div");return n.current=a,a.id=t,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),ge(a.style,$M),ec().appendChild(a),function(){setTimeout(function(){var c=ec();c.contains(a)&&c.removeChild(a),a===n.current&&(n.current=null)})}},[t]);var r=pe(function(o){var a=n.current;if(a){a.textContent=o;return}},[]);return r}var GM=0,WM={separator:"::"};function Zm(e,t){return t===void 0&&(t=WM),Me(function(){return""+e+t.separator+GM++},[t.separator,e])}function VM(e){var t=e.contextId,n=e.uniqueId;return"rbd-hidden-text-"+t+"-"+n}function KM(e){var t=e.contextId,n=e.text,r=Zm("hidden-text",{separator:"-"}),o=Me(function(){return VM({contextId:t,uniqueId:r})},[r,t]);return j.useEffect(function(){var l=document.createElement("div");return l.id=o,l.textContent=n,l.style.display="none",ec().appendChild(l),function(){var c=ec();c.contains(l)&&c.removeChild(l)}},[o,n]),o}var Gc=Se.createContext(null);function Qb(e){var t=j.useRef(e);return j.useEffect(function(){t.current=e}),t}function qM(){var e=null;function t(){return!!e}function n(l){return l===e}function r(l){e&&ae();var u={abandon:l};return e=u,u}function o(){e||ae(),e=null}function a(){e&&(e.abandon(),o())}return{isClaimed:t,isActive:n,claim:r,release:o,tryAbandon:a}}var YM=9,QM=13,Gm=27,Jb=32,JM=33,XM=34,eR=35,tR=36,nR=37,rR=38,iR=39,oR=40,Yl,aR=(Yl={},Yl[QM]=!0,Yl[YM]=!0,Yl),Xb=function(e){aR[e.keyCode]&&e.preventDefault()},Wc=function(){var e="visibilitychange";if(typeof document>"u")return e;var t=[e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],n=ai(t,function(r){return"on"+r in document});return n||e}(),e2=0,Wy=5;function sR(e,t){return Math.abs(t.x-e.x)>=Wy||Math.abs(t.y-e.y)>=Wy}var Vy={type:"IDLE"};function lR(e){var t=e.cancel,n=e.completed,r=e.getPhase,o=e.setPhase;return[{eventName:"mousemove",fn:function(l){var u=l.button,c=l.clientX,f=l.clientY;if(u===e2){var h={x:c,y:f},g=r();if(g.type==="DRAGGING"){l.preventDefault(),g.actions.move(h);return}g.type!=="PENDING"&&ae();var p=g.point;if(sR(p,h)){l.preventDefault();var y=g.actions.fluidLift(h);o({type:"DRAGGING",actions:y})}}}},{eventName:"mouseup",fn:function(l){var u=r();if(u.type!=="DRAGGING"){t();return}l.preventDefault(),u.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"mousedown",fn:function(l){r().type==="DRAGGING"&&l.preventDefault(),t()}},{eventName:"keydown",fn:function(l){var u=r();if(u.type==="PENDING"){t();return}if(l.keyCode===Gm){l.preventDefault(),t();return}Xb(l)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){r().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:function(l){var u=r();if(u.type==="IDLE"&&ae(),u.actions.shouldRespectForcePress()){t();return}l.preventDefault()}},{eventName:Wc,fn:t}]}function uR(e){var t=j.useRef(Vy),n=j.useRef(qr),r=Me(function(){return{eventName:"mousedown",fn:function(g){if(!g.defaultPrevented&&g.button===e2&&!(g.ctrlKey||g.metaKey||g.shiftKey||g.altKey)){var p=e.findClosestDraggableId(g);if(p){var y=e.tryGetLock(p,l,{sourceEvent:g});if(y){g.preventDefault();var w={x:g.clientX,y:g.clientY};n.current(),f(y,w)}}}}}},[e]),o=Me(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(g){if(!g.defaultPrevented){var p=e.findClosestDraggableId(g);if(p){var y=e.findOptionsForDraggable(p);y&&(y.shouldRespectForcePress||e.canGetLock(p)&&g.preventDefault())}}}}},[e]),a=pe(function(){var g={passive:!1,capture:!0};n.current=En(window,[o,r],g)},[o,r]),l=pe(function(){var h=t.current;h.type!=="IDLE"&&(t.current=Vy,n.current(),a())},[a]),u=pe(function(){var h=t.current;l(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[l]),c=pe(function(){var g={capture:!0,passive:!1},p=lR({cancel:u,completed:l,getPhase:function(){return t.current},setPhase:function(w){t.current=w}});n.current=En(window,p,g)},[u,l]),f=pe(function(g,p){t.current.type!=="IDLE"&&ae(),t.current={type:"PENDING",point:p,actions:g},c()},[c]);dn(function(){return a(),function(){n.current()}},[a])}var to;function cR(){}var dR=(to={},to[XM]=!0,to[JM]=!0,to[tR]=!0,to[eR]=!0,to);function fR(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:"keydown",fn:function(a){if(a.keyCode===Gm){a.preventDefault(),n();return}if(a.keyCode===Jb){a.preventDefault(),r();return}if(a.keyCode===oR){a.preventDefault(),e.moveDown();return}if(a.keyCode===rR){a.preventDefault(),e.moveUp();return}if(a.keyCode===iR){a.preventDefault(),e.moveRight();return}if(a.keyCode===nR){a.preventDefault(),e.moveLeft();return}if(dR[a.keyCode]){a.preventDefault();return}Xb(a)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:Wc,fn:n}]}function hR(e){var t=j.useRef(cR),n=Me(function(){return{eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==Jb)return;var l=e.findClosestDraggableId(a);if(!l)return;var u=e.tryGetLock(l,h,{sourceEvent:a});if(!u)return;a.preventDefault();var c=!0,f=u.snapLift();t.current();function h(){c||ae(),c=!1,t.current(),r()}t.current=En(window,fR(f,h),{capture:!0,passive:!1})}}},[e]),r=pe(function(){var a={passive:!1,capture:!0};t.current=En(window,[n],a)},[n]);dn(function(){return r(),function(){t.current()}},[r])}var If={type:"IDLE"},pR=120,mR=.15;function gR(e){var t=e.cancel,n=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(o){o.preventDefault()}},{eventName:"keydown",fn:function(o){if(n().type!=="DRAGGING"){t();return}o.keyCode===Gm&&o.preventDefault(),t()}},{eventName:Wc,fn:t}]}function vR(e){var t=e.cancel,n=e.completed,r=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(a){var l=r();if(l.type!=="DRAGGING"){t();return}l.hasMoved=!0;var u=a.touches[0],c=u.clientX,f=u.clientY,h={x:c,y:f};a.preventDefault(),l.actions.move(h)}},{eventName:"touchend",fn:function(a){var l=r();if(l.type!=="DRAGGING"){t();return}a.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),n()}},{eventName:"touchcancel",fn:function(a){if(r().type!=="DRAGGING"){t();return}a.preventDefault(),t()}},{eventName:"touchforcechange",fn:function(a){var l=r();l.type==="IDLE"&&ae();var u=a.touches[0];if(u){var c=u.force>=mR;if(c){var f=l.actions.shouldRespectForcePress();if(l.type==="PENDING"){f&&t();return}if(f){if(l.hasMoved){a.preventDefault();return}t();return}a.preventDefault()}}}},{eventName:Wc,fn:t}]}function yR(e){var t=j.useRef(If),n=j.useRef(qr),r=pe(function(){return t.current},[]),o=pe(function(y){t.current=y},[]),a=Me(function(){return{eventName:"touchstart",fn:function(y){if(!y.defaultPrevented){var w=e.findClosestDraggableId(y);if(w){var E=e.tryGetLock(w,u,{sourceEvent:y});if(E){var N=y.touches[0],b=N.clientX,x=N.clientY,S={x:b,y:x};n.current(),g(E,S)}}}}}},[e]),l=pe(function(){var y={capture:!0,passive:!1};n.current=En(window,[a],y)},[a]),u=pe(function(){var p=t.current;p.type!=="IDLE"&&(p.type==="PENDING"&&clearTimeout(p.longPressTimerId),o(If),n.current(),l())},[l,o]),c=pe(function(){var p=t.current;u(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[u]),f=pe(function(){var y={capture:!0,passive:!1},w={cancel:c,completed:u,getPhase:r},E=En(window,vR(w),y),N=En(window,gR(w),y);n.current=function(){E(),N()}},[c,r,u]),h=pe(function(){var y=r();y.type!=="PENDING"&&ae();var w=y.actions.fluidLift(y.point);o({type:"DRAGGING",actions:w,hasMoved:!1})},[r,o]),g=pe(function(y,w){r().type!=="IDLE"&&ae();var E=setTimeout(h,pR);o({type:"PENDING",point:w,actions:y,longPressTimerId:E}),f()},[f,r,o,h]);dn(function(){return l(),function(){n.current();var w=r();w.type==="PENDING"&&(clearTimeout(w.longPressTimerId),o(If))}},[r,l,o]),dn(function(){var y=En(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return y},[])}var _R={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function t2(e,t){if(t==null)return!1;var n=!!_R[t.tagName.toLowerCase()];if(n)return!0;var r=t.getAttribute("contenteditable");return r==="true"||r===""?!0:t===e?!1:t2(e,t.parentElement)}function wR(e,t){var n=t.target;return Zc(n)?t2(e,n):!1}var xR=function(e){return jn(e.getBoundingClientRect()).center};function bR(e){return e instanceof Yb(e).Element}var SR=function(){var e="matches";if(typeof document>"u")return e;var t=[e,"msMatchesSelector","webkitMatchesSelector"],n=ai(t,function(r){return r in Element.prototype});return n||e}();function n2(e,t){return e==null?null:e[SR](t)?e:n2(e.parentElement,t)}function CR(e,t){return e.closest?e.closest(t):n2(e,t)}function ER(e){return"["+Fo.contextId+'="'+e+'"]'}function PR(e,t){var n=t.target;if(!bR(n))return null;var r=ER(e),o=CR(n,r);return!o||!Zc(o)?null:o}function NR(e,t){var n=PR(e,t);return n?n.getAttribute(Fo.draggableId):null}function kR(e,t){var n="["+Qh.contextId+'="'+e+'"]',r=yb(document.querySelectorAll(n)),o=ai(r,function(a){return a.getAttribute(Qh.id)===t});return!o||!Zc(o)?null:o}function IR(e){e.preventDefault()}function Ql(e){var t=e.expected,n=e.phase,r=e.isLockActive;return e.shouldWarn,!(!r()||t!==n)}function r2(e){var t=e.lockAPI,n=e.store,r=e.registry,o=e.draggableId;if(t.isClaimed())return!1;var a=r.draggable.findById(o);return!(!a||!a.options.isEnabled||!Wb(n.getState(),o))}function TR(e){var t=e.lockAPI,n=e.contextId,r=e.store,o=e.registry,a=e.draggableId,l=e.forceSensorStop,u=e.sourceEvent,c=r2({lockAPI:t,store:r,registry:o,draggableId:a});if(!c)return null;var f=o.draggable.getById(a),h=kR(n,f.descriptor.id);if(!h||u&&!f.options.canDragInteractiveElements&&wR(h,u))return null;var g=t.claim(l||qr),p="PRE_DRAG";function y(){return f.options.shouldRespectForcePress}function w(){return t.isActive(g)}function E(A,M){Ql({expected:A,phase:p,isLockActive:w,shouldWarn:!0})&&r.dispatch(M())}var N=E.bind(null,"DRAGGING");function b(A){function M(){t.release(),p="COMPLETED"}p!=="PRE_DRAG"&&(M(),p!=="PRE_DRAG"&&ae()),r.dispatch(S3(A.liftActionArgs)),p="DRAGGING";function U(I,T){if(T===void 0&&(T={shouldBlockNextClick:!1}),A.cleanup(),T.shouldBlockNextClick){var R=En(window,[{eventName:"click",fn:IR,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(R)}M(),r.dispatch(zb({reason:I}))}return ge({isActive:function(){return Ql({expected:"DRAGGING",phase:p,isLockActive:w,shouldWarn:!1})},shouldRespectForcePress:y,drop:function(T){return U("DROP",T)},cancel:function(T){return U("CANCEL",T)}},A.actions)}function x(A){var M=Es(function(I){N(function(){return jb({client:I})})}),U=b({liftActionArgs:{id:a,clientSelection:A,movementMode:"FLUID"},cleanup:function(){return M.cancel()},actions:{move:M}});return ge({},U,{move:M})}function S(){var A={moveUp:function(){return N(L3)},moveRight:function(){return N(M3)},moveDown:function(){return N(A3)},moveLeft:function(){return N(R3)}};return b({liftActionArgs:{id:a,clientSelection:xR(h),movementMode:"SNAP"},cleanup:qr,actions:A})}function C(){var A=Ql({expected:"PRE_DRAG",phase:p,isLockActive:w,shouldWarn:!0});A&&t.release()}var D={isActive:function(){return Ql({expected:"PRE_DRAG",phase:p,isLockActive:w,shouldWarn:!1})},shouldRespectForcePress:y,fluidLift:x,snapLift:S,abort:C};return D}var DR=[uR,hR,yR];function LR(e){var t=e.contextId,n=e.store,r=e.registry,o=e.customSensors,a=e.enableDefaultSensors,l=[].concat(a?DR:[],o||[]),u=j.useState(function(){return qM()})[0],c=pe(function(x,S){x.isDragging&&!S.isDragging&&u.tryAbandon()},[u]);dn(function(){var x=n.getState(),S=n.subscribe(function(){var C=n.getState();c(x,C),x=C});return S},[u,n,c]),dn(function(){return u.tryAbandon},[u.tryAbandon]);for(var f=pe(function(b){return r2({lockAPI:u,registry:r,store:n,draggableId:b})},[u,r,n]),h=pe(function(b,x,S){return TR({lockAPI:u,registry:r,contextId:t,store:n,draggableId:b,forceSensorStop:x,sourceEvent:S&&S.sourceEvent?S.sourceEvent:null})},[t,u,r,n]),g=pe(function(b){return NR(t,b)},[t]),p=pe(function(b){var x=r.draggable.findById(b);return x?x.options:null},[r.draggable]),y=pe(function(){u.isClaimed()&&(u.tryAbandon(),n.getState().phase!=="IDLE"&&n.dispatch(Rm()))},[u,n]),w=pe(u.isClaimed,[u]),E=Me(function(){return{canGetLock:f,tryGetLock:h,findClosestDraggableId:g,findOptionsForDraggable:p,tryReleaseLock:y,isLockClaimed:w}},[f,h,g,p,y,w]),N=0;N<l.length;N++)l[N](E)}var AR=function(t){return{onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}};function Sa(e){return e.current||ae(),e.current}function MR(e){var t=e.contextId,n=e.setCallbacks,r=e.sensors,o=e.nonce,a=e.dragHandleUsageInstructions,l=j.useRef(null),u=Qb(e),c=pe(function(){return AR(u.current)},[u]),f=ZM(t),h=KM({contextId:t,text:a}),g=BM(t,o),p=pe(function(I){Sa(l).dispatch(I)},[]),y=Me(function(){return gy({publishWhileDragging:E3,updateDroppableScroll:N3,updateDroppableIsEnabled:k3,updateDroppableIsCombineEnabled:I3,collectionStarting:P3},p)},[p]),w=UM(),E=Me(function(){return mM(w,y)},[w,y]),N=Me(function(){return LM(ge({scrollWindow:gM,scrollDroppable:E.scrollDroppable},gy({move:jb},p)))},[E.scrollDroppable,p]),b=zM(t),x=Me(function(){return dM({announce:f,autoScroller:N,dimensionMarshal:E,focusMarshal:b,getResponders:c,styleMarshal:g})},[f,N,E,b,c,g]);l.current=x;var S=pe(function(){var I=Sa(l),T=I.getState();T.phase!=="IDLE"&&I.dispatch(Rm())},[]),C=pe(function(){var I=Sa(l).getState();return I.isDragging||I.phase==="DROP_ANIMATING"},[]),D=Me(function(){return{isDragging:C,tryAbort:S}},[C,S]);n(D);var A=pe(function(I){return Wb(Sa(l).getState(),I)},[]),M=pe(function(){return yi(Sa(l).getState())},[]),U=Me(function(){return{marshal:E,focus:b,contextId:t,canLift:A,isMovementAllowed:M,dragHandleUsageInstructionsId:h,registry:w}},[t,E,h,b,A,M,w]);return LR({contextId:t,store:x,registry:w,customSensors:r,enableDefaultSensors:e.enableDefaultSensors!==!1}),j.useEffect(function(){return S},[S]),Se.createElement(Gc.Provider,{value:U},Se.createElement(nL,{context:Hm,store:x},e.children))}var RR=0;function OR(){return Me(function(){return""+RR++},[])}function BR(e){var t=OR(),n=e.dragHandleUsageInstructions||hu.dragHandleUsageInstructions;return Se.createElement(hA,null,function(r){return Se.createElement(MR,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var i2=function(t){return function(n){return t===n}},jR=i2("scroll"),zR=i2("auto"),Ky=function(t,n){return n(t.overflowX)||n(t.overflowY)},FR=function(t){var n=window.getComputedStyle(t),r={overflowX:n.overflowX,overflowY:n.overflowY};return Ky(r,jR)||Ky(r,zR)},UR=function(){return!1},$R=function e(t){return t==null?null:t===document.body?UR()?t:null:t===document.documentElement?null:FR(t)?t:e(t.parentElement)},Jh=function(e){return{x:e.scrollLeft,y:e.scrollTop}},HR=function e(t){if(!t)return!1;var n=window.getComputedStyle(t);return n.position==="fixed"?!0:e(t.parentElement)},ZR=function(e){var t=$R(e),n=HR(e);return{closestScrollable:t,isFixedOnPage:n}},GR=function(e){var t=e.descriptor,n=e.isEnabled,r=e.isCombineEnabled,o=e.isFixedOnPage,a=e.direction,l=e.client,u=e.page,c=e.closest,f=function(){if(!c)return null;var y=c.scrollSize,w=c.client,E=Hb({scrollHeight:y.scrollHeight,scrollWidth:y.scrollWidth,height:w.paddingBox.height,width:w.paddingBox.width});return{pageMarginBox:c.page.marginBox,frameClient:w,scrollSize:y,shouldClipSubject:c.shouldClipSubject,scroll:{initial:c.scroll,current:c.scroll,max:E,diff:{value:wt,displacement:wt}}}}(),h=a==="vertical"?Tm:Sb,g=jo({page:u,withPlaceholder:null,axis:h,frame:f}),p={descriptor:t,isCombineEnabled:r,isFixedOnPage:o,axis:h,isEnabled:n,client:l,page:u,frame:f,subject:g};return p},WR=function(t,n){var r=hb(t);if(!n||t!==n)return r;var o=r.paddingBox.top-n.scrollTop,a=r.paddingBox.left-n.scrollLeft,l=o+n.scrollHeight,u=a+n.scrollWidth,c={top:o,right:u,bottom:l,left:a},f=Em(c,r.border),h=Pm({borderBox:f,margin:r.margin,border:r.border,padding:r.padding});return h},VR=function(e){var t=e.ref,n=e.descriptor,r=e.env,o=e.windowScroll,a=e.direction,l=e.isDropDisabled,u=e.isCombineEnabled,c=e.shouldClipSubject,f=r.closestScrollable,h=WR(t,f),g=qu(h,o),p=function(){if(!f)return null;var w=hb(f),E={scrollHeight:f.scrollHeight,scrollWidth:f.scrollWidth};return{client:w,page:qu(w,o),scroll:Jh(f),scrollSize:E,shouldClipSubject:c}}(),y=GR({descriptor:n,isEnabled:!l,isCombineEnabled:u,isFixedOnPage:r.isFixedOnPage,direction:a,client:h,page:g,closest:p});return y},KR={passive:!1},qR={passive:!0},qy=function(e){return e.shouldPublishImmediately?KR:qR};function tc(e){var t=j.useContext(e);return t||ae(),t}var Jl=function(t){return t&&t.env.closestScrollable||null};function YR(e){var t=j.useRef(null),n=tc(Gc),r=Zm("droppable"),o=n.registry,a=n.marshal,l=Qb(e),u=Me(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=j.useRef(u),f=Me(function(){return _t(function(C,D){t.current||ae();var A={x:C,y:D};a.updateDroppableScroll(u.id,A)})},[u.id,a]),h=pe(function(){var C=t.current;return!C||!C.env.closestScrollable?wt:Jh(C.env.closestScrollable)},[]),g=pe(function(){var C=h();f(C.x,C.y)},[h,f]),p=Me(function(){return Es(g)},[g]),y=pe(function(){var C=t.current,D=Jl(C);C&&D||ae();var A=C.scrollOptions;if(A.shouldPublishImmediately){g();return}p()},[p,g]),w=pe(function(C,D){t.current&&ae();var A=l.current,M=A.getDroppableRef();M||ae();var U=ZR(M),I={ref:M,descriptor:u,env:U,scrollOptions:D};t.current=I;var T=VR({ref:M,descriptor:u,env:U,windowScroll:C,direction:A.direction,isDropDisabled:A.isDropDisabled,isCombineEnabled:A.isCombineEnabled,shouldClipSubject:!A.ignoreContainerClipping}),R=U.closestScrollable;return R&&(R.setAttribute(Zy.contextId,n.contextId),R.addEventListener("scroll",y,qy(I.scrollOptions))),T},[n.contextId,u,y,l]),E=pe(function(){var C=t.current,D=Jl(C);return C&&D||ae(),Jh(D)},[]),N=pe(function(){var C=t.current;C||ae();var D=Jl(C);t.current=null,D&&(p.cancel(),D.removeAttribute(Zy.contextId),D.removeEventListener("scroll",y,qy(C.scrollOptions)))},[y,p]),b=pe(function(C){var D=t.current;D||ae();var A=Jl(D);A||ae(),A.scrollTop+=C.y,A.scrollLeft+=C.x},[]),x=Me(function(){return{getDimensionAndWatchScroll:w,getScrollWhileDragging:E,dragStopped:N,scroll:b}},[N,w,E,b]),S=Me(function(){return{uniqueId:r,descriptor:u,callbacks:x}},[x,u,r]);dn(function(){return c.current=S.descriptor,o.droppable.register(S),function(){t.current&&N(),o.droppable.unregister(S)}},[x,u,N,S,a,o.droppable]),dn(function(){t.current&&a.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,a]),dn(function(){t.current&&a.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,a])}function Tf(){}var Yy={width:0,height:0,margin:_A},QR=function(t){var n=t.isAnimatingOpenOnMount,r=t.placeholder,o=t.animate;return n||o==="close"?Yy:{height:r.client.borderBox.height,width:r.client.borderBox.width,margin:r.client.margin}},JR=function(t){var n=t.isAnimatingOpenOnMount,r=t.placeholder,o=t.animate,a=QR({isAnimatingOpenOnMount:n,placeholder:r,animate:o});return{display:r.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:o!=="none"?Wa.placeholder:null}};function XR(e){var t=j.useRef(null),n=pe(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),r=e.animate,o=e.onTransitionEnd,a=e.onClose,l=e.contextId,u=j.useState(e.animate==="open"),c=u[0],f=u[1];j.useEffect(function(){return c?r!=="open"?(n(),f(!1),Tf):t.current?Tf:(t.current=setTimeout(function(){t.current=null,f(!1)}),n):Tf},[r,c,n]);var h=pe(function(p){p.propertyName==="height"&&(o(),r==="close"&&a())},[r,a,o]),g=JR({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return Se.createElement(e.placeholder.tagName,{style:g,"data-rbd-placeholder-context-id":l,onTransitionEnd:h,ref:e.innerRef})}var e4=Se.memo(XR),Wm=Se.createContext(null),t4=function(e){Wx(t,e);function t(){for(var r,o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return r=e.call.apply(e,[this].concat(a))||this,r.state={isVisible:!!r.props.on,data:r.props.on,animate:r.props.shouldAnimate&&r.props.on?"open":"none"},r.onClose=function(){r.state.animate==="close"&&r.setState({isVisible:!1})},r}t.getDerivedStateFromProps=function(o,a){return o.shouldAnimate?o.on?{isVisible:!0,data:o.on,animate:"open"}:a.isVisible?{isVisible:!0,data:a.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!o.on,data:o.on,animate:"none"}};var n=t.prototype;return n.render=function(){if(!this.state.isVisible)return null;var o={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(o)},t}(Se.PureComponent),Qy={dragging:5e3,dropAnimating:4500},n4=function(t,n){return n?Wa.drop(n.duration):t?Wa.snap:Wa.fluid},r4=function(t,n){return t?n?Is.opacity.drop:Is.opacity.combining:null},i4=function(t){return t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP"};function o4(e){var t=e.dimension,n=t.client,r=e.offset,o=e.combineWith,a=e.dropping,l=!!o,u=i4(e),c=!!a,f=c?qh.drop(r,l):qh.moveTo(r),h={position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:n4(u,a),transform:f,opacity:r4(l,c),zIndex:c?Qy.dropAnimating:Qy.dragging,pointerEvents:"none"};return h}function a4(e){return{transform:qh.moveTo(e.offset),transition:e.shouldAnimateDisplacement?null:"none"}}function s4(e){return e.type==="DRAGGING"?o4(e):a4(e)}function l4(e,t,n){n===void 0&&(n=wt);var r=window.getComputedStyle(t),o=t.getBoundingClientRect(),a=fb(o,r),l=qu(a,n),u={client:a,tagName:t.tagName.toLowerCase(),display:r.display},c={x:a.marginBox.width,y:a.marginBox.height},f={descriptor:e,placeholder:u,displaceBy:c,client:a,page:l};return f}function u4(e){var t=Zm("draggable"),n=e.descriptor,r=e.registry,o=e.getDraggableRef,a=e.canDragInteractiveElements,l=e.shouldRespectForcePress,u=e.isEnabled,c=Me(function(){return{canDragInteractiveElements:a,shouldRespectForcePress:l,isEnabled:u}},[a,u,l]),f=pe(function(y){var w=o();return w||ae(),l4(n,w,y)},[n,o]),h=Me(function(){return{uniqueId:t,descriptor:n,options:c,getDimension:f}},[n,f,c,t]),g=j.useRef(h),p=j.useRef(!0);dn(function(){return r.draggable.register(g.current),function(){return r.draggable.unregister(g.current)}},[r.draggable]),dn(function(){if(p.current){p.current=!1;return}var y=g.current;g.current=h,r.draggable.update(h,y)},[h,r.draggable])}function c4(e){e.preventDefault()}function d4(e){var t=j.useRef(null),n=pe(function(I){t.current=I},[]),r=pe(function(){return t.current},[]),o=tc(Gc),a=o.contextId,l=o.dragHandleUsageInstructionsId,u=o.registry,c=tc(Wm),f=c.type,h=c.droppableId,g=Me(function(){return{id:e.draggableId,index:e.index,type:f,droppableId:h}},[e.draggableId,e.index,f,h]),p=e.children,y=e.draggableId,w=e.isEnabled,E=e.shouldRespectForcePress,N=e.canDragInteractiveElements,b=e.isClone,x=e.mapped,S=e.dropAnimationFinished;if(!b){var C=Me(function(){return{descriptor:g,registry:u,getDraggableRef:r,canDragInteractiveElements:N,shouldRespectForcePress:E,isEnabled:w}},[g,u,r,N,E,w]);u4(C)}var D=Me(function(){return w?{tabIndex:0,role:"button","aria-describedby":l,"data-rbd-drag-handle-draggable-id":y,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:c4}:null},[a,l,y,w]),A=pe(function(I){x.type==="DRAGGING"&&x.dropping&&I.propertyName==="transform"&&S()},[S,x]),M=Me(function(){var I=s4(x),T=x.type==="DRAGGING"&&x.dropping?A:null,R={innerRef:n,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":y,style:I,onTransitionEnd:T},dragHandleProps:D};return R},[a,D,y,x,A,n]),U=Me(function(){return{draggableId:g.id,type:g.type,source:{index:g.index,droppableId:g.droppableId}}},[g.droppableId,g.id,g.index,g.type]);return p(M,x.snapshot,U)}var o2=function(e,t){return e===t},a2=function(e){var t=e.combine,n=e.destination;return n?n.droppableId:t?t.droppableId:null},f4=function(t){return t.combine?t.combine.draggableId:null},h4=function(t){return t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null};function p4(){var e=_t(function(o,a){return{x:o,y:a}}),t=_t(function(o,a,l,u,c){return{isDragging:!0,isClone:a,isDropAnimating:!!c,dropAnimation:c,mode:o,draggingOver:l,combineWith:u,combineTargetFor:null}}),n=_t(function(o,a,l,u,c,f,h){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:f,mode:a,offset:o,dimension:l,forceShouldAnimate:h,snapshot:t(a,u,c,f,null)}}}),r=function(a,l){if(a.isDragging){if(a.critical.draggable.id!==l.draggableId)return null;var u=a.current.client.offset,c=a.dimensions.draggables[l.draggableId],f=cn(a.impact),h=h4(a.impact),g=a.forceShouldAnimate;return n(e(u.x,u.y),a.movementMode,c,l.isClone,f,h,g)}if(a.phase==="DROP_ANIMATING"){var p=a.completed;if(p.result.draggableId!==l.draggableId)return null;var y=l.isClone,w=a.dimensions.draggables[l.draggableId],E=p.result,N=E.mode,b=a2(E),x=f4(E),S=a.dropDuration,C={duration:S,curve:Bm.drop,moveTo:a.newHomeClientOffset,opacity:x?Is.opacity.drop:null,scale:x?Is.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:w,dropping:C,draggingOver:b,combineWith:x,mode:N,forceShouldAnimate:null,snapshot:t(N,y,b,x,C)}}}return null};return r}function s2(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var m4={mapped:{type:"SECONDARY",offset:wt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:s2(null)}};function g4(){var e=_t(function(l,u){return{x:l,y:u}}),t=_t(s2),n=_t(function(l,u,c){return u===void 0&&(u=null),{mapped:{type:"SECONDARY",offset:l,combineTargetFor:u,shouldAnimateDisplacement:c,snapshot:t(u)}}}),r=function(u){return u?n(wt,u,!0):null},o=function(u,c,f,h){var g=f.displaced.visible[u],p=!!(h.inVirtualList&&h.effected[u]),y=Uc(f),w=y&&y.draggableId===u?c:null;if(!g){if(!p)return r(w);if(f.displaced.invisible[u])return null;var E=qo(h.displacedBy.point),N=e(E.x,E.y);return n(N,w,!0)}if(p)return r(w);var b=f.displacedBy.point,x=e(b.x,b.y);return n(x,w,g.shouldAnimate)},a=function(u,c){if(u.isDragging)return u.critical.draggable.id===c.draggableId?null:o(c.draggableId,u.critical.draggable.id,u.impact,u.afterCritical);if(u.phase==="DROP_ANIMATING"){var f=u.completed;return f.result.draggableId===c.draggableId?null:o(c.draggableId,f.result.draggableId,f.impact,f.afterCritical)}return null};return a}var v4=function(){var t=p4(),n=g4(),r=function(a,l){return t(a,l)||n(a,l)||m4};return r},y4={dropAnimationFinished:Fb},_4=cb(v4,y4,null,{context:Hm,pure:!0,areStatePropsEqual:o2})(d4);function l2(e){var t=tc(Wm),n=t.isUsingCloneFor;return n===e.draggableId&&!e.isClone?null:Se.createElement(_4,e)}function w4(e){var t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return Se.createElement(l2,ge({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}function x4(e){var t=j.useContext(Gc);t||ae();var n=t.contextId,r=t.isMovementAllowed,o=j.useRef(null),a=j.useRef(null),l=e.children,u=e.droppableId,c=e.type,f=e.mode,h=e.direction,g=e.ignoreContainerClipping,p=e.isDropDisabled,y=e.isCombineEnabled,w=e.snapshot,E=e.useClone,N=e.updateViewportMaxScroll,b=e.getContainerForClone,x=pe(function(){return o.current},[]),S=pe(function(R){o.current=R},[]);pe(function(){return a.current},[]);var C=pe(function(R){a.current=R},[]),D=pe(function(){r()&&N({maxScroll:Gb()})},[r,N]);YR({droppableId:u,type:c,mode:f,direction:h,isDropDisabled:p,isCombineEnabled:y,ignoreContainerClipping:g,getDroppableRef:x});var A=Se.createElement(t4,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(R){var V=R.onClose,Z=R.data,q=R.animate;return Se.createElement(e4,{placeholder:Z,onClose:V,innerRef:C,animate:q,contextId:n,onTransitionEnd:D})}),M=Me(function(){return{innerRef:S,placeholder:A,droppableProps:{"data-rbd-droppable-id":u,"data-rbd-droppable-context-id":n}}},[n,u,A,S]),U=E?E.dragging.draggableId:null,I=Me(function(){return{droppableId:u,type:c,isUsingCloneFor:U}},[u,U,c]);function T(){if(!E)return null;var R=E.dragging,V=E.render,Z=Se.createElement(l2,{draggableId:R.draggableId,index:R.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(q,J){return V(q,J,R)});return FE.createPortal(Z,b())}return Se.createElement(Wm.Provider,{value:I},l(M,w),T())}var Df=function(t,n){return t===n.droppable.type},Jy=function(t,n){return n.draggables[t.draggable.id]},b4=function(){var t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},n=ge({},t,{shouldAnimatePlaceholder:!1}),r=_t(function(l){return{draggableId:l.id,type:l.type,source:{index:l.index,droppableId:l.droppableId}}}),o=_t(function(l,u,c,f,h,g){var p=h.descriptor.id,y=h.descriptor.droppableId===l;if(y){var w=g?{render:g,dragging:r(h.descriptor)}:null,E={isDraggingOver:c,draggingOverWith:c?p:null,draggingFromThisWith:p,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!1,snapshot:E,useClone:w}}if(!u)return n;if(!f)return t;var N={isDraggingOver:c,draggingOverWith:p,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!0,snapshot:N,useClone:null}}),a=function(u,c){var f=c.droppableId,h=c.type,g=!c.isDropDisabled,p=c.renderClone;if(u.isDragging){var y=u.critical;if(!Df(h,y))return n;var w=Jy(y,u.dimensions),E=cn(u.impact)===f;return o(f,g,E,E,w,p)}if(u.phase==="DROP_ANIMATING"){var N=u.completed;if(!Df(h,N.critical))return n;var b=Jy(N.critical,u.dimensions);return o(f,g,a2(N.result)===f,cn(N.impact)===f,b,p)}if(u.phase==="IDLE"&&u.completed&&!u.shouldFlush){var x=u.completed;if(!Df(h,x.critical))return n;var S=cn(x.impact)===f,C=!!(x.impact.at&&x.impact.at.type==="COMBINE"),D=x.critical.droppable.id===f;return S?C?t:n:D?t:n}return n};return a},S4={updateViewportMaxScroll:D3};function C4(){return document.body||ae(),document.body}var E4={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:C4},u2=cb(b4,S4,null,{context:Hm,pure:!0,areStatePropsEqual:o2})(x4);u2.defaultProps=E4;const P4=({group:e,onBack:t,onUpdate:n,onDelete:r})=>{const[o,a]=j.useState(!1),[l,u]=j.useState(e.title),[c,f]=j.useState(e.memo),[h,g]=j.useState(e.tags),[p,y]=j.useState(e.photos),[w,E]=j.useState(!1),[N,b]=j.useState(()=>{const re=localStorage.getItem("postal_tags");return re?JSON.parse(re):[]}),[x,S]=j.useState({}),[C,D]=j.useState({}),[A,M]=j.useState(null),[U,I]=j.useState(""),[T,R]=j.useState("#3B82F6"),[V,Z]=j.useState(!1),[q,J]=j.useState(""),[Y,te]=j.useState("#3B82F6");j.useEffect(()=>{const re=localStorage.getItem("postal_tags");re&&b(JSON.parse(re))},[o]),j.useEffect(()=>{(async()=>{const re={};for(const de of p){let me=de.image;if(!me.startsWith("data:")&&!me.startsWith("blob:")){const xe=await nr(de.image);if(xe)me=await z(xe);else{re[de.id]="";continue}}else if(me.startsWith("blob:")){const xe=await fetch(me).then(be=>be.blob());me=await z(xe)}de.rotation&&de.rotation%360!==0&&(me=await k(me,de.rotation)),re[de.id]=me}D(re)})()},[p]);const B=re=>new Intl.DateTimeFormat("ja-JP",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",weekday:"long"}).format(re),F=(re,de)=>{y(me=>me.map(xe=>{if(xe.id!==re)return xe;let be=(xe.rotation||0)+(de==="right"?90:-90);return be=(be%360+360)%360,{...xe,rotation:be}}))},k=async(re,de)=>!de||de%360===0?re:new Promise((me,xe)=>{const be=new window.Image;be.onload=()=>{const Ke=document.createElement("canvas"),rt=Ke.getContext("2d");if(!rt)return xe("No ctx");switch(de%180===0?(Ke.width=be.width,Ke.height=be.height):(Ke.width=be.height,Ke.height=be.width),rt.save(),de){case 90:rt.translate(Ke.width,0),rt.rotate(Math.PI/2);break;case 180:rt.translate(Ke.width,Ke.height),rt.rotate(Math.PI);break;case 270:rt.translate(0,Ke.height),rt.rotate(-Math.PI/2);break}rt.drawImage(be,0,0),rt.restore(),me(Ke.toDataURL("image/jpeg"))},be.onerror=xe,be.src=re}),z=re=>new Promise((de,me)=>{const xe=new FileReader;xe.onload=()=>de(xe.result),xe.onerror=me,xe.readAsDataURL(re)}),G=async()=>{const re=[];for(const de of p){const me=C[de.id]||de.image,be=await(await fetch(me)).blob();await So(de.id,be);const{rotation:Ke,...rt}=de;re.push(rt)}n({title:l,memo:c,tags:h,photos:re,updatedAt:new Date}),a(!1)},H=()=>{u(e.title),f(e.memo),g(e.tags),y(e.photos),a(!1)},K=re=>{g(de=>de.includes(re)?de.filter(me=>me!==re):[...de,re])},ne=async()=>{window.confirm("このグループを削除しますか？")&&await r()},Q=async re=>{try{const de=await $w(re),me=await Bw(de,1e3,1e3),xe=await(await fetch(me)).blob(),be=new FileReader;be.onload=()=>{const Ke={id:du(),image:be.result,ocrText:"",createdAt:new Date,updatedAt:new Date,tags:[],memo:"",metadata:{filename:re.name,source:"bulk"}};y(rt=>[...rt,Ke])},be.readAsDataURL(xe)}catch(de){console.error("写真の追加に失敗しました:",de),alert("写真の追加に失敗しました")}},ce=re=>{y(de=>de.filter(me=>me.id!==re))},ve=async()=>{E(!0);try{await ED(e)||alert("共有に失敗しました。")}catch(re){console.error("共有エラー:",re),alert("共有中にエラーが発生しました。")}finally{E(!1)}},$e=()=>{if(!q.trim())return;const re={name:q.trim(),color:Y},de=[...N,re];b(de),localStorage.setItem("postal_tags",JSON.stringify(de)),J(""),te("#3B82F6"),Z(!1)},Oe=re=>{M(re),I(N[re].name),R(N[re].color)},tt=()=>{if(A===null||!U.trim())return;const re=N[A].name,de=U.trim(),me=N.map((xe,be)=>be===A?{name:de,color:T}:xe);b(me),localStorage.setItem("postal_tags",JSON.stringify(me)),g(xe=>xe.map(be=>be===re?de:be)),M(null),I(""),R("#3B82F6")},nt=()=>{M(null),I(""),R("#3B82F6")},bt=re=>{if(!window.confirm("このタグを削除しますか？"))return;const de=N[re].name,me=N.filter((xe,be)=>be!==re);b(me),localStorage.setItem("postal_tags",JSON.stringify(me)),g(xe=>xe.filter(be=>be!==de))},lt=re=>{if(!re.destination)return;const de=Array.from(p),[me]=de.splice(re.source.index,1);de.splice(re.destination.index,0,me),y(de)};return v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[v.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:v.jsx("div",{className:"max-w-md mx-auto px-4 py-4",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:v.jsx(_c,{className:"h-5 w-5"})}),v.jsx("h1",{className:"text-xl font-bold text-gray-900 flex-1",children:"グループ詳細"}),v.jsx("div",{className:"flex items-center gap-2",children:o?v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:H,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:v.jsx(ei,{className:"h-5 w-5 text-gray-500"})}),v.jsx("button",{onClick:G,className:"p-2 hover:bg-green-100 rounded-lg transition-colors",children:v.jsx(qp,{className:"h-5 w-5 text-green-600"})})]}):v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:ve,disabled:w,className:`p-2 rounded-lg transition-colors ${w?"bg-gray-100 cursor-not-allowed":"hover:bg-blue-100"}`,children:v.jsx(Xp,{className:`h-5 w-5 ${w?"text-gray-400":"text-blue-500"}`})}),v.jsx("button",{onClick:()=>a(!0),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:v.jsx(xw,{className:"h-5 w-5 text-gray-500"})}),v.jsx("button",{onClick:ne,className:"p-2 hover:bg-red-100 rounded-lg transition-colors",children:v.jsx(fs,{className:"h-5 w-5 text-red-500"})})]})})]})})}),v.jsxs("div",{className:"max-w-md mx-auto px-4 py-6 space-y-6",children:[v.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"タイトル"}),o?v.jsx("input",{type:"text",value:l,onChange:re=>u(re.target.value),className:"w-full p-2 border border-gray-200 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}):v.jsx("p",{className:"text-gray-900",children:e.title})]}),v.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"写真"}),o&&v.jsxs("div",{className:"flex gap-2",children:[v.jsxs("label",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors cursor-pointer",children:[v.jsx(yw,{className:"h-5 w-5 text-gray-500"}),v.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:re=>re.target.files?.[0]&&Q(re.target.files[0]),className:"hidden"})]}),v.jsxs("label",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors cursor-pointer",children:[v.jsx(hs,{className:"h-5 w-5 text-gray-500"}),v.jsx("input",{type:"file",accept:"image/*",onChange:re=>re.target.files?.[0]&&Q(re.target.files[0]),className:"hidden"})]})]})]}),v.jsx(BR,{onDragEnd:lt,children:v.jsx(u2,{droppableId:"photos",direction:"horizontal",children:re=>v.jsxs("div",{ref:re.innerRef,...re.droppableProps,className:"flex gap-2 overflow-x-auto pb-2 min-h-[120px]",style:{scrollbarWidth:"thin"},children:[p.map((de,me)=>v.jsx(w4,{draggableId:de.id,index:me,isDragDisabled:!o,children:(xe,be)=>v.jsxs("div",{ref:xe.innerRef,...xe.draggableProps,...xe.dragHandleProps,className:"relative group flex-shrink-0",style:{width:120,minWidth:120,maxWidth:120,...xe.draggableProps.style,transform:be.isDragging?xe.draggableProps.style?.transform:"none"},children:[o&&v.jsx("div",{className:"absolute top-0 left-0 right-0 h-6 flex justify-center items-center bg-gray-100/80 rounded-t-lg cursor-grab active:cursor-grabbing",children:v.jsx(uP,{className:"h-4 w-4 text-gray-600"})}),v.jsx("img",{src:C[de.id]||"",alt:"プレビュー",className:`w-full h-[100px] object-contain rounded-lg border-2 mt-6 ${be.isDragging?"border-blue-500 shadow-lg bg-blue-50":o?"border-gray-200":"border-transparent"}`}),o&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"absolute bottom-1 right-1 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[v.jsx("button",{type:"button",className:"p-1.5 bg-white/80 rounded-lg hover:bg-white",onClick:()=>F(de.id,"left"),children:v.jsx(Qp,{className:"h-4 w-4 text-gray-700"})}),v.jsx("button",{type:"button",className:"p-1.5 bg-white/80 rounded-lg hover:bg-white",onClick:()=>F(de.id,"right"),children:v.jsx(Jp,{className:"h-4 w-4 text-gray-700"})})]}),v.jsx("button",{onClick:()=>ce(de.id),className:"absolute top-1 right-1 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 opacity-0 group-hover:opacity-100 transition-opacity",children:v.jsx(ei,{className:"h-4 w-4"})})]})]})},de.id)),re.placeholder]})})})]}),v.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"タグ"}),v.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:N.map((re,de)=>v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx(Ai,{tag:re.name,selected:o?h.includes(re.name):e.tags.includes(re.name),onClick:o?()=>K(re.name):void 0,style:{backgroundColor:re.color+"22",color:re.color,cursor:o?"pointer":"default"}}),o&&v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:()=>Oe(de),className:"p-1 hover:bg-gray-100 rounded",children:v.jsx(bw,{className:"h-4 w-4"})}),v.jsx("button",{onClick:()=>bt(de),className:"p-1 hover:bg-red-100 rounded",children:v.jsx(fs,{className:"h-4 w-4 text-red-500"})})]})]},re.name))}),o&&v.jsxs(v.Fragment,{children:[A!==null?v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v.jsx("input",{value:U,onChange:re=>I(re.target.value),className:"border p-1 rounded w-24"}),v.jsx("input",{type:"color",value:T,onChange:re=>R(re.target.value),className:"w-8 h-8 p-0 border-none"}),v.jsx("button",{onClick:tt,className:"px-2 py-1 bg-blue-500 text-white rounded",children:"保存"}),v.jsx("button",{onClick:nt,className:"px-2 py-1 bg-gray-200 rounded",children:"キャンセル"})]}):null,V?v.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[v.jsx("input",{value:q,onChange:re=>J(re.target.value),placeholder:"新規タグ名",className:"border p-1 rounded w-24"}),v.jsx("input",{type:"color",value:Y,onChange:re=>te(re.target.value),className:"w-8 h-8 p-0 border-none"}),v.jsx("button",{onClick:$e,className:"px-2 py-1 bg-blue-500 text-white rounded",children:"追加"}),v.jsx("button",{onClick:()=>Z(!1),className:"px-2 py-1 bg-gray-200 rounded",children:"キャンセル"})]}):v.jsxs("button",{onClick:()=>Z(!0),className:"flex items-center gap-1 px-2 py-1 bg-gray-100 rounded hover:bg-gray-200",children:[v.jsx(Fa,{className:"h-4 w-4"})," 新規タグ"]})]})]}),v.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"メモ"}),o?v.jsx("textarea",{value:c,onChange:re=>f(re.target.value),className:"w-full h-32 p-3 border border-gray-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500"}):v.jsx("div",{className:"whitespace-pre-wrap text-gray-900",children:e.memo})]}),v.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"日時情報"}),v.jsxs("p",{className:"text-gray-600",children:["作成日時: ",B(e.createdAt)]}),e.updatedAt.getTime()!==e.createdAt.getTime()&&v.jsxs("p",{className:"text-gray-600 mt-1",children:["最終更新: ",B(e.updatedAt)]})]}),v.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"位置情報"}),e.photos.some(re=>re.metadata?.location)?v.jsxs("div",{className:"space-y-4",children:[e.photos.map((re,de)=>{const me=re.metadata?.location;return me?v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx(Yp,{className:"h-5 w-5 text-blue-500 mt-1 flex-shrink-0"}),v.jsxs("div",{children:[v.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["写真 ",de+1]}),v.jsxs("div",{className:"text-sm text-gray-600",children:["緯度: ",me.lat.toFixed(6)]}),v.jsxs("div",{className:"text-sm text-gray-600",children:["経度: ",me.lon.toFixed(6)]}),v.jsxs("a",{href:`https://www.google.com/maps?q=${me.lat},${me.lon}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-500 hover:text-blue-600 inline-flex items-center gap-1 mt-1",children:["Google Mapsで表示",v.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:[v.jsx("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),v.jsx("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})]})]})]})]},re.id):null}),v.jsx("div",{className:"mt-4",children:v.jsx(nm,{items:[],groups:[e],className:"h-48 rounded-lg overflow-hidden"})})]}):v.jsx("p",{className:"text-gray-500",children:"位置情報なし"})]})]})]})},N4=({items:e,groups:t,tags:n,onBack:r,onImport:o})=>{const[a]=j.useState(()=>new Fx),[l,u]=j.useState(null),[c,f]=j.useState([]),[h,g]=j.useState(!1),[p,y]=j.useState(null),[w,E]=j.useState(null),[N,b]=j.useState("qr"),[x,S]=j.useState(null);j.useEffect(()=>{u(a.getDeviceInfo())},[a]);const C=async()=>{g(!0);try{const T=await a.prepareSyncData(e,t,n),R=await a.generateQRCode(T);f(R),y(T);const V=JSON.stringify(T).length,Z=R.length*2e3,q=(V-Z)/V*100;S({originalSize:V,compressedSize:Z,compressionRatio:q,chunks:R.length})}catch(T){console.error("QRコード生成エラー:",T),alert("QRコードの生成に失敗しました: "+T.message)}finally{g(!1)}},D=async()=>{p||await C();try{const T=await a.generateEmailBackup(p);E(T)}catch(T){console.error("メールバックアップ生成エラー:",T),alert("メールバックアップの生成に失敗しました: "+T.message)}},A=()=>{if(!w)return;const T=`mailto:?subject=${encodeURIComponent(w.subject)}&body=${encodeURIComponent(w.body)}`;window.open(T)},M=T=>{if(!w)return;let R="";const V=encodeURIComponent(w.subject),Z=encodeURIComponent(w.body);switch(T){case"gmail":R=`https://mail.google.com/mail/?view=cm&fs=1&to=&su=${V}&body=${Z}`;break;case"yahoo":R=`https://compose.mail.yahoo.com/?subject=${V}&body=${Z}`;break;case"line":const q=`${w.subject}

${w.body}`;R=`https://line.me/R/msg/text/?${encodeURIComponent(q)}`;break;case"outlook":R=`https://outlook.live.com/mail/0/deeplink/compose?subject=${V}&body=${Z}`;break}window.open(R,"_blank")},U=async T=>{const R=T.target.files?.[0];if(R)try{const V=await R.text(),Z=JSON.parse(V);if(Z.version&&Z.data)await a.readQRCode(JSON.stringify(Z)),o(Z.data),alert("データのインポートが完了しました");else throw new Error("無効なファイル形式です")}catch(V){console.error("インポートエラー:",V),alert("ファイルのインポートに失敗しました: "+V.message)}},I=T=>{a.updateDeviceName(T),u(a.getDeviceInfo())};return v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[v.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:v.jsx("div",{className:"max-w-md mx-auto px-4 py-4",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:v.jsx(_c,{className:"h-5 w-5"})}),v.jsx("h1",{className:"text-xl font-bold text-gray-900 flex-1",children:"同期・バックアップ"})]})})}),v.jsxs("div",{className:"max-w-md mx-auto px-4 py-6 space-y-6",children:[v.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"デバイス情報"}),l&&v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(gP,{className:"h-5 w-5 text-gray-400"}),v.jsx("span",{className:"text-gray-600",children:"デバイス名:"}),v.jsx("input",{type:"text",value:l.deviceName,onChange:T=>I(T.target.value),className:"flex-1 px-2 py-1 border border-gray-200 rounded text-sm"})]}),v.jsxs("div",{className:"text-sm text-gray-500",children:["デバイスID: ",l.deviceId]}),v.jsxs("div",{className:"text-sm text-gray-500",children:["最終同期: ",l.lastSync?new Date(l.lastSync).toLocaleString("ja-JP"):"未同期"]})]})]}),v.jsxs("div",{className:"bg-white rounded-xl shadow-sm",children:[v.jsxs("div",{className:"flex border-b",children:[v.jsxs("button",{onClick:()=>b("qr"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${N==="qr"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[v.jsx(o0,{className:"h-4 w-4 inline mr-2"}),"QRコード同期"]}),v.jsxs("button",{onClick:()=>b("email"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${N==="email"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[v.jsx(Xd,{className:"h-4 w-4 inline mr-2"}),"メールバックアップ"]}),v.jsxs("button",{onClick:()=>b("import"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${N==="import"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[v.jsx(hs,{className:"h-4 w-4 inline mr-2"}),"インポート"]})]}),v.jsxs("div",{className:"p-6",children:[N==="qr"&&v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"QRコード同期"}),v.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"他のデバイスでQRコードを読み取ってデータを同期できます"}),v.jsxs("button",{onClick:C,disabled:h,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:[h?v.jsx(mP,{className:"h-4 w-4 animate-spin"}):v.jsx(o0,{className:"h-4 w-4"}),h?"生成中...":"QRコード生成"]})]}),x&&v.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[v.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"圧縮情報"}),v.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[v.jsxs("div",{children:[v.jsx("span",{className:"text-blue-700",children:"元のサイズ:"}),v.jsxs("span",{className:"ml-2",children:[x.originalSize.toLocaleString()," 文字"]})]}),v.jsxs("div",{children:[v.jsx("span",{className:"text-blue-700",children:"圧縮後:"}),v.jsxs("span",{className:"ml-2",children:[x.compressedSize.toLocaleString()," 文字"]})]}),v.jsxs("div",{children:[v.jsx("span",{className:"text-blue-700",children:"圧縮率:"}),v.jsxs("span",{className:"ml-2",children:[x.compressionRatio.toFixed(1),"%"]})]}),v.jsxs("div",{children:[v.jsx("span",{className:"text-blue-700",children:"QRコード数:"}),v.jsxs("span",{className:"ml-2",children:[x.chunks," 個"]})]})]})]}),c.length>0&&v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:c.length===1?"QRコード":`QRコード (${c.length}個)`}),c.length>1&&v.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["データが大きいため、複数のQRコードに分割されています。",v.jsx("br",{}),"すべてのQRコードを順番に読み取ってください。"]})]}),v.jsx("div",{className:"grid grid-cols-1 gap-4",children:c.map((T,R)=>v.jsxs("div",{className:"text-center",children:[c.length>1&&v.jsx("div",{className:"mb-2",children:v.jsxs("span",{className:"inline-block bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm font-medium",children:["QRコード ",R+1," / ",c.length]})}),v.jsx("div",{className:"bg-white p-4 rounded-lg border inline-block",children:v.jsx("img",{src:T,alt:`QRコード ${R+1}`,className:"w-48 h-48"})})]},R))}),v.jsx("div",{className:"text-center",children:v.jsx("p",{className:"text-xs text-gray-500",children:c.length===1?"他のデバイスでこのQRコードを読み取ってください":"他のデバイスで上から順番にQRコードを読み取ってください"})})]})]}),N==="email"&&v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"メールバックアップ"}),v.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"データをメールで送信してバックアップを作成できます"}),v.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:[v.jsx(Xd,{className:"h-4 w-4"}),"メールバックアップ生成"]})]}),w&&v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[v.jsxs("div",{className:"text-sm",children:[v.jsx("strong",{children:"件名:"})," ",w.subject]}),v.jsxs("div",{className:"text-sm mt-2",children:[v.jsx("strong",{children:"内容:"}),v.jsx("pre",{className:"text-xs mt-1 whitespace-pre-wrap",children:w.body})]})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsx("h4",{className:"font-semibold text-gray-900 text-center",children:"送信先を選択"}),v.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[v.jsxs("button",{onClick:()=>M("gmail"),className:"flex items-center justify-center gap-2 px-4 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:[v.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",children:v.jsx("path",{d:"M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-.904.732-1.636 1.636-1.636h.819L12 10.91l9.545-7.089h.819c.904 0 1.636.732 1.636 1.636z"})}),"Gmail"]}),v.jsxs("button",{onClick:()=>M("yahoo"),className:"flex items-center justify-center gap-2 px-4 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:[v.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",children:v.jsx("path",{d:"M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-.904.732-1.636 1.636-1.636h.819L12 10.91l9.545-7.089h.819c.904 0 1.636.732 1.636 1.636z"})}),"Yahoo"]}),v.jsxs("button",{onClick:()=>M("line"),className:"flex items-center justify-center gap-2 px-4 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[v.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",children:v.jsx("path",{d:"M19.365 9.863c.349 0 .63.285.631.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.346 0 .627.285.627.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63.346 0 .628.285.628.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.348 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.282.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314"})}),"Line"]}),v.jsxs("button",{onClick:()=>M("outlook"),className:"flex items-center justify-center gap-2 px-4 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[v.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",children:v.jsx("path",{d:"M7.88 3.39L6.6 1.86C6.45 1.69 6.24 1.58 6 1.58c-.24 0-.45.11-.6.28L3.88 3.39C3.73 3.56 3.62 3.77 3.62 4v16c0 .23.11.44.26.61l1.28 1.53c.15.17.36.28.6.28.24 0 .45-.11.6-.28l1.28-1.53c.15-.17.26-.38.26-.61V4c0-.23-.11-.44-.26-.61zM20.12 3.39l-1.28-1.53C18.69 1.69 18.48 1.58 18.24 1.58c-.24 0-.45.11-.6.28L16.36 3.39c-.15.17-.26.38-.26.61v16c0 .23.11.44.26.61l1.28 1.53c.15.17.36.28.6.28.24 0 .45-.11.6-.28l1.28-1.53c.15-.17.26-.38.26-.61V4c0-.23-.11-.44-.26-.61z"})}),"Outlook"]})]}),v.jsxs("button",{onClick:A,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:[v.jsx(Xd,{className:"h-4 w-4"}),"デフォルトメールアプリ"]})]})]})]}),N==="import"&&v.jsx("div",{className:"space-y-4",children:v.jsxs("div",{className:"text-center",children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"データインポート"}),v.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"バックアップファイルまたはQRコードデータをインポートできます"}),v.jsxs("label",{className:"block p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-colors cursor-pointer",children:[v.jsxs("div",{className:"flex items-center justify-center gap-2",children:[v.jsx(hs,{className:"h-6 w-6 text-gray-400"}),v.jsx("span",{className:"text-gray-600",children:"ファイルを選択"})]}),v.jsx("input",{type:"file",accept:".json",onChange:U,className:"hidden"})]})]})})]})]}),v.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"データ統計"}),v.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[v.jsxs("div",{children:[v.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.length}),v.jsx("div",{className:"text-sm text-gray-500",children:"アイテム"})]}),v.jsxs("div",{children:[v.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.length}),v.jsx("div",{className:"text-sm text-gray-500",children:"グループ"})]}),v.jsxs("div",{children:[v.jsx("div",{className:"text-2xl font-bold text-purple-600",children:n.length}),v.jsx("div",{className:"text-sm text-gray-500",children:"タグ"})]})]})]})]})]})},Xy=e=>new Promise((t,n)=>{const r=new FileReader;r.onloadend=()=>t(r.result),r.onerror=n,r.readAsDataURL(e)}),k4=e=>{const t=e.split(";base64,"),n=t[0].split(":")[1],r=window.atob(t[1]),o=r.length,a=new Uint8Array(o);for(let l=0;l<o;++l)a[l]=r.charCodeAt(l);return new Blob([a],{type:n})};function I4(){const{items:e,groups:t,addItem:n,addGroup:r,updateItem:o,getItem:a,getGroup:l,updateGroup:u,deleteItem:c,deleteGroup:f,setItems:h,setGroups:g}=iP(),[p,y]=j.useState(""),[w,E]=j.useState([]),[N,b]=j.useState({screen:{type:"home"}}),[x,S]=j.useState(null),C=()=>{const k=localStorage.getItem("postal_tags");return k?JSON.parse(k):[]},D=k=>{localStorage.setItem("postal_tags",JSON.stringify(k))},A=async k=>{S(null);try{const z=k.data?k.data:k;if(!z.items&&!z.groups&&!z.tags)throw new Error("インポートするデータが見つかりません");const G=async H=>{for(const K of H){if(K.createdAt=new Date(K.createdAt),K.updatedAt=new Date(K.updatedAt),K.imageData&&K.image){const ne=k4(K.imageData);await So(K.image,ne)}K.photos&&await G(K.photos)}return H.map(K=>{const{imageData:ne,...Q}=K;return Q})};if(z.items){const H=await G(z.items);for(const K of H)await n(K)}if(z.groups){const H=await G(z.groups);for(const K of H)await r(K)}z.tags&&D(z.tags),alert("データをインポートしました")}catch(z){S(z.message||"インポートに失敗しました"),console.error("Import error:",z)}},M=async()=>{const k={items:e,groups:t,tags:C()},z=await Promise.all((k.items||[]).map(async H=>{if(!H.image)return H;const K=await nr(H.image),ne=K?await Xy(K):null;return{...H,imageData:ne}})),G=await Promise.all((k.groups||[]).map(async H=>{const K=await Promise.all((H.photos||[]).map(async ne=>{if(!ne.image)return ne;const Q=await nr(ne.image),ce=Q?await Xy(Q):null;return{...ne,imageData:ce}}));return{...H,photos:K}}));return{version:"1.1",items:z,groups:G,tags:k.tags}},U=async()=>{const k=await M(),z=new Blob([JSON.stringify(k,null,2)],{type:"application/json"}),G=URL.createObjectURL(z),H=document.createElement("a");H.href=G,H.download=`postal_snap_export_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(G)},I=k=>{b({screen:k})},T=k=>{y(k)},R=k=>{E(z=>z.includes(k)?z.filter(G=>G!==k):[...z,k])},V=()=>{I({type:"add",mode:"unified"})},Z=async k=>{S(null);try{"photos"in k?await r(k):await n(k),I({type:"home"})}catch(z){S(z.message||"保存に失敗しました"),console.error("Save error:",z)}},q=(k,z)=>{o(k,z)},J=k=>{I({type:"detail",itemId:k})},Y=k=>{I({type:"detail-group",groupId:k})},te=async(k,z)=>{S(null);try{const G=await Lr(),H=(G.items||[]).map(Q=>({...Q,tags:(Q.tags||[]).map(ce=>ce===k?z:ce)})),K=(G.groups||[]).map(Q=>({...Q,tags:(Q.tags||[]).map(ce=>ce===k?z:ce)})),ne={...G,items:H,groups:K};await mo(ne),h(H),g(K)}catch(G){S(G.message||"タグの一括変更に失敗しました"),console.error("Tag rename error:",G)}},B=async(k,z)=>{S(null);try{const G=new Set;(e||[]).filter(Q=>k.includes(Q.id)).forEach(Q=>{Q.image&&G.add(Q.image)}),(t||[]).filter(Q=>z.includes(Q.id)).forEach(Q=>{(Q.photos||[]).forEach(ce=>{ce.image&&G.add(ce.image)})});const H=await Lr(),K=(H.items||[]).filter(Q=>!k.includes(Q.id)),ne=(H.groups||[]).filter(Q=>!z.includes(Q.id));await mo({...H,items:K,groups:ne});for(const Q of G)try{await gw(Q)}catch(ce){console.error("Failed to delete image:",Q,ce)}h(K),g(ne)}catch(G){S(G.message||"削除に失敗しました"),console.error("Delete error:",G)}},F=()=>{switch(N.screen.type){case"home":return v.jsx(kD,{items:e,groups:t,searchQuery:p,selectedTags:w,onSearchChange:T,onTagToggle:R,onAddItem:V,onItemClick:J,onGroupClick:Y,onBulkTagRename:te,onImport:A,onExport:U,getExportData:M,onBulkDelete:B,onSync:()=>I({type:"sync"})});case"add":return v.jsx(OD,{onSave:Z,onBack:()=>I({type:"home"})});case"detail":const k=a(N.screen.itemId);return k?v.jsx(WD,{item:k,onBack:()=>I({type:"home"}),onUpdate:G=>q(k.id,G),onDelete:async()=>{await c(k.id),I({type:"home"})}}):null;case"detail-group":const z=l(N.screen.groupId);return z?v.jsx(P4,{group:z,onBack:()=>I({type:"home"}),onUpdate:G=>u(z.id,G),onDelete:async()=>{await f(z.id),I({type:"home"})}}):null;case"sync":return v.jsx(N4,{items:e,groups:t,tags:C(),onBack:()=>I({type:"home"}),onImport:A});default:return null}};return v.jsxs("div",{className:"min-h-screen bg-gray-50",children:[x&&v.jsx("div",{className:"mx-auto max-w-md bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:v.jsx("p",{children:x})}),F()]})}async function T4(){try{await Nc(),Lf.createRoot(document.getElementById("root")).render(v.jsx(Se.StrictMode,{children:v.jsx(I4,{})}))}catch(e){console.error("Failed to initialize WebAssembly module:",e),document.getElementById("root").innerHTML=`
      <div style="padding: 20px; color: red;">
        アプリケーションの初期化に失敗しました。ページを再読み込みしてください。
      </div>
    `}}T4();
//# sourceMappingURL=main-DLywvrAn.js.map
